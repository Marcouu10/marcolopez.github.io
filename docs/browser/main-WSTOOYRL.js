import{a as q,b as xe,c as Wh,d as R,e as Ew,f as Qu,g as Dw,h as Cw,i as Tw,j as Kh,k as bw,l as qs,m as Qh,n as Yu,o as Sw,p as Aw,q as Yh,r as Pe,s as zr,t as hn,u as Zu,v as zs,w as xw,x as Rw,y as ur,z as bt}from"./chunk-4ZHOUZTK.js";var Jh=null;var Zh=1,Mw=Symbol("SIGNAL");function we(n){let e=Jh;return Jh=n,e}function Nw(){return Jh}var Xh={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function BA(n){if(!(of(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Zh)){if(!n.producerMustRecompute(n)&&!tf(n)){n.dirty=!1,n.lastCleanEpoch=Zh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Zh}}function ef(n){return n&&(n.nextProducerIndex=0),we(n)}function Pw(n,e){if(we(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(of(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)rf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function tf(n){sf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(BA(t),r!==t.version))return!0}return!1}function nf(n){if(sf(n),of(n))for(let e=0;e<n.producerNode.length;e++)rf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function rf(n,e){if(UA(n),n.liveConsumerNode.length===1&&$A(n))for(let r=0;r<n.producerNode.length;r++)rf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];sf(i),i.producerIndexOfThis[r]=e}}function of(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function sf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function UA(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function $A(n){return n.producerNode!==void 0}function HA(){throw new Error}var qA=HA;function kw(n){qA=n}function te(n){return typeof n=="function"}function Wi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ju=Wi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Gr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof Ju?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ow(o)}catch(s){e=e??[],s instanceof Ju?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ju(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ow(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Gr(t,e)}remove(e){let{_finalizers:t}=this;t&&Gr(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var af=je.EMPTY;function Xu(n){return n instanceof je||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function Ow(n){te(n)?n():n.unsubscribe()}var Jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ki={setTimeout(n,e,...t){let{delegate:r}=Ki;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ki;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ec(n){Ki.setTimeout(()=>{let{onUnhandledError:e}=Jt;if(e)e(n);else throw n})}function Gs(){}var Fw=uf("C",void 0,void 0);function Lw(n){return uf("E",void 0,n)}function Vw(n){return uf("N",n,void 0)}function uf(n,e,t){return{kind:n,value:e,error:t}}var Wr=null;function Qi(n){if(Jt.useDeprecatedSynchronousErrorHandling){let e=!Wr;if(e&&(Wr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Wr;if(Wr=null,t)throw r}}else n()}function jw(n){Jt.useDeprecatedSynchronousErrorHandling&&Wr&&(Wr.errorThrown=!0,Wr.error=n)}var Kr=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Xu(e)&&e.add(this)):this.destination=WA}static create(e,t,r){return new Fn(e,t,r)}next(e){this.isStopped?lf(Vw(e),this):this._next(e)}error(e){this.isStopped?lf(Lw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lf(Fw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},zA=Function.prototype.bind;function cf(n,e){return zA.call(n,e)}var df=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){tc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){tc(r)}else tc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){tc(t)}}},Fn=class extends Kr{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Jt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cf(e.next,o),error:e.error&&cf(e.error,o),complete:e.complete&&cf(e.complete,o)}):i=e}this.destination=new df(i)}};function tc(n){Jt.useDeprecatedSynchronousErrorHandling?jw(n):ec(n)}function GA(n){throw n}function lf(n,e){let{onStoppedNotification:t}=Jt;t&&Ki.setTimeout(()=>t(n,e))}var WA={closed:!0,next:Gs,error:GA,complete:Gs};var Yi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _t(n){return n}function hf(...n){return ff(n)}function ff(n){return n.length===0?_t:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=QA(t)?t:new Fn(t,r,i);return Qi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Bw(r),new r((i,o)=>{let s=new Fn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Yi](){return this}pipe(...t){return ff(t)(this)}toPromise(t){return t=Bw(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Bw(n){var e;return(e=n??Jt.Promise)!==null&&e!==void 0?e:Promise}function KA(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function QA(n){return n&&n instanceof Kr||KA(n)&&Xu(n)}function pf(n){return te(n?.lift)}function se(n){return e=>{if(pf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new gf(n,e,t,r,i)}var gf=class extends Kr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Zi(){return se((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ji=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,pf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return Zi()(this)}};var Uw=Wi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new nc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Uw}next(t){Qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?af:(this.currentObservers=null,o.push(t),new je(()=>{this.currentObservers=null,Gr(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new nc(e,t),n})(),nc=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:af}};var ot=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ws={now(){return(Ws.delegate||Date).now()},delegate:void 0};var rc=class extends Ue{constructor(e=1/0,t=1/0,r=Ws){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var ic=class extends je{constructor(e,t){super()}schedule(e,t=0){return this}};var Ks={setInterval(n,e,...t){let{delegate:r}=Ks;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Ks;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Xi=class extends ic{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Ks.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Ks.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Gr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var eo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};eo.now=Ws.now;var to=class extends eo{constructor(e,t=eo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Qs=new to(Xi);var oc=class extends Xi{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var sc=class extends to{};var mf=new sc(oc);var wt=new le(n=>n.complete());function $w(n){return n&&te(n.schedule)}function yf(n){return n[n.length-1]}function Hw(n){return te(yf(n))?n.pop():void 0}function fn(n){return $w(yf(n))?n.pop():void 0}function qw(n,e){return typeof yf(n)=="number"?n.pop():e}var ac=n=>n&&typeof n.length=="number"&&typeof n!="function";function uc(n){return te(n?.then)}function cc(n){return te(n[Yi])}function lc(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function dc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hc=YA();function fc(n){return te(n?.[hc])}function pc(n){return Dw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Qu(t.read());if(i)return yield Qu(void 0);yield yield Qu(r)}}finally{t.releaseLock()}})}function gc(n){return te(n?.getReader)}function ke(n){if(n instanceof le)return n;if(n!=null){if(cc(n))return ZA(n);if(ac(n))return JA(n);if(uc(n))return XA(n);if(lc(n))return zw(n);if(fc(n))return ex(n);if(gc(n))return tx(n)}throw dc(n)}function ZA(n){return new le(e=>{let t=n[Yi]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function JA(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function XA(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ec)})}function ex(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function zw(n){return new le(e=>{nx(n,e).catch(t=>e.error(t))})}function tx(n){return zw(pc(n))}function nx(n,e){var t,r,i,o;return Ew(this,void 0,void 0,function*(){try{for(t=Cw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function St(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Vt(n,e=0){return se((t,r)=>{t.subscribe(ue(r,i=>St(r,n,()=>r.next(i),e),()=>St(r,n,()=>r.complete(),e),i=>St(r,n,()=>r.error(i),e)))})}function Xt(n,e=0){return se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Gw(n,e){return ke(n).pipe(Xt(e),Vt(e))}function Ww(n,e){return ke(n).pipe(Xt(e),Vt(e))}function Kw(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Qw(n,e){return new le(t=>{let r;return St(t,e,()=>{r=n[hc](),St(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function mc(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{St(t,e,()=>{let r=n[Symbol.asyncIterator]();St(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Yw(n,e){return mc(pc(n),e)}function Zw(n,e){if(n!=null){if(cc(n))return Gw(n,e);if(ac(n))return Kw(n,e);if(uc(n))return Ww(n,e);if(lc(n))return mc(n,e);if(fc(n))return Qw(n,e);if(gc(n))return Yw(n,e)}throw dc(n)}function Ie(n,e){return e?Zw(n,e):ke(n)}function J(...n){let e=fn(n);return Ie(n,e)}function no(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function vf(n){return!!n&&(n instanceof le||te(n.lift)&&te(n.subscribe))}var Ln=Wi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:rx}=Array;function ix(n,e){return rx(e)?n(...e):n(e)}function Jw(n){return Y(e=>ix(n,e))}var{isArray:ox}=Array,{getPrototypeOf:sx,prototype:ax,keys:ux}=Object;function Xw(n){if(n.length===1){let e=n[0];if(ox(e))return{args:e,keys:null};if(cx(e)){let t=ux(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function cx(n){return n&&typeof n=="object"&&sx(n)===ax}function eI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function yc(...n){let e=fn(n),t=Hw(n),{args:r,keys:i}=Xw(n);if(r.length===0)return Ie([],e);let o=new le(lx(r,e,i?s=>eI(i,s):_t));return t?o.pipe(Jw(t)):o}function lx(n,e,t=_t){return r=>{tI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)tI(e,()=>{let l=Ie(n[c],e),h=!1;l.subscribe(ue(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function tI(n,e,t){n?St(t,n,e):e()}function nI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?b(M):c.push(M),b=M=>{o&&e.next(M),l++;let N=!1;ke(t(M,h++)).subscribe(ue(e,L=>{i?.(L),o?v(L):e.next(L)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let L=c.shift();s?St(e,s,()=>b(L)):b(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(ue(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ze(n,e,t=1/0){return te(e)?Ze((r,i)=>Y((o,s)=>e(r,o,i,s))(ke(n(r,i))),t):(typeof e=="number"&&(t=e),se((r,i)=>nI(r,i,n,t)))}function Ys(n=1/0){return Ze(_t,n)}function rI(){return Ys(1)}function ro(...n){return rI()(Ie(n,fn(n)))}function vc(n){return new le(e=>{ke(n()).subscribe(e)})}function _f(...n){let e=fn(n),t=qw(n,1/0),r=n;return r.length?r.length===1?ke(r[0]):Ys(t)(Ie(r,e)):wt}function pt(n,e){return se((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function cr(n){return se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=ke(n(s,cr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function iI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(ue(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function io(n,e){return te(e)?Ze(n,e,1):Ze(n,1)}function lr(n){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vn(n){return n<=0?()=>wt:se((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function wf(n){return Y(()=>n)}function If(n,e=_t){return n=n??dx,se((t,r)=>{let i,o=!0;t.subscribe(ue(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function dx(n,e){return n===e}function _c(n=hx){return se((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hx(){return new Ln}function Zs(n){return se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function jt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):_t,Vn(1),t?lr(e):_c(()=>new Ln))}function oo(n){return n<=0?()=>wt:se((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ef(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):_t,oo(1),t?lr(e):_c(()=>new Ln))}function Js(){return se((n,e)=>{let t,r=!1;n.subscribe(ue(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Qr(n,e){return se(iI(n,e,arguments.length>=2,!0))}function oI(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},b=()=>{let M=s;v(),M?.unsubscribe()};return se((M,N)=>{l++,!p&&!h&&m();let L=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Df(b,i))}),L.subscribe(N),!s&&l>0&&(s=new Fn({next:$=>L.next($),error:$=>{p=!0,m(),a=Df(v,t,$),L.error($)},complete:()=>{h=!0,m(),a=Df(v,r),L.complete()}}),ke(M).subscribe(s))})(o)}}function Df(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Fn({next:()=>{r.unsubscribe(),n()}});return ke(e(...t)).subscribe(r)}function wc(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,oI({connector:()=>new rc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Yr(...n){let e=fn(n);return se((t,r)=>{(e?ro(n,t,e):ro(n,t)).subscribe(r)})}function $e(n,e){return se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,h=o++;ke(n(c,h)).subscribe(i=ue(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ic(n,e){return te(e)?$e(()=>n,e):$e(()=>n)}function Cf(n){return se((e,t)=>{ke(n).subscribe(ue(t,()=>t.complete(),Gs)),!t.closed&&e.subscribe(t)})}function Je(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):_t}var $I="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(yp(e,t)),this.code=e}};function yp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function da(n){return{toString:n}.toString()}var Ec="__parameters__";function fx(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function HI(n,e,t){return da(()=>{let r=fx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Ec)?c[Ec]:Object.defineProperty(c,Ec,{value:[]})[Ec];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Te(n){for(let e in n)if(n[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function Nt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Nt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function sI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var px=Te({__forward_ref__:Te});function qI(n){return n.__forward_ref__=qI,n.toString=function(){return Nt(this())},n}function Ut(n){return zI(n)?n():n}function zI(n){return typeof n=="function"&&n.hasOwnProperty(px)&&n.__forward_ref__===qI}function Z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Un(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zc(n){return aI(n,WI)||aI(n,KI)}function GI(n){return Zc(n)!==null}function aI(n,e){return n.hasOwnProperty(e)?n[e]:null}function gx(n){let e=n&&(n[WI]||n[KI]);return e||null}function uI(n){return n&&(n.hasOwnProperty(cI)||n.hasOwnProperty(mx))?n[cI]:null}var WI=Te({\u0275prov:Te}),cI=Te({\u0275inj:Te}),KI=Te({ngInjectableDef:Te}),mx=Te({ngInjectorDef:Te}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function QI(n){return n&&!!n.\u0275providers}var yx=Te({\u0275cmp:Te}),vx=Te({\u0275dir:Te}),_x=Te({\u0275pipe:Te}),wx=Te({\u0275mod:Te}),xc=Te({\u0275fac:Te}),ta=Te({__NG_ELEMENT_ID__:Te}),lI=Te({__NG_ENV_ID__:Te});function na(n){return typeof n=="string"?n:n==null?"":String(n)}function Ix(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():na(n)}function Ex(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function vp(n,e){throw new X(-201,!1)}var ae=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ae||{}),Pf;function YI(){return Pf}function Bt(n){let e=Pf;return Pf=n,e}function ZI(n,e,t){let r=Zc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ae.Optional)return null;if(e!==void 0)return e;vp(n,"Injector")}var Dx={},ra=Dx,kf="__NG_DI_FLAG__",Rc="ngTempTokenPath",Cx="ngTokenPath",Tx=/\n/gm,bx="\u0275",dI="__source",co;function Sx(){return co}function dr(n){let e=co;return co=n,e}function Ax(n,e=ae.Default){if(co===void 0)throw new X(-203,!1);return co===null?ZI(n,void 0,e):co.get(n,e&ae.Optional?null:void 0,e)}function B(n,e=ae.Default){return(YI()||Ax)(Ut(n),e)}function U(n,e=ae.Default){return B(n,Jc(e))}function Jc(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Of(n){let e=[];for(let t=0;t<n.length;t++){let r=Ut(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=ae.Default;for(let s=0;s<r.length;s++){let a=r[s],c=xx(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(B(i,o))}else e.push(B(r))}return e}function JI(n,e){return n[kf]=e,n.prototype[kf]=e,n}function xx(n){return n[kf]}function Rx(n,e,t,r){let i=n[Rc];throw e[dI]&&i.unshift(e[dI]),n.message=Mx(`
`+n.message,i,t,r),n[Cx]=i,n[Rc]=null,n}function Mx(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==bx?n.slice(2):n;let i=Nt(e);if(Array.isArray(e))i=e.map(Nt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Nt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Tx,`
  `)}`}var ha=JI(HI("Optional"),8);var XI=JI(HI("SkipSelf"),4);function ho(n,e){let t=n.hasOwnProperty(xc);return t?n[xc]:null}function _p(n,e){n.forEach(t=>Array.isArray(t)?_p(t,e):e(t))}function eE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Mc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ia={},pn=[],fo=new W(""),tE=new W("",-1),nE=new W(""),Nc=class{get(e,t=ra){if(t===ra){let r=new Error(`NullInjectorError: No provider for ${Nt(e)}!`);throw r.name="NullInjectorError",r}return t}},rE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rE||{}),mn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(mn||{}),pr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(pr||{});function Nx(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Ff(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];kx(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function Px(n){return n===3||n===4||n===6}function kx(n){return n.charCodeAt(0)===64}function wp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?hI(n,t,i,null,e[++r]):hI(n,t,i,null,null))}}return n}function hI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var iE="ng-template";function Ox(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Nx(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ip(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ip(n){return n.type===4&&n.value!==iE}function Fx(n,e,t){let r=n.type===4&&!t?iE:n.value;return e===r}function Lx(n,e,t){let r=4,i=n.attrs,o=i!==null?Bx(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!en(r)&&!en(c))return!1;if(s&&en(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!Fx(n,c,t)||c===""&&e.length===1){if(en(r))return!1;s=!0}}else if(r&8){if(i===null||!Ox(n,i,c,t)){if(en(r))return!1;s=!0}}else{let l=e[++a],h=Vx(c,i,Ip(n),t);if(h===-1){if(en(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(en(r))return!1;s=!0}}}}return en(r)||s}function en(n){return(n&1)===0}function Vx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Ux(e,n)}function jx(n,e,t=!1){for(let r=0;r<e.length;r++)if(Lx(n,e[r],t))return!0;return!1}function Bx(n){for(let e=0;e<n.length;e++){let t=n[e];if(Px(t))return e}return n.length}function Ux(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function fI(n,e){return n?":not("+e.trim()+")":e}function $x(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!en(s)&&(e+=fI(o,i),i=""),r=s,o=o||!en(r);t++}return i!==""&&(e+=fI(o,i)),e}function Hx(n){return n.map($x).join(",")}function qx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!en(i))break;i=o}r++}return{attrs:e,classes:t}}function nt(n){return da(()=>{let e=cE(n),t=xe(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||mn.Emulated,styles:n.styles||pn,_:null,schemas:n.schemas||null,tView:null,id:""});lE(t);let r=n.dependencies;return t.directiveDefs=gI(r,!1),t.pipeDefs=gI(r,!0),t.id=Wx(t),t})}function zx(n){return Xr(n)||oE(n)}function Gx(n){return n!==null}function $n(n){return da(()=>({type:n.type,bootstrap:n.bootstrap||pn,declarations:n.declarations||pn,imports:n.imports||pn,exports:n.exports||pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function pI(n,e){if(n==null)return ia;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=pr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==pr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Xc(n){return da(()=>{let e=cE(n);return lE(e),e})}function Xr(n){return n[yx]||null}function oE(n){return n[vx]||null}function sE(n){return n[_x]||null}function aE(n){let e=Xr(n)||oE(n)||sE(n);return e!==null?e.standalone:!1}function uE(n,e){let t=n[wx]||null;if(!t&&e===!0)throw new Error(`Type ${Nt(n)} does not have '\u0275mod' property.`);return t}function cE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ia,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||pn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pI(n.inputs,e),outputs:pI(n.outputs),debugInfo:null}}function lE(n){n.features?.forEach(e=>e(n))}function gI(n,e){if(!n)return null;let t=e?sE:zx;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Gx)}function Wx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ep(n){return{\u0275providers:n}}function Dp(...n){return{\u0275providers:dE(!0,n),\u0275fromNgModule:!0}}function dE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return _p(e,s=>{let a=s;Lf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hE(i,o),t}function hE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Cp(i,o=>{e(o,r)})}}function Lf(n,e,t,r){if(n=Ut(n),!n)return!1;let i=null,o=uI(n),s=!o&&Xr(n);if(!o&&!s){let c=n.ngModule;if(o=uI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Lf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{_p(o.imports,h=>{Lf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&hE(l,e)}if(!a){let l=ho(i)||(()=>new i);e({provide:i,useFactory:l,deps:pn},i),e({provide:nE,useValue:i,multi:!0},i),e({provide:fo,useValue:()=>B(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Cp(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Cp(n,e){for(let t of n)QI(t)&&(t=t.\u0275providers),Array.isArray(t)?Cp(t,e):e(t)}var Kx=Te({provide:String,useValue:Te});function fE(n){return n!==null&&typeof n=="object"&&Kx in n}function Qx(n){return!!(n&&n.useExisting)}function Yx(n){return!!(n&&n.useFactory)}function Vf(n){return typeof n=="function"}var el=new W(""),Cc={},Zx={},Tf;function Tp(){return Tf===void 0&&(Tf=new Nc),Tf}var qt=class{},oa=class extends qt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Bf(e,s=>this.processProvider(s)),this.records.set(tE,so(void 0,this)),i.has("environment")&&this.records.set(qt,so(void 0,this));let o=this.records.get(el);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nE,pn,ae.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=dr(this),r=Bt(void 0),i;try{return e()}finally{dr(t),Bt(r)}}get(e,t=ra,r=ae.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lI))return e[lI](this);r=Jc(r);let i,o=dr(this),s=Bt(void 0);try{if(!(r&ae.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=rR(e)&&Zc(e);l&&this.injectableDefInScope(l)?c=so(jf(e),Cc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ae.Self?Tp():this.parent;return t=r&ae.Optional&&t===ra?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Rc]=a[Rc]||[]).unshift(Nt(e)),o)throw a;return Rx(a,e,"R3InjectorError",this.source)}else throw a}finally{Bt(s),dr(o)}}resolveInjectorInitializers(){let e=we(null),t=dr(this),r=Bt(void 0),i;try{let o=this.get(fo,pn,ae.Self);for(let s of o)s()}finally{dr(t),Bt(r),we(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Nt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Ut(e);let t=Vf(e)?e:Ut(e&&e.provide),r=Xx(e);if(!Vf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=so(void 0,Cc,!0),i.factory=()=>Of(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=we(null);try{return t.value===Cc&&(t.value=Zx,t.value=t.factory()),typeof t.value=="object"&&t.value&&nR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ut(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function jf(n){let e=Zc(n),t=e!==null?e.factory:ho(n);if(t!==null)return t;if(n instanceof W)throw new X(204,!1);if(n instanceof Function)return Jx(n);throw new X(204,!1)}function Jx(n){if(n.length>0)throw new X(204,!1);let t=gx(n);return t!==null?()=>t.factory(n):()=>new n}function Xx(n){if(fE(n))return so(void 0,n.useValue);{let e=eR(n);return so(e,Cc)}}function eR(n,e,t){let r;if(Vf(n)){let i=Ut(n);return ho(i)||jf(i)}else if(fE(n))r=()=>Ut(n.useValue);else if(Yx(n))r=()=>n.useFactory(...Of(n.deps||[]));else if(Qx(n))r=()=>B(Ut(n.useExisting));else{let i=Ut(n&&(n.useClass||n.provide));if(tR(n))r=()=>new i(...Of(n.deps));else return ho(i)||jf(i)}return r}function so(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function tR(n){return!!n.deps}function nR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function rR(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Bf(n,e){for(let t of n)Array.isArray(t)?Bf(t,e):t&&QI(t)?Bf(t.\u0275providers,e):e(t)}function Hn(n,e){n instanceof oa&&n.assertNotDestroyed();let t,r=dr(n),i=Bt(void 0);try{return e()}finally{dr(r),Bt(i)}}function iR(){return YI()!==void 0||Sx()!=null}function oR(n){return typeof n=="function"}var qn=0,de=1,ne=2,Et=3,tn=4,nn=5,Pc=6,mI=7,gr=8,po=9,yn=10,Pt=11,sa=12,yI=13,fa=14,vn=15,go=16,ao=17,mo=18,tl=19,pE=20,fr=21,bf=22,$t=23,mr=25,gE=1;var ei=7,kc=8,Oc=9,Ht=10,Fc=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Fc||{});function Zr(n){return Array.isArray(n)&&typeof n[gE]=="object"}function zn(n){return Array.isArray(n)&&n[gE]===!0}function mE(n){return(n.flags&4)!==0}function nl(n){return n.componentOffset>-1}function yE(n){return(n.flags&1)===1}function pa(n){return!!n.template}function Uf(n){return(n[ne]&512)!==0}var $f=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function vE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function rl(){return _E}function _E(n){return n.type.prototype.ngOnChanges&&(n.setInput=aR),sR}rl.ngInherit=!0;function sR(){let n=IE(this),e=n?.current;if(e){let t=n.previous;if(t===ia)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function aR(n,e,t,r,i){let o=this.declaredInputs[r],s=IE(n)||uR(n,{previous:ia,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new $f(l&&l.currentValue,t,c===ia),vE(n,e,i,t)}var wE="__ngSimpleChanges__";function IE(n){return n[wE]||null}function uR(n,e){return n[wE]=e}var vI=null;var hr=function(n,e,t){vI?.(n,e,t)},cR="svg",lR="math";function jn(n){for(;Array.isArray(n);)n=n[qn];return n}function dR(n,e){return jn(e[n])}function _n(n,e){return jn(e[n.index])}function EE(n,e){return n.data[e]}function wo(n,e){let t=e[n];return Zr(t)?t:t[qn]}function bp(n){return(n[ne]&128)===128}function hR(n){return zn(n[Et])}function Lc(n,e){return e==null?null:n[e]}function DE(n){n[ao]=0}function CE(n){n[ne]&1024||(n[ne]|=1024,bp(n)&&ol(n))}function il(n){return!!(n[ne]&9216||n[$t]?.dirty)}function Hf(n){n[yn].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),il(n)&&ol(n)}function ol(n){n[yn].changeDetectionScheduler?.notify(0);let e=ti(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!bp(e)));)e=ti(e)}function TE(n,e){if((n[ne]&256)===256)throw new X(911,!1);n[fr]===null&&(n[fr]=[]),n[fr].push(e)}function fR(n,e){if(n[fr]===null)return;let t=n[fr].indexOf(e);t!==-1&&n[fr].splice(t,1)}function ti(n){let e=n[Et];return zn(e)?e[Et]:e}var me={lFrame:OE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var bE=!1;function pR(){return me.lFrame.elementDepthCount}function gR(){me.lFrame.elementDepthCount++}function mR(){me.lFrame.elementDepthCount--}function SE(){return me.bindingsEnabled}function yR(){return me.skipHydrationRootTNode!==null}function vR(n){return me.skipHydrationRootTNode===n}function _R(){me.skipHydrationRootTNode=null}function tt(){return me.lFrame.lView}function Io(){return me.lFrame.tView}function wn(){let n=AE();for(;n!==null&&n.type===64;)n=n.parent;return n}function AE(){return me.lFrame.currentTNode}function wR(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ga(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function xE(){return me.lFrame.isParent}function IR(){me.lFrame.isParent=!1}function RE(){return bE}function _I(n){bE=n}function ER(){return me.lFrame.bindingIndex}function DR(n){return me.lFrame.bindingIndex=n}function ME(){return me.lFrame.bindingIndex++}function CR(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TR(){return me.lFrame.inI18n}function bR(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,qf(e)}function SR(){return me.lFrame.currentDirectiveIndex}function qf(n){me.lFrame.currentDirectiveIndex=n}function NE(n){me.lFrame.currentQueryIndex=n}function AR(n){let e=n[de];return e.type===2?e.declTNode:e.type===1?n[nn]:null}function PE(n,e,t){if(t&ae.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ae.Host);)if(i=AR(o),i===null||(o=o[fa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=kE();return r.currentTNode=e,r.lView=n,!0}function Sp(n){let e=kE(),t=n[de];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function kE(){let n=me.lFrame,e=n===null?null:n.child;return e===null?OE(n):e}function OE(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FE(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var LE=FE;function Ap(){let n=FE();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function sl(){return me.lFrame.selectedIndex}function ni(n){me.lFrame.selectedIndex=n}function xR(){let n=me.lFrame;return EE(n.tView,n.selectedIndex)}function RR(){return me.lFrame.currentNamespace}var VE=!0;function xp(){return VE}function Rp(n){VE=n}function MR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=_E(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Mp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Tc(n,e,t){jE(n,e,3,t)}function bc(n,e,t,r){(n[ne]&3)===t&&jE(n,e,t,r)}function Sf(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function jE(n,e,t,r){let i=r!==void 0?n[ao]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ao]+=65536),(a<o||o==-1)&&(NR(n,t,e,c),n[ao]=(n[ao]&4294901760)+c+2),c++}function wI(n,e){hr(4,n,e);let t=we(null);try{e.call(n)}finally{we(t),hr(5,n,e)}}function NR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[ao]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,wI(a,o)):wI(a,o)}var lo=-1,aa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function PR(n){return n instanceof aa}function kR(n){return(n.flags&8)!==0}function OR(n){return(n.flags&16)!==0}var Af={},zf=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Jc(r);let i=this.injector.get(e,Af,r);return i!==Af||t===Af?i:this.parentInjector.get(e,t,r)}};function BE(n){return n!==lo}function Vc(n){return n&32767}function FR(n){return n>>16}function jc(n,e){let t=FR(n),r=e;for(;t>0;)r=r[fa],t--;return r}var Gf=!0;function II(n){let e=Gf;return Gf=n,e}var LR=256,UE=LR-1,$E=5,VR=0,gn={};function jR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ta)&&(r=t[ta]),r==null&&(r=t[ta]=VR++);let i=r&UE,o=1<<i;e.data[n+(i>>$E)]|=o}function HE(n,e){let t=qE(n,e);if(t!==-1)return t;let r=e[de];r.firstCreatePass&&(n.injectorIndex=e.length,xf(r.data,n),xf(e,null),xf(r.blueprint,null));let i=Np(n,e),o=n.injectorIndex;if(BE(i)){let s=Vc(i),a=jc(i,e),c=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function xf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function qE(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Np(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=QE(i),r===null)return lo;if(t++,i=i[fa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return lo}function BR(n,e,t){jR(n,e,t)}function zE(n,e,t){if(t&ae.Optional||n!==void 0)return n;vp(e,"NodeInjector")}function GE(n,e,t,r){if(t&ae.Optional&&r===void 0&&(r=null),!(t&(ae.Self|ae.Host))){let i=n[po],o=Bt(void 0);try{return i?i.get(e,r,t&ae.Optional):ZI(e,r,t&ae.Optional)}finally{Bt(o)}}return zE(r,e,t)}function WE(n,e,t,r=ae.Default,i){if(n!==null){if(e[ne]&2048&&!(r&ae.Self)){let s=zR(n,e,t,r,gn);if(s!==gn)return s}let o=KE(n,e,t,r,gn);if(o!==gn)return o}return GE(e,t,r,i)}function KE(n,e,t,r,i){let o=HR(t);if(typeof o=="function"){if(!PE(e,n,r))return r&ae.Host?zE(i,t,r):GE(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ae.Optional))vp(t);else return s}finally{LE()}}else if(typeof o=="number"){let s=null,a=qE(n,e),c=lo,l=r&ae.Host?e[vn][nn]:null;for((a===-1||r&ae.SkipSelf)&&(c=a===-1?Np(n,e):e[a+8],c===lo||!DI(r,!1)?a=-1:(s=e[de],a=Vc(c),e=jc(c,e)));a!==-1;){let h=e[de];if(EI(o,a,h.data)){let p=UR(a,e,t,s,r,l);if(p!==gn)return p}c=e[a+8],c!==lo&&DI(r,e[de].data[a+8]===l)&&EI(o,a,e)?(s=h,a=Vc(c),e=jc(c,e)):a=-1}}return i}function UR(n,e,t,r,i,o){let s=e[de],a=s.data[n+8],c=r==null?nl(a)&&Gf:r!=s&&(a.type&3)!==0,l=i&ae.Host&&o===a,h=$R(a,s,t,c,l);return h!==null?ua(e,s,h,a):gn}function $R(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(i){let v=s[c];if(v&&pa(v)&&v.type===t)return c}return null}function ua(n,e,t,r){let i=n[t],o=e.data;if(PR(i)){let s=i;s.resolving&&Ex(Ix(o[t]));let a=II(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Bt(s.injectImpl):null,h=PE(n,r,ae.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&MR(t,o[t],e)}finally{l!==null&&Bt(l),II(a),s.resolving=!1,LE()}}return i}function HR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ta)?n[ta]:void 0;return typeof e=="number"?e>=0?e&UE:qR:e}function EI(n,e,t){let r=1<<n;return!!(t[e+(n>>$E)]&r)}function DI(n,e){return!(n&ae.Self)&&!(n&ae.Host&&e)}var Jr=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return WE(this._tNode,this._lView,e,Jc(r),t)}};function qR(){return new Jr(wn(),tt())}function Pp(n){return da(()=>{let e=n.prototype.constructor,t=e[xc]||Wf(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[xc]||Wf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wf(n){return zI(n)?()=>{let e=Wf(Ut(n));return e&&e()}:ho(n)}function zR(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!(s[ne]&512);){let a=KE(o,s,t,r|ae.Self,gn);if(a!==gn)return a;let c=o.parent;if(!c){let l=s[pE];if(l){let h=l.get(t,gn,r);if(h!==gn)return h}c=QE(s),s=s[fa]}o=c}return i}function QE(n){let e=n[de],t=e.type;return t===2?e.declTNode:t===1?n[nn]:null}function CI(n,e=null,t=null,r){let i=YE(n,e,t,r);return i.resolveInjectorInitializers(),i}function YE(n,e=null,t=null,r,i=new Set){let o=[t||pn,Dp(n)];return r=r||(typeof n=="object"?void 0:Nt(n)),new oa(o,e||Tp(),r||null,i)}var ri=class n{static{this.THROW_IF_NOT_FOUND=ra}static{this.NULL=new Nc}static create(e,t){if(Array.isArray(e))return CI({name:""},t,e,"");{let r=e.name??"";return CI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Z({token:n,providedIn:"any",factory:()=>B(tE)})}static{this.__NG_ELEMENT_ID__=-1}};var GR=new W("");GR.__NG_ELEMENT_ID__=n=>{let e=wn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&ae.Optional)return null;throw new X(204,!1)};var WR="ngOriginalError";function Rf(n){return n[WR]}var ZE=!0,JE=(()=>{class n{static{this.__NG_ELEMENT_ID__=KR}static{this.__NG_ENV_ID__=t=>t}}return n})(),Kf=class extends JE{constructor(e){super(),this._lView=e}onDestroy(e){return TE(this._lView,e),()=>fR(this._lView,e)}};function KR(){return new Kf(tt())}var Eo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ot(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Qf=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,iR()&&(this.destroyRef=U(JE,{optional:!0})??void 0,this.pendingTasks=U(Eo,{optional:!0})??void 0)}emit(e){let t=we(null);try{super.next(e)}finally{we(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},It=Qf;function Bc(...n){}function XE(n){let e,t;function r(){n=Bc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function TI(n){return queueMicrotask(()=>n()),()=>{n=Bc}}var kp="isAngularZone",Uc=kp+"_ID",QR=0,Ce=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new It(!1),this.onMicrotaskEmpty=new It(!1),this.onStable=new It(!1),this.onError=new It(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ZE}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,JR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(kp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,YR,Bc,Bc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},YR={};function Op(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ZR(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){XE(()=>{n.callbackScheduled=!1,Yf(n),n.isCheckStableRunning=!0,Op(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Yf(n)}function JR(n){let e=()=>{ZR(n)},t=QR++;n._inner=n._inner.fork({name:"angular",properties:{[kp]:!0,[Uc]:t,[Uc+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(XR(c))return r.invokeTask(o,s,a,c);try{return bI(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),SI(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return bI(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!eM(c)&&e(),SI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Yf(n),Op(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Yf(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function bI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SI(n){n._nesting--,Op(n)}var Zf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new It,this.onMicrotaskEmpty=new It,this.onStable=new It,this.onError=new It}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function XR(n){return eD(n,"__ignore_ng_zone__")}function eM(n){return eD(n,"__scheduler_tick__")}function eD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Bn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Rf(e);for(;t&&Rf(t);)t=Rf(t);return t||null}},tM=new W("",{providedIn:"root",factory:()=>{let n=U(Ce),e=U(Bn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function nM(){return al(wn(),tt())}function al(n,e){return new ul(_n(n,e))}var ul=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=nM}}return n})();function tD(n){return(n.flags&128)===128}var nD=new Map,rM=0;function iM(){return rM++}function oM(n){nD.set(n[tl],n)}function Jf(n){nD.delete(n[tl])}var AI="__ngContext__";function ii(n,e){Zr(e)?(n[AI]=e[tl],oM(e)):n[AI]=e}function rD(n){return oD(n[sa])}function iD(n){return oD(n[tn])}function oD(n){for(;n!==null&&!zn(n);)n=n[tn];return n}var Xf;function sD(n){Xf=n}function sM(){if(Xf!==void 0)return Xf;if(typeof document<"u")return document;throw new X(210,!1)}var Fp=new W("",{providedIn:"root",factory:()=>aM}),aM="ng",Lp=new W(""),zt=new W("",{providedIn:"platform",factory:()=>"unknown"});var Vp=new W("",{providedIn:"root",factory:()=>sM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var uM="h",cM="b";var lM=()=>null;function jp(n,e,t=!1){return lM(n,e,t)}var aD=!1,dM=new W("",{providedIn:"root",factory:()=>aD});var $c=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$I})`}};function Bp(n){return n instanceof $c?n.changingThisBreaksApplicationSecurity:n}function uD(n,e){let t=hM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$I})`)}return t===e}function hM(n){return n instanceof $c&&n.getTypeName()||null}var fM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cD(n){return n=String(n),n.match(fM)?n:"unsafe:"+n}var Up=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Up||{});function cl(n){let e=pM();return e?e.sanitize(Up.URL,n)||"":uD(n,"URL")?Bp(n):cD(na(n))}function pM(){let n=tt();return n&&n[yn].sanitizer}function lD(n){return n instanceof Function?n():n}var si=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(si||{}),gM;function $p(n,e){return gM(n,e)}function uo(n,e,t,r,i){if(r!=null){let o,s=!1;zn(r)?o=r:Zr(r)&&(s=!0,r=r[qn]);let a=jn(r);n===0&&t!==null?i==null?gD(e,t,a):Hc(e,t,a,i||null,!0):n===1&&t!==null?Hc(e,t,a,i||null,!0):n===2?RM(e,a,s):n===3&&e.destroyNode(a),o!=null&&NM(e,n,o,t,i)}}function mM(n,e){return n.createText(e)}function yM(n,e,t){n.setValue(e,t)}function dD(n,e,t){return n.createElement(e,t)}function vM(n,e){hD(n,e),e[qn]=null,e[nn]=null}function _M(n,e,t,r,i,o){r[qn]=i,r[nn]=e,ll(n,r,t,1,i,o)}function hD(n,e){e[yn].changeDetectionScheduler?.notify(9),ll(n,e,e[Pt],2,null,null)}function wM(n){let e=n[sa];if(!e)return Mf(n[de],n);for(;e;){let t=null;if(Zr(e))t=e[sa];else{let r=e[Ht];r&&(t=r)}if(!t){for(;e&&!e[tn]&&e!==n;)Zr(e)&&Mf(e[de],e),e=e[Et];e===null&&(e=n),Zr(e)&&Mf(e[de],e),t=e&&e[tn]}e=t}}function IM(n,e,t,r){let i=Ht+r,o=t.length;r>0&&(t[i-1][tn]=e),r<o-Ht?(e[tn]=t[i],eE(t,Ht+r,e)):(t.push(e),e[tn]=null),e[Et]=t;let s=e[go];s!==null&&t!==s&&fD(s,e);let a=e[mo];a!==null&&a.insertView(n),Hf(e),e[ne]|=128}function fD(n,e){let t=n[Oc],r=e[Et];if(Zr(r))n[ne]|=Fc.HasTransplantedViews;else{let i=r[Et][vn];e[vn]!==i&&(n[ne]|=Fc.HasTransplantedViews)}t===null?n[Oc]=[e]:t.push(e)}function Hp(n,e){let t=n[Oc],r=t.indexOf(e);t.splice(r,1)}function ep(n,e){if(n.length<=Ht)return;let t=Ht+e,r=n[t];if(r){let i=r[go];i!==null&&i!==n&&Hp(i,r),e>0&&(n[t-1][tn]=r[tn]);let o=Mc(n,Ht+e);vM(r[de],r);let s=o[mo];s!==null&&s.detachView(o[de]),r[Et]=null,r[tn]=null,r[ne]&=-129}return r}function pD(n,e){if(!(e[ne]&256)){let t=e[Pt];t.destroyNode&&ll(n,e,t,3,null,null),wM(e)}}function Mf(n,e){if(e[ne]&256)return;let t=we(null);try{e[ne]&=-129,e[ne]|=256,e[$t]&&nf(e[$t]),DM(n,e),EM(n,e),e[de].type===1&&e[Pt].destroy();let r=e[go];if(r!==null&&zn(e[Et])){r!==e[Et]&&Hp(r,e);let i=e[mo];i!==null&&i.detachView(n)}Jf(e)}finally{we(t)}}function EM(n,e){let t=n.cleanup,r=e[mI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[mI]=null);let i=e[fr];if(i!==null){e[fr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function DM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof aa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];hr(4,a,c);try{c.call(a)}finally{hr(5,a,c)}}else{hr(4,i,o);try{o.call(i)}finally{hr(5,i,o)}}}}}function CM(n,e,t){return TM(n,e.parent,t)}function TM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[qn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===mn.None||o===mn.Emulated)return null}return _n(r,t)}}function Hc(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gD(n,e,t){n.appendChild(e,t)}function xI(n,e,t,r,i){r!==null?Hc(n,e,t,r,i):gD(n,e,t)}function mD(n,e){return n.parentNode(e)}function bM(n,e){return n.nextSibling(e)}function SM(n,e,t){return xM(n,e,t)}function AM(n,e,t){return n.type&40?_n(n,t):null}var xM=AM,RI;function qp(n,e,t,r){let i=CM(n,r,e),o=e[Pt],s=r.parent||e[nn],a=SM(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)xI(o,i,t[c],a,!1);else xI(o,i,t,a,!1);RI!==void 0&&RI(o,r,e,t,i)}function Xs(n,e){if(e!==null){let t=e.type;if(t&3)return _n(e,n);if(t&4)return tp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Xs(n,r);{let i=n[e.index];return zn(i)?tp(-1,i):jn(i)}}else{if(t&128)return Xs(n,e.next);if(t&32)return $p(e,n)()||jn(n[e.index]);{let r=yD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ti(n[vn]);return Xs(i,r)}else return Xs(n,e.next)}}}return null}function yD(n,e){if(e!==null){let r=n[vn][nn],i=e.projection;return r.projection[i]}return null}function tp(n,e){let t=Ht+n+1;if(t<e.length){let r=e[t],i=r[de].firstChild;if(i!==null)return Xs(r,i)}return e[ei]}function RM(n,e,t){n.removeChild(null,e,t)}function zp(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ii(jn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)zp(n,e,t.child,r,i,o,!1),uo(e,n,i,a,o);else if(c&32){let l=$p(t,r),h;for(;h=l();)uo(e,n,i,h,o);uo(e,n,i,a,o)}else c&16?MM(n,e,r,t,i,o):uo(e,n,i,a,o);t=s?t.projectionNext:t.next}}function ll(n,e,t,r,i,o){zp(t,r,n.firstChild,e,i,o,!1)}function MM(n,e,t,r,i,o){let s=t[vn],c=s[nn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];uo(e,n,i,h,o)}else{let l=c,h=s[Et];tD(r)&&(l.flags|=128),zp(n,e,l,h,i,o,!0)}}function NM(n,e,t,r,i){let o=t[ei],s=jn(t);o!==s&&uo(e,n,r,o,i);for(let a=Ht;a<t.length;a++){let c=t[a];ll(c[de],c,n,e,r,o)}}function PM(n,e,t){n.setAttribute(e,"style",t)}function vD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function _D(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Ff(n,e,r),i!==null&&vD(n,e,i),o!==null&&PM(n,e,o)}var Do={};function At(n=1){wD(Io(),tt(),sl()+n,!1)}function wD(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Tc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&bc(e,o,0,t)}ni(t)}function In(n,e=ae.Default){let t=tt();if(t===null)return B(n,e);let r=wn();return WE(r,t,Ut(n),e)}function ID(n,e,t,r,i,o){let s=we(null);try{let a=null;i&pr.SignalBased&&(a=e[r][Mw]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&pr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):vE(e,a,r,o)}finally{we(s)}}function kM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ni(~i);else{let o=i,s=t[++r],a=t[++r];bR(s,o);let c=e[o];a(2,c)}}}finally{ni(-1)}}function dl(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[qn]=i,p[ne]=r|4|128|8|64,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),DE(p),p[Et]=p[fa]=n,p[gr]=t,p[yn]=s||n&&n[yn],p[Pt]=a||n&&n[Pt],p[po]=c||n&&n[po]||null,p[nn]=o,p[tl]=iM(),p[Pc]=h,p[pE]=l,p[vn]=e.type==2?n[vn]:p,p}function hl(n,e,t,r,i){let o=n.data[e];if(o===null)o=OM(n,e,t,r,i),TR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=wR();o.injectorIndex=s===null?-1:s.injectorIndex}return ga(o,!0),o}function OM(n,e,t,r,i){let o=AE(),s=xE(),a=s?o:o&&o.parent,c=n.data[e]=BM(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function ED(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function DD(n,e,t,r,i){let o=sl(),s=r&2;try{ni(-1),s&&e.length>mr&&wD(n,e,mr,!1),hr(s?2:0,i),t(r,i)}finally{ni(o),hr(s?3:1,i)}}function CD(n,e,t){if(mE(e)){let r=we(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{we(r)}}}function TD(n,e,t){SE()&&(WM(n,e,t,_n(t,e)),(t.flags&64)===64&&RD(n,e,t))}function bD(n,e,t=_n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function SD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Gp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Gp(n,e,t,r,i,o,s,a,c,l,h){let p=mr+r,m=p+i,v=FM(p,m),b=typeof l=="function"?l():l;return v[de]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:h}}function FM(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Do);return t}function LM(n,e,t,r){let o=r.get(dM,aD)||t===mn.ShadowDom,s=n.selectRootElement(e,o);return VM(s),s}function VM(n){jM(n)}var jM=()=>null;function BM(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function MI(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=pr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?NI(r,t,l,a,c):NI(r,t,l,a)}return r}function NI(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function UM(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;c=MI(0,p.inputs,h,c,v),l=MI(1,p.outputs,h,l,b);let M=c!==null&&s!==null&&!Ip(e)?nN(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function $M(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HM(n,e,t,r,i,o,s,a){let c=_n(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Wp(n,t,h,r,i),nl(e)&&qM(t,e.index)):e.type&3?(r=$M(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function qM(n,e){let t=wo(e,n);t[ne]&16||(t[ne]|=64)}function AD(n,e,t,r){if(SE()){let i=r===null?null:{"":-1},o=QM(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&xD(n,e,t,s,i,a),i&&YM(t,r,i)}t.mergedAttrs=wp(t.mergedAttrs,t.attrs)}function xD(n,e,t,r,i,o){for(let l=0;l<r.length;l++)BR(HE(t,e),n,r[l].type);JM(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=ED(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=wp(t.mergedAttrs,h.hostAttrs),XM(n,t,e,c,h),ZM(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}UM(n,t,o)}function zM(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;GM(s)!=a&&s.push(a),s.push(t,r,o)}}function GM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function WM(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;nl(t)&&eN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||HE(t,e),ii(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=ua(e,n,a,t);if(ii(l,e),s!==null&&tN(e,a-i,l,c,t,s),pa(c)){let h=wo(t.index,e);h[gr]=ua(e,n,a,t)}}}function RD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=SR();try{ni(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];qf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&KM(c,l)}}finally{ni(-1),qf(s)}}function KM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QM(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(jx(e,s.selectors,!1))if(r||(r=[]),pa(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;np(n,e,c)}else r.unshift(s),np(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function np(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function YM(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function ZM(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;pa(e)&&(t[""]=n)}}function JM(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function XM(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ho(i.type,!0)),s=new aa(o,pa(i),In);n.blueprint[r]=s,t[r]=s,zM(n,e,r,ED(n,t,i.hostVars,Do),i)}function eN(n,e,t){let r=_n(e,n),i=SD(t),o=n[yn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=fl(n,dl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function tN(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];ID(r,t,c,l,h,p)}}function nN(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function MD(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ND(n,e){let t=n.contentQueries;if(t!==null){let r=we(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];NE(o),a.contentQueries(2,e[s],s)}}}finally{we(r)}}}function fl(n,e){return n[sa]?n[yI][tn]=e:n[sa]=e,n[yI]=e,e}function rp(n,e,t){NE(0);let r=we(null);try{e(n,t)}finally{we(r)}}function rN(n,e){let t=n[po],r=t?t.get(Bn,null):null;r&&r.handleError(e)}function Wp(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];ID(h,l,r,a,c,i)}}function PD(n,e,t){let r=dR(e,n);yM(n[Pt],r,t)}function iN(n,e){let t=wo(e,n),r=t[de];oN(r,t);let i=t[qn];i!==null&&t[Pc]===null&&(t[Pc]=jp(i,t[po])),Kp(r,t,t[gr])}function oN(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Kp(n,e,t){Sp(e);try{let r=n.viewQuery;r!==null&&rp(1,r,t);let i=n.template;i!==null&&DD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[mo]?.finishViewCreation(n),n.staticContentQueries&&ND(n,e),n.staticViewQueries&&rp(2,n.viewQuery,t);let o=n.components;o!==null&&sN(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,Ap()}}function sN(n,e){for(let t=0;t<e.length;t++)iN(n,e[t])}function aN(n,e,t,r){let i=we(null);try{let o=e.tView,a=n[ne]&4096?4096:16,c=dl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[go]=l;let h=n[mo];return h!==null&&(c[mo]=h.createEmbeddedView(o)),Kp(o,c,t),c}finally{we(i)}}function PI(n,e){return!e||e.firstChild===null||tD(n)}function uN(n,e,t,r=!0){let i=e[de];if(IM(i,e,n,t),r){let s=tp(t,n),a=e[Pt],c=mD(a,n[ei]);c!==null&&_M(i,n[nn],a,e,c,s)}let o=e[Pc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function qc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(jn(o)),zn(o)&&cN(o,r);let s=t.type;if(s&8)qc(n,e,t.child,r);else if(s&32){let a=$p(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=yD(e,t);if(Array.isArray(a))r.push(...a);else{let c=ti(e[vn]);qc(c[de],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function cN(n,e){for(let t=Ht;t<n.length;t++){let r=n[t],i=r[de].firstChild;i!==null&&qc(r[de],r,i,e)}n[ei]!==n[qn]&&e.push(n[ei])}var kD=[];function lN(n){return n[$t]??dN(n)}function dN(n){let e=kD.pop()??Object.create(fN);return e.lView=n,e}function hN(n){n.lView[$t]!==n&&(n.lView=null,kD.push(n))}var fN=xe(q({},Xh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ol(n.lView)},consumerOnSignalRead(){this.lView[$t]=this}});function pN(n){let e=n[$t]??Object.create(gN);return e.lView=n,e}var gN=xe(q({},Xh),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ti(n.lView);for(;e&&!OD(e[de]);)e=ti(e);e&&CE(e)},consumerOnSignalRead(){this.lView[$t]=this}});function OD(n){return n.type!==2}var mN=100;function FD(n,e=!0,t=0){let r=n[yn],i=r.rendererFactory,o=!1;o||i.begin?.();try{yN(n,t)}catch(s){throw e&&rN(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function yN(n,e){let t=RE();try{_I(!0),ip(n,e);let r=0;for(;il(n);){if(r===mN)throw new X(103,!1);r++,ip(n,1)}}finally{_I(t)}}function vN(n,e,t,r){let i=e[ne];if((i&256)===256)return;let o=!1,s=!1;!o&&e[yn].inlineEffectRunner?.flush(),Sp(e);let a=!0,c=null,l=null;o||(OD(n)?(l=lN(e),c=ef(l)):Nw()===null?(a=!1,l=pN(e),c=ef(l)):e[$t]&&(nf(e[$t]),e[$t]=null));try{DE(e),DR(n.bindingStartIndex),t!==null&&DD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Tc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&bc(e,v,0,null),Sf(e,0)}if(s||_N(e),LD(e,0),n.contentQueries!==null&&ND(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Tc(e,v)}else{let v=n.contentHooks;v!==null&&bc(e,v,1),Sf(e,1)}kM(n,e);let p=n.components;p!==null&&jD(e,p,0);let m=n.viewQuery;if(m!==null&&rp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Tc(e,v)}else{let v=n.viewHooks;v!==null&&bc(e,v,2),Sf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[bf]){for(let v of e[bf])v();e[bf]=null}o||(e[ne]&=-73)}catch(h){throw o||ol(e),h}finally{l!==null&&(Pw(l,c),a&&hN(l)),Ap()}}function LD(n,e){for(let t=rD(n);t!==null;t=iD(t))for(let r=Ht;r<t.length;r++){let i=t[r];VD(i,e)}}function _N(n){for(let e=rD(n);e!==null;e=iD(e)){if(!(e[ne]&Fc.HasTransplantedViews))continue;let t=e[Oc];for(let r=0;r<t.length;r++){let i=t[r];CE(i)}}}function wN(n,e,t){let r=wo(e,n);VD(r,t)}function VD(n,e){bp(n)&&ip(n,e)}function ip(n,e){let r=n[de],i=n[ne],o=n[$t],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&tf(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)vN(r,n,r.template,n[gr]);else if(i&8192){LD(n,1);let a=r.components;a!==null&&jD(n,a,1)}}function jD(n,e,t){for(let r=0;r<e.length;r++)wN(n,e[r],t)}function BD(n,e){let t=RE()?64:1088;for(n[yn].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ti(n);if(Uf(n)&&!r)return n;n=r}return null}var oi=class{get rootNodes(){let e=this._lView,t=e[de];return qc(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gr]}set context(e){this._lView[gr]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Et];if(zn(e)){let t=e[kc],r=t?t.indexOf(this):-1;r>-1&&(ep(e,r),Mc(t,r))}this._attachedToViewContainer=!1}pD(this._lView[de],this._lView)}onDestroy(e){TE(this._lView,e)}markForCheck(){BD(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Hf(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,FD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Uf(this._lView),t=this._lView[go];t!==null&&!e&&Hp(t,this._lView),hD(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=Uf(this._lView),r=this._lView[go];r!==null&&!t&&fD(r,this._lView),Hf(this._lView)}},Qp=(()=>{class n{static{this.__NG_ELEMENT_ID__=DN}}return n})(),IN=Qp,EN=class extends IN{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=aN(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new oi(i)}};function DN(){return CN(wn(),tt())}function CN(n,e){return n.type&4?new EN(e,n,al(n,e)):null}var LH=new RegExp(`^(\\d+)*(${cM}|${uM})*(.*)`);var TN=()=>null;function kI(n,e){return TN(n,e)}var yo=class{},Yp=new W("",{providedIn:"root",factory:()=>!1});var UD=new W(""),$D=new W(""),op=class{},zc=class{};function bN(n){let e=Error(`No component factory found for ${Nt(n)}.`);return e[SN]=n,e}var SN="ngComponent";var sp=class{resolveComponentFactory(e){throw bN(e)}},vo=class{static{this.NULL=new sp}},_o=class{};var AN=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>null})}}return n})();function ap(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=sI(i,a);else if(o==2){let c=a,l=e[++s];r=sI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Gc=class extends vo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Xr(e);return new ca(t,this.ngModule)}};function OI(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:pr.None;e?t.push({propName:s,templateName:r,isSignal:(a&pr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function xN(n){let e=n.toLowerCase();return e==="svg"?cR:e==="math"?lR:null}var ca=class extends zc{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=OI(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return OI(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Hx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=we(null);try{i=i||this.ngModule;let s=i instanceof qt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new zf(e,s):e,c=a.get(_o,null);if(c===null)throw new X(407,!1);let l=a.get(AN,null),h=a.get(yo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?LM(m,r,this.componentDef.encapsulation,a):dD(m,v,xN(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;b!==null&&(N=jp(b,a,!0));let L=Gp(0,null,null,1,0,null,null,null,null,null,null),$=dl(null,L,null,M,null,null,p,m,a,null,N);Sp($);let O,K,ee=null;try{let Q=this.componentDef,I,y=null;Q.findHostDirectiveDefs?(I=[],y=new Map,Q.findHostDirectiveDefs(Q,I,y),I.push(Q)):I=[Q];let w=RN($,b);ee=MN(w,b,Q,I,$,p,m),K=EE(L,mr),b&&kN(m,Q,b,r),t!==void 0&&ON(K,this.ngContentSelectors,t),O=PN(ee,Q,I,y,$,[FN]),Kp(L,$,null)}catch(Q){throw ee!==null&&Jf(ee),Jf($),Q}finally{Ap()}return new up(this.componentType,O,al(K,$),$,K)}finally{we(o)}}},up=class extends op{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new oi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Wp(o[de],o,i,e,t),this.previousInputValues.set(e,t);let s=wo(this._tNode.index,o);BD(s,1)}}get injector(){return new Jr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RN(n,e){let t=n[de],r=mr;return n[r]=e,hl(t,r,2,"#host",null)}function MN(n,e,t,r,i,o,s){let a=i[de];NN(r,n,e,s);let c=null;e!==null&&(c=jp(e,i[po]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=dl(i,SD(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&np(a,n,r.length-1),fl(i,p),i[n.index]=p}function NN(n,e,t,r){for(let i of n)e.mergedAttrs=wp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ap(e,e.mergedAttrs,!0),t!==null&&_D(r,t,e))}function PN(n,e,t,r,i,o){let s=wn(),a=i[de],c=_n(s,i);xD(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=ua(i,a,p,s);ii(m,i)}RD(a,i,s),c&&ii(c,i);let l=ua(i,a,s.directiveStart+s.componentOffset,s);if(n[gr]=i[gr]=l,o!==null)for(let h of o)h(l,e);return CD(a,s,i),l}function kN(n,e,t,r){if(r)Ff(n,t,["ng-version","18.2.14"]);else{let{attrs:i,classes:o}=qx(e.selectors[0]);i&&Ff(n,t,i),o&&o.length>0&&vD(n,t,o.join(" "))}}function ON(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function FN(){let n=wn();Mp(tt()[de],n)}var ma=(()=>{class n{static{this.__NG_ELEMENT_ID__=LN}}return n})();function LN(){let n=wn();return jN(n,tt())}var VN=ma,HD=class extends VN{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return al(this._hostTNode,this._hostLView)}get injector(){return new Jr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Np(this._hostTNode,this._hostLView);if(BE(e)){let t=jc(e,this._hostLView),r=Vc(e),i=t[de].data[r+8];return new Jr(i,t)}else return new Jr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=FI(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ht}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=kI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,PI(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!oR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?e:new ca(Xr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(qt,null);M&&(o=M)}let h=Xr(c.componentType??{}),p=kI(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,PI(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Et],l=new HD(c,c[nn],c[Et]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return uN(s,i,o,r),e.attachToViewContainerRef(),eE(Nf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=FI(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ep(this._lContainer,t);r&&(Mc(Nf(this._lContainer),t),pD(r[de],r))}detach(e){let t=this._adjustIndex(e,-1),r=ep(this._lContainer,t);return r&&Mc(Nf(this._lContainer),t)!=null?new oi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function FI(n){return n[kc]}function Nf(n){return n[kc]||(n[kc]=[])}function jN(n,e){let t,r=e[n.index];return zn(r)?t=r:(t=MD(r,e,null,n),e[n.index]=t,fl(e,t)),UN(t,e,n,r),new HD(t,n,e)}function BN(n,e){let t=n[Pt],r=t.createComment(""),i=_n(e,n),o=mD(t,i);return Hc(t,o,r,bM(t,i),!1),r}var UN=qN,$N=()=>!1;function HN(n,e,t){return $N(n,e,t)}function qN(n,e,t,r){if(n[ei])return;let i;t.type&8?i=jn(r):i=BN(e,t),n[ei]=i}var LI=new Set;function qD(n){LI.has(n)||(LI.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var yr=class{},la=class{};var cp=class extends yr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gc(this);let o=uE(e);this._bootstrapComponents=lD(o.bootstrap),this._r3Injector=YE(e,t,[{provide:yr,useValue:this},{provide:vo,useValue:this.componentFactoryResolver},...r],Nt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},lp=class extends la{constructor(e){super(),this.moduleType=e}create(e){return new cp(this.moduleType,e,[])}};var Wc=class extends yr{constructor(e){super(),this.componentFactoryResolver=new Gc(this),this.instance=null;let t=new oa([...e.providers,{provide:yr,useValue:this},{provide:vo,useValue:this.componentFactoryResolver}],e.parent||Tp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zp(n,e,t=null){return new Wc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function zD(n){return GN(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function zN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function GN(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Kc(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function WN(n,e,t,r){let i=Kc(n,e,t);return Kc(n,e+1,r)||i}function KN(n){return(n.flags&32)===32}function QN(n,e,t,r,i,o,s,a,c){let l=e.consts,h=hl(e,n,4,s||null,a||null);AD(e,t,h,Lc(l,c)),Mp(e,h);let p=h.tView=Gp(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function YN(n,e,t,r,i,o,s,a,c,l){let h=t+mr,p=e.firstCreatePass?QN(h,e,n,r,i,o,s,a,c):e.data[h];ga(p,!1);let m=ZN(e,n,p,t);xp()&&qp(e,n,m,p),ii(m,n);let v=MD(m,n,m,p);return n[h]=v,fl(n,v),HN(v,p,n),yE(p)&&TD(e,n,p),c!=null&&bD(n,p,l),p}function Jp(n,e,t,r,i,o,s,a){let c=tt(),l=Io(),h=Lc(l.consts,o);return YN(c,l,n,e,t,r,i,h,s,a),Jp}var ZN=JN;function JN(n,e,t,r){return Rp(!0),e[Pt].createComment("")}var ea=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ea||{}),XN=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),VI=class n{constructor(){this.ngZone=U(Ce),this.scheduler=U(yo),this.errorHandler=U(Bn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ea.EarlyRead,ea.Write,ea.MixedReadWrite,ea.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Z({token:n,providedIn:"root",factory:()=>new n})}};function eP(n,e,t,r){return Kc(n,ME(),t)?e+na(t)+r:Do}function tP(n,e,t,r,i,o){let s=ER(),a=WN(n,s,t,i);return CR(2),a?e+na(t)+r+na(i)+o:Do}function ai(n,e,t){let r=tt(),i=ME();if(Kc(r,i,e)){let o=Io(),s=xR();HM(o,s,r,n,e,r[Pt],t,!1)}return ai}function jI(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Wp(n,t,o[s],s,r)}function nP(n,e,t,r,i,o){let s=e.consts,a=Lc(s,i),c=hl(e,n,2,r,a);return AD(e,t,c,Lc(s,o)),c.attrs!==null&&ap(c,c.attrs,!1),c.mergedAttrs!==null&&ap(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ye(n,e,t,r){let i=tt(),o=Io(),s=mr+n,a=i[Pt],c=o.firstCreatePass?nP(s,o,i,e,t,r):o.data[s],l=rP(o,i,c,a,e,n);i[s]=l;let h=yE(c);return ga(c,!0),_D(a,l,c),!KN(c)&&xp()&&qp(o,i,l,c),pR()===0&&ii(l,i),gR(),h&&(TD(o,i,c),CD(o,c,i)),r!==null&&bD(i,c),ye}function ve(){let n=wn();xE()?IR():(n=n.parent,ga(n,!1));let e=n;vR(e)&&_R(),mR();let t=Io();return t.firstCreatePass&&(Mp(t,n),mE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&kR(e)&&jI(t,e,tt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&OR(e)&&jI(t,e,tt(),e.stylesWithoutHost,!1),ve}function Re(n,e,t,r){return ye(n,e,t,r),ve(),Re}var rP=(n,e,t,r,i,o)=>(Rp(!0),dD(r,i,RR()));var Qc="en-US";var iP=Qc;function oP(n){typeof n=="string"&&(iP=n.toLowerCase().replace(/_/g,"-"))}function Oe(n,e=""){let t=tt(),r=Io(),i=n+mr,o=r.firstCreatePass?hl(r,i,1,e,null):r.data[i],s=sP(r,t,o,e,n);t[i]=s,xp()&&qp(r,t,s,o),ga(o,!1)}var sP=(n,e,t,r,i)=>(Rp(!0),mM(e[Pt],r));function rn(n,e,t){let r=tt(),i=eP(r,n,e,t);return i!==Do&&PD(r,sl(),i),rn}function Xp(n,e,t,r,i){let o=tt(),s=tP(o,n,e,t,r,i);return s!==Do&&PD(o,sl(),s),Xp}var aP=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=dE(!1,t.type),i=r.length>0?Zp([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Z({token:n,providedIn:"environment",factory:()=>new n(B(qt))})}}return n})();function rt(n){qD("NgStandalone"),n.getStandaloneInjector=e=>e.get(aP).getOrCreateStandaloneInjector(n)}var vr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},GD=new vr("18.2.14");var pl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var WD=new W("");function ya(n){return!!n&&typeof n.then=="function"}function KD(n){return!!n&&typeof n.subscribe=="function"}var QD=new W(""),YD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=U(QD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ya(o))t.push(o);else if(KD(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eg=new W("");function uP(){kw(()=>{throw new X(600,!1)})}function cP(n){return n.isBoundToModule}var lP=10;function dP(n,e,t){try{let r=t();return ya(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ui=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(tM),this.afterRenderManager=U(XN),this.zonelessEnabled=U(Yp),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=U(Eo).hasPendingTasks.pipe(Y(t=>!t)),this._injector=U(qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof zc;if(!this._injector.get(YD).done){let m=!i&&aE(t),v=!1;throw new X(405,v)}let s;i?s=t:s=this._injector.get(vo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=cP(s)?void 0:this._injector.get(yr),c=r||s.selector,l=s.create(ri.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(WD,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Sc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=we(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,we(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(_o,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<lP;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)hP(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>il(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Sc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(eg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Sc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hP(n,e,t,r){if(!t&&!il(n))return;FD(n,e,t&&!r?0:1)}var dp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tg=(()=>{class n{compileModuleSync(t){return new lp(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=uE(t),o=lD(i.declarations).reduce((s,a)=>{let c=Xr(a);return c&&s.push(new ca(c)),s},[]);return new dp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fP=(()=>{class n{constructor(){this.zone=U(Ce),this.changeDetectionScheduler=U(yo),this.applicationRef=U(ui)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pP({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(xe(q({},gP()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:fo,multi:!0,useFactory:()=>{let r=U(fP,{optional:!0});return()=>r.initialize()}},{provide:fo,multi:!0,useFactory:()=>{let r=U(mP);return()=>{r.initialize()}}},e===!0?{provide:UD,useValue:!0}:[],{provide:$D,useValue:t??ZE}]}function gP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var mP=(()=>{class n{constructor(){this.subscription=new je,this.initialized=!1,this.zone=U(Ce),this.pendingTasks=U(Eo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var yP=(()=>{class n{constructor(){this.appRef=U(ui),this.taskService=U(Eo),this.ngZone=U(Ce),this.zonelessEnabled=U(Yp),this.disableScheduling=U(UD,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new je,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Uc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U($D,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Zf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?TI:XE;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Uc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vP(){return typeof $localize<"u"&&$localize.locale||Qc}var ng=new W("",{providedIn:"root",factory:()=>U(ng,ae.Optional|ae.SkipSelf)||vP()});var hp=new W("");function Dc(n){return!n.moduleRef}function _P(n){let e=Dc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{Dc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Bn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Dc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(hp);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(hp);s.add(o),n.moduleRef.onDestroy(()=>{Sc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return dP(r,t,()=>{let o=e.get(YD);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ng,Qc);if(oP(s||Qc),Dc(n)){let a=e.get(ui);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return wP(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function wP(n,e){let t=n.injector.get(ui);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var Ac=null,ZD=new W("");function IP(n=[],e){return ri.create({name:e,providers:[{provide:el,useValue:"platform"},{provide:hp,useValue:new Set([()=>Ac=null])},...n]})}function EP(n=[]){if(Ac)return Ac;let e=IP(n);return e.get(ZD,!1)||(Ac=e),uP(),DP(e),e}function DP(n){n.get(Lp,null)?.forEach(t=>t())}function rg(){return!1}var va=(()=>{class n{static{this.__NG_ELEMENT_ID__=CP}}return n})();function CP(n){return TP(wn(),tt(),(n&16)===16)}function TP(n,e,t){if(nl(n)&&!t){let r=wo(n.index,e);return new oi(r,r)}else if(n.type&175){let r=e[vn];return new oi(r,e)}return null}var fp=class{constructor(){}supports(e){return zD(e)}create(e){return new pp(e)}},bP=(n,e)=>e,pp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bP}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<BI(r,i,o)?t:r,a=BI(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!zD(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,zN(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new gp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Yc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Yc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},gp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},mp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Yc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new mp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function BI(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function UI(){return new ig([new fp])}var ig=(()=>{class n{static{this.\u0275prov=Z({token:n,providedIn:"root",factory:UI})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||UI()),deps:[[n,new XI,new ha]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();function JD(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;try{let o=i?.injector??EP(r);if(o.get(ZD,!1)===!0&&!n.platformRef)throw new X(401,!1);let s=[pP({}),{provide:yo,useExisting:yP},...t||[]],a=new Wc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return _P({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}}var rC=null;function Co(){return rC}function iC(n){rC??=n}var gl=class{};var Gt=new W(""),oC=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>U(RP),providedIn:"platform"})}}return n})();var RP=(()=>{class n extends oC{constructor(){super(),this._doc=U(Gt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Co().getBaseHref(this._doc)}onPopState(t){let r=Co().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Co().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function sC(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function XD(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ci(n){return n&&n[0]!=="?"?"?"+n:n}var yl=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>U(aC),providedIn:"root"})}}return n})(),MP=new W(""),aC=(()=>{class n extends yl{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??U(Gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return sC(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+ci(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+ci(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+ci(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(B(oC),B(MP,8))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _a=(()=>{class n{constructor(t){this._subject=new It,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=kP(XD(eC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ci(r))}normalize(t){return n.stripTrailingSlash(PP(this._basePath,eC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ci(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ci(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=ci}static{this.joinWithSlash=sC}static{this.stripTrailingSlash=XD}static{this.\u0275fac=function(r){return new(r||n)(B(yl))}}static{this.\u0275prov=Z({token:n,factory:()=>NP(),providedIn:"root"})}}return n})();function NP(){return new _a(B(yl))}function PP(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function eC(n){return n.replace(/\/index.html$/,"")}function kP(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function uC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var og=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},cC=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new og(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),tC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);tC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(In(ma),In(Qp),In(ig))}}static{this.\u0275dir=Xc({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function tC(n,e){n.context.$implicit=e.item}var sg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=$n({type:n})}static{this.\u0275inj=Un({})}}return n})(),lC="browser",OP="server";function li(n){return n===OP}var ml=class{};var cg=class extends gl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lg=class n extends cg{static makeCurrent(){iC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=LP();return t==null?null:VP(t)}resetBaseElement(){wa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uC(document.cookie,e)}},wa=null;function LP(){return wa=wa||document.querySelector("base"),wa?wa.getAttribute("href"):null}function VP(n){return new URL(n,document.baseURI).pathname}var jP=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),dg=new W(""),pC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(B(dg),B(Ce))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),vl=class{constructor(e){this._doc=e}},ag="ng-app-id",gC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=li(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ag}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(ag),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ag,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(B(Gt),B(Fp),B(Vp,8),B(zt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),ug={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fg=/%COMP%/g,mC="%COMP%",BP=`_nghost-${mC}`,UP=`_ngcontent-${mC}`,$P=!0,HP=new W("",{providedIn:"root",factory:()=>$P});function qP(n){return UP.replace(fg,n)}function zP(n){return BP.replace(fg,n)}function yC(n,e){return e.map(t=>t.replace(fg,n))}var dC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=li(a),this.defaultRenderer=new Ia(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mn.ShadowDom&&(r=xe(q({},r),{encapsulation:mn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof _l?i.applyToHost(t):i instanceof Ea&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case mn.Emulated:o=new _l(c,l,r,this.appId,h,s,a,p);break;case mn.ShadowDom:return new hg(c,l,t,r,s,a,this.nonce,p);default:o=new Ea(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(B(pC),B(gC),B(Fp),B(HP),B(Gt),B(zt),B(Ce),B(Vp))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),Ia=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(ug[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(hC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=ug[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=ug[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(si.DashCase|si.Important)?e.style.setProperty(t,r,i&si.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&si.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Co().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function hC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hg=class extends Ia{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=yC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ea=class extends Ia{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?yC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_l=class extends Ea{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=qP(l),this.hostAttr=zP(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},GP=(()=>{class n extends vl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(B(Gt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})(),fC=["alt","control","meta","shift"],WP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KP={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},QP=(()=>{class n extends vl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Co().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),fC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=WP[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),fC.forEach(s=>{if(s!==i){let a=KP[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(B(Gt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac})}}return n})();function vC(n,e,t){return JD(q({rootComponent:n,platformRef:t?.platformRef},YP(e)))}function YP(n){return{appProviders:[...tk,...n?.providers??[]],platformProviders:ek}}function ZP(){lg.makeCurrent()}function JP(){return new Bn}function XP(){return sD(document),document}var ek=[{provide:zt,useValue:lC},{provide:Lp,useValue:ZP,multi:!0},{provide:Gt,useFactory:XP,deps:[]}];var tk=[{provide:el,useValue:"root"},{provide:Bn,useFactory:JP,deps:[]},{provide:dg,useClass:GP,multi:!0,deps:[Gt,Ce,zt]},{provide:dg,useClass:QP,multi:!0,deps:[Gt]},dC,gC,pC,{provide:_o,useExisting:dC},{provide:ml,useClass:jP,deps:[]},[]];var _C=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(B(Gt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var oe="primary",ja=Symbol("RouteTitle"),vg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ro(n){return new vg(n)}function rk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ik(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!En(n[t],e[t]))return!1;return!0}function En(n,e){let t=n?_g(n):void 0,r=e?_g(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!SC(n[i],e[i]))return!1;return!0}function _g(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function SC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function AC(n){return n.length>0?n[n.length-1]:null}function _r(n){return vf(n)?n:ya(n)?Ie(Promise.resolve(n)):J(n)}var ok={exact:RC,subset:MC},xC={exact:sk,subset:ak,ignored:()=>!0};function wC(n,e,t){return ok[t.paths](n.root,e.root,t.matrixParams)&&xC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function sk(n,e){return En(n,e)}function RC(n,e,t){if(!hi(n.segments,e.segments)||!El(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!RC(n.children[r],e.children[r],t))return!1;return!0}function ak(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>SC(n[t],e[t]))}function MC(n,e,t){return NC(n,e,e.segments,t)}function NC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!hi(i,t)||e.hasChildren()||!El(i,t,r))}else if(n.segments.length===t.length){if(!hi(n.segments,t)||!El(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!MC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!hi(n.segments,i)||!El(n.segments,i,r)||!n.children[oe]?!1:NC(n.children[oe],e,o,r)}}function El(n,e,t){return e.every((r,i)=>xC[t](n[i].parameters,r.parameters))}var Wn=class{constructor(e=new _e([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ro(this.queryParams),this._queryParamMap}toString(){return lk.serialize(this)}},_e=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Dl(this)}},di=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ro(this.parameters),this._parameterMap}toString(){return kC(this)}};function uk(n,e){return hi(n,e)&&n.every((t,r)=>En(t.parameters,e[r].parameters))}function hi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function ck(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===oe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==oe&&(t=t.concat(e(i,r)))}),t}var zg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>new xa,providedIn:"root"})}}return n})(),xa=class{parse(e){let t=new Ig(e);return new Wn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Da(e.root,!0)}`,r=fk(e.queryParams),i=typeof e.fragment=="string"?`#${dk(e.fragment)}`:"";return`${t}${r}${i}`}},lk=new xa;function Dl(n){return n.segments.map(e=>kC(e)).join("/")}function Da(n,e){if(!n.hasChildren())return Dl(n);if(e){let t=n.children[oe]?Da(n.children[oe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==oe&&r.push(`${i}:${Da(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=ck(n,(r,i)=>i===oe?[Da(n.children[oe],!1)]:[`${i}:${Da(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[oe]!=null?`${Dl(n)}/${t[0]}`:`${Dl(n)}/(${t.join("//")})`}}function PC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wl(n){return PC(n).replace(/%3B/gi,";")}function dk(n){return encodeURI(n)}function wg(n){return PC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cl(n){return decodeURIComponent(n)}function IC(n){return Cl(n.replace(/\+/g,"%20"))}function kC(n){return`${wg(n.path)}${hk(n.parameters)}`}function hk(n){return Object.entries(n).map(([e,t])=>`;${wg(e)}=${wg(t)}`).join("")}function fk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${wl(t)}=${wl(i)}`).join("&"):`${wl(t)}=${wl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var pk=/^[^\/()?;#]+/;function pg(n){let e=n.match(pk);return e?e[0]:""}var gk=/^[^\/()?;=#]+/;function mk(n){let e=n.match(gk);return e?e[0]:""}var yk=/^[^=?&#]+/;function vk(n){let e=n.match(yk);return e?e[0]:""}var _k=/^[^&#]+/;function wk(n){let e=n.match(_k);return e?e[0]:""}var Ig=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[oe]=new _e(e,t)),r}parseSegment(){let e=pg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new di(Cl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=mk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=pg(this.remaining);i&&(r=i,this.capture(r))}e[Cl(t)]=Cl(r)}parseQueryParam(e){let t=vk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=wk(this.remaining);s&&(r=s,this.capture(r))}let i=IC(t),o=IC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=pg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=oe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[oe]:new _e([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function OC(n){return n.segments.length>0?new _e([],{[oe]:n}):n}function FC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=FC(i);if(r===oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new _e(n.segments,e);return Ik(t)}function Ik(n){if(n.numberOfChildren===1&&n.children[oe]){let e=n.children[oe];return new _e(n.segments.concat(e.segments),e.children)}return n}function Ra(n){return n instanceof Wn}function Ek(n,e,t=null,r=null){let i=LC(n);return VC(i,e,t,r)}function LC(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new _e(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=OC(r);return e??i}function VC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return gg(i,i,i,t,r);let o=Dk(e);if(o.toRoot())return gg(i,i,new _e([],{}),t,r);let s=Ck(o,i,n),a=s.processChildren?ba(s.segmentGroup,s.index,o.commands):BC(s.segmentGroup,s.index,o.commands);return gg(i,s.segmentGroup,a,t,r)}function Tl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ma(n){return typeof n=="object"&&n!=null&&n.outlets}function gg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=jC(n,e,t);let a=OC(FC(s));return new Wn(a,o,i)}function jC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=jC(o,e,t)}),new _e(n.segments,r)}var bl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Tl(r[0]))throw new X(4003,!1);let i=r.find(Ma);if(i&&i!==AC(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Dk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new bl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new bl(t,e,r)}var So=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Ck(n,e,t){if(n.isAbsolute)return new So(e,!0,0);if(!t)return new So(e,!1,NaN);if(t.parent===null)return new So(t,!0,0);let r=Tl(n.commands[0])?0:1,i=t.segments.length-1+r;return Tk(t,i,n.numberOfDoubleDots)}function Tk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new So(r,!1,i-o)}function bk(n){return Ma(n[0])?n[0].outlets:{[oe]:n}}function BC(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return ba(n,e,t);let r=Sk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new _e(n.segments.slice(0,r.pathIndex),{});return o.children[oe]=new _e(n.segments.slice(r.pathIndex),n.children),ba(o,0,i)}else return r.match&&i.length===0?new _e(n.segments,{}):r.match&&!n.hasChildren()?Eg(n,e,t):r.match?ba(n,0,i):Eg(n,e,t)}function ba(n,e,t){if(t.length===0)return new _e(n.segments,{});{let r=bk(t),i={};if(Object.keys(r).some(o=>o!==oe)&&n.children[oe]&&n.numberOfChildren===1&&n.children[oe].segments.length===0){let o=ba(n.children[oe],e,t);return new _e(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=BC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new _e(n.segments,i)}}function Sk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ma(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!DC(c,l,s))return o;r+=2}else{if(!DC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Eg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ma(o)){let c=Ak(o.outlets);return new _e(r,c)}if(i===0&&Tl(t[0])){let c=n.segments[e];r.push(new di(c.path,EC(t[0]))),i++;continue}let s=Ma(o)?o.outlets[oe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Tl(a)?(r.push(new di(s,EC(a))),i+=2):(r.push(new di(s,{})),i++)}return new _e(r,{})}function Ak(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Eg(new _e([],{}),0,r))}),e}function EC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function DC(n,e,t){return n==t.path&&En(e,t.parameters)}var Sa="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),Wt=class{constructor(e,t){this.id=e,this.url=t}},Na=class extends Wt{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fi=class extends Wt{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ot||{}),Dg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Dg||{}),Gn=class extends Wt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pi=class extends Wt{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},Pa=class extends Wt{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Sl=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cg=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tg=class extends Wt{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bg=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sg=class extends Wt{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ag=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Rg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ng=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pg=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ka=class{},Mo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function xk(n,e){return n.providers&&!n._injector&&(n._injector=Zp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function on(n){return n.outlet||oe}function Rk(n,e){let t=n.filter(r=>on(r)===e);return t.push(...n.filter(r=>on(r)!==e)),t}function Ba(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var kg=class{get injector(){return Ba(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new kl(this.rootInjector),this.attachRef=null}},kl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(B(qt))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Al=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Og(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Og(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Fg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Fg(e,this._root).map(t=>t.value)}};function Og(n,e){if(n===e.value)return e;for(let t of e.children){let r=Og(n,t);if(r)return r}return null}function Fg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Fg(n,t);if(r.length)return r.unshift(e),r}return[]}var kt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function bo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var xl=class extends Al{constructor(e,t){super(e),this.snapshot=t,Gg(this,e)}toString(){return this.snapshot.toString()}};function UC(n){let e=Mk(n),t=new ot([new di("",{})]),r=new ot({}),i=new ot({}),o=new ot({}),s=new ot(""),a=new No(t,r,o,s,i,oe,n,e.root);return a.snapshot=e.root,new xl(new kt(a,[]),e)}function Mk(n){let e={},t={},r={},i="",o=new Ao([],e,r,i,t,oe,n,null,{});return new Ml("",new kt(o,[]))}var No=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(l=>l[ja]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Ro(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Ro(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},i&&HC(i)&&(r.resolve[ja]=i.title),r}var Ao=class{get title(){return this.data?.[ja]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ro(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ro(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ml=class extends Al{constructor(e,t){super(t),this.url=e,Gg(this,t)}toString(){return $C(this._root)}};function Gg(n,e){e.value._routerState=n,e.children.forEach(t=>Gg(n,t))}function $C(n){let e=n.children.length>0?` { ${n.children.map($C).join(", ")} } `:"";return`${n.value}${e}`}function mg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,En(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),En(e.params,t.params)||n.paramsSubject.next(t.params),ik(e.url,t.url)||n.urlSubject.next(t.url),En(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Lg(n,e){let t=En(n.params,e.params)&&uk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Lg(n.parent,e.parent))}function HC(n){return typeof n.title=="string"||n.title===null}var Wg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new It,this.deactivateEvents=new It,this.attachEvents=new It,this.detachEvents=new It,this.parentContexts=U(kl),this.location=U(ma),this.changeDetector=U(va),this.inputBinder=U(Kg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Vg(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Xc({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[rl]})}}return n})(),Vg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===No?this.route:e===kl?this.childContexts:this.parent.get(e,t)}},Kg=new W("");function Nk(n,e,t){let r=Oa(n,e._root,t?t._root:void 0);return new xl(r,e)}function Oa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Pk(n,e,t);return new kt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Oa(n,a)),s}}let r=kk(e.value),i=e.children.map(o=>Oa(n,o));return new kt(r,i)}}function Pk(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Oa(n,r,i);return Oa(n,r)})}function kk(n){return new No(new ot(n.url),new ot(n.params),new ot(n.queryParams),new ot(n.fragment),new ot(n.data),n.outlet,n.component,n)}var Fa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},qC="ngNavigationCancelingError";function Nl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ra(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=zC(!1,Ot.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function zC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[qC]=!0,t.cancellationCode=e,t}function Ok(n){return GC(n)&&Ra(n.url)}function GC(n){return!!n&&n[qC]}var Fk=(n,e,t,r)=>Y(i=>(new jg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jg=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=bo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=bo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=bo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Pg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Mg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(mg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),mg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Pl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xo=class{constructor(e,t){this.component=e,this.route=t}};function Lk(n,e,t){let r=n._root,i=e?e._root:null;return Ca(r,i,t,[r.value])}function Vk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ko(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!GI(n)?n:e.get(n):r}function Ca(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=bo(e);return n.children.forEach(s=>{jk(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Aa(a,t.getContext(s),i)),i}function jk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Bk(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Pl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ca(n,e,a?a.children:null,r,i):Ca(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xo(a.outlet.component,s))}else s&&Aa(e,a,i),i.canActivateChecks.push(new Pl(r)),o.component?Ca(n,null,a?a.children:null,r,i):Ca(n,null,t,r,i);return i}function Bk(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!hi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hi(n.url,e.url)||!En(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Lg(n,e)||!En(n.queryParams,e.queryParams);case"paramsChange":default:return!Lg(n,e)}}function Aa(n,e,t){let r=bo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Aa(s,e.children.getContext(o),t):Aa(s,null,t):Aa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new xo(e.outlet.component,i)):t.canDeactivateChecks.push(new xo(null,i)):t.canDeactivateChecks.push(new xo(null,i))}function Ua(n){return typeof n=="function"}function Uk(n){return typeof n=="boolean"}function $k(n){return n&&Ua(n.canLoad)}function Hk(n){return n&&Ua(n.canActivate)}function qk(n){return n&&Ua(n.canActivateChild)}function zk(n){return n&&Ua(n.canDeactivate)}function Gk(n){return n&&Ua(n.canMatch)}function WC(n){return n instanceof Ln||n?.name==="EmptyError"}var Il=Symbol("INITIAL_VALUE");function Po(){return $e(n=>yc(n.map(e=>e.pipe(Vn(1),Yr(Il)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===Il)return Il;if(t===!1||Wk(t))return t}return!0}),pt(e=>e!==Il),Vn(1)))}function Wk(n){return Ra(n)||n instanceof Fa}function Kk(n,e){return Ze(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(xe(q({},t),{guardsResult:!0})):Qk(s,r,i,n).pipe(Ze(a=>a&&Uk(a)?Yk(r,o,n,e):J(a)),Y(a=>xe(q({},t),{guardsResult:a})))})}function Qk(n,e,t,r){return Ie(n).pipe(Ze(i=>t1(i.component,i.route,t,e,r)),jt(i=>i!==!0,!0))}function Yk(n,e,t,r){return Ie(e).pipe(io(i=>ro(Jk(i.route.parent,r),Zk(i.route,r),e1(n,i.path,t),Xk(n,i.route,t))),jt(i=>i!==!0,!0))}function Zk(n,e){return n!==null&&e&&e(new Ng(n)),J(!0)}function Jk(n,e){return n!==null&&e&&e(new Rg(n)),J(!0)}function Xk(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>vc(()=>{let s=Ba(e)??t,a=ko(o,s),c=Hk(a)?a.canActivate(e,n):Hn(s,()=>a(e,n));return _r(c).pipe(jt())}));return J(i).pipe(Po())}function e1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Vk(s)).filter(s=>s!==null).map(s=>vc(()=>{let a=s.guards.map(c=>{let l=Ba(s.node)??t,h=ko(c,l),p=qk(h)?h.canActivateChild(r,n):Hn(l,()=>h(r,n));return _r(p).pipe(jt())});return J(a).pipe(Po())}));return J(o).pipe(Po())}function t1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=Ba(e)??i,l=ko(a,c),h=zk(l)?l.canDeactivate(n,e,t,r):Hn(c,()=>l(n,e,t,r));return _r(h).pipe(jt())});return J(s).pipe(Po())}function n1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=ko(s,n),c=$k(a)?a.canLoad(e,t):Hn(n,()=>a(e,t));return _r(c)});return J(o).pipe(Po(),KC(r))}function KC(n){return hf(Je(e=>{if(typeof e!="boolean")throw Nl(n,e)}),Y(e=>e===!0))}function r1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=ko(s,n),c=Gk(a)?a.canMatch(e,t):Hn(n,()=>a(e,t));return _r(c)});return J(o).pipe(Po(),KC(r))}var La=class{constructor(e){this.segmentGroup=e||null}},Va=class extends Error{constructor(e){super(),this.urlTree=e}};function To(n){return no(new La(n))}function i1(n){return no(new X(4e3,!1))}function o1(n){return no(zC(!1,Ot.GuardRejected))}var Bg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[oe])return i1(`${e.redirectTo}`);i=i.children[oe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:M}=i,N=Hn(o,()=>a({params:v,data:b,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof Wn)throw new Va(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Va(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Wn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new _e(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ug={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function s1(n,e,t,r,i){let o=QC(n,e,t);return o.matched?(r=xk(e,r),r1(r,e,t,i).pipe(Y(s=>s===!0?o:q({},Ug)))):J(o)}function QC(n,e,t){if(e.path==="**")return a1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},Ug):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rk)(t,n,e);if(!i)return q({},Ug);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?q(q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function a1(n){return{matched:!0,parameters:n.length>0?AC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function CC(n,e,t,r){return t.length>0&&l1(n,t,r)?{segmentGroup:new _e(e,c1(r,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&d1(n,t,r)?{segmentGroup:new _e(n.segments,u1(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function u1(n,e,t,r){let i={};for(let o of t)if(Ol(n,e,o)&&!r[on(o)]){let s=new _e([],{});i[on(o)]=s}return q(q({},r),i)}function c1(n,e){let t={};t[oe]=e;for(let r of n)if(r.path===""&&on(r)!==oe){let i=new _e([],{});t[on(r)]=i}return t}function l1(n,e,t){return t.some(r=>Ol(n,e,r)&&on(r)!==oe)}function d1(n,e,t){return t.some(r=>Ol(n,e,r))}function Ol(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function h1(n,e,t){return e.length===0&&!n.children[t]}var $g=class{};function f1(n,e,t,r,i,o,s="emptyOnly"){return new Hg(n,e,t,r,i,s,o).recognize()}var p1=31,Hg=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Bg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=CC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new kt(r,t),o=new Ml("",i),s=Ek(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ao([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),oe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,oe,t).pipe(Y(r=>({children:r,rootSnapshot:t})),cr(r=>{if(r instanceof Va)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof La?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Y(s=>s instanceof kt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ie(o).pipe(io(s=>{let a=r.children[s],c=Rk(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Qr((s,a)=>(s.push(...a),s)),lr(null),Ef(),Ze(s=>{if(s===null)return To(r);let a=YC(s);return g1(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return Ie(t).pipe(io(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(cr(l=>{if(l instanceof La)return J(null);throw l}))),jt(c=>!!c),cr(c=>{if(WC(c))return h1(r,i,o)?J(new $g):To(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return on(r)!==s&&(s===oe||!Ol(i,o,r))?To(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):To(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=QC(t,i,o);if(!c)return To(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p1&&(this.allowRedirects=!1));let v=new Ao(o,l,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,TC(i),on(i),i.component??i._loadedComponent??null,i,bC(i)),b=Rl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Ze(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=s1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($e(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,b=new Ao(m,p,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,TC(r),on(r),r.component??r._loadedComponent??null,r,bC(r)),M=Rl(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:L}=CC(t,m,v,l);if(L.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(Y(O=>new kt(b,O)));if(l.length===0&&L.length===0)return J(new kt(b,[]));let $=on(r)===o;return this.processSegment(h,l,N,L,$?oe:o,!0,b).pipe(Y(O=>new kt(b,O instanceof kt?[O]:[])))}))):To(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):n1(e,t,r,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,t).pipe(Je(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):o1(t))):J({routes:[],injector:e})}};function g1(n){n.sort((e,t)=>e.value.outlet===oe?-1:t.value.outlet===oe?1:e.value.outlet.localeCompare(t.value.outlet))}function m1(n){let e=n.value.routeConfig;return e&&e.path===""}function YC(n){let e=[],t=new Set;for(let r of n){if(!m1(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=YC(r.children);e.push(new kt(r.value,i))}return e.filter(r=>!t.has(r))}function TC(n){return n.data||{}}function bC(n){return n.resolve||{}}function y1(n,e,t,r,i,o){return Ze(s=>f1(n,e,t,r,s.extractedUrl,i,o).pipe(Y(({state:a,tree:c})=>xe(q({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function v1(n,e){return Ze(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of ZC(c))s.add(l);let a=0;return Ie(s).pipe(io(c=>o.has(c)?_1(c,r,n,e):(c.data=Rl(c,c.parent,n).resolve,J(void 0))),Je(()=>a++),oo(1),Ze(c=>a===s.size?J(t):wt))})}function ZC(n){let e=n.children.map(t=>ZC(t)).flat();return[n,...e]}function _1(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!HC(i)&&(o[ja]=i.title),w1(o,n,e,r).pipe(Y(s=>(n._resolvedData=s,n.data=Rl(n,n.parent,t).resolve,null)))}function w1(n,e,t,r){let i=_g(n);if(i.length===0)return J({});let o={};return Ie(i).pipe(Ze(s=>I1(n[s],e,t,r).pipe(jt(),Je(a=>{if(a instanceof Fa)throw Nl(new xa,a);o[s]=a}))),oo(1),wf(o),cr(s=>WC(s)?wt:no(s)))}function I1(n,e,t,r){let i=Ba(e)??r,o=ko(n,i),s=o.resolve?o.resolve(e,t):Hn(i,()=>o(e,t));return _r(s)}function yg(n){return $e(e=>{let t=n(e);return t?Ie(t).pipe(Y(()=>e)):J(e)})}var JC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===oe);return r}getResolvedTitleForRoute(t){return t.data[ja]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>U(E1),providedIn:"root"})}}return n})(),E1=(()=>{class n extends JC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(B(_C))}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Qg=new W("",{providedIn:"root",factory:()=>({})}),D1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=nt({type:n,selectors:[["ng-component"]],standalone:!0,features:[rt],decls:1,vars:0,template:function(r,i){r&1&&Re(0,"router-outlet")},dependencies:[Wg],encapsulation:2})}}return n})();function Yg(n){let e=n.children&&n.children.map(Yg),t=e?xe(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==oe&&(t.component=D1),t}var Zg=new W(""),C1=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(tg)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=_r(t.loadComponent()).pipe(Y(XC),Je(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Zs(()=>{this.componentLoaders.delete(t)})),i=new Ji(r,()=>new Ue).pipe(Zi());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=T1(r,this.compiler,t,this.onLoadEndListener).pipe(Zs(()=>{this.childrenLoaders.delete(r)})),s=new Ji(o,()=>new Ue).pipe(Zi());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T1(n,e,t,r){return _r(n.loadChildren()).pipe(Y(XC),Ze(i=>i instanceof la||Array.isArray(i)?J(i):Ie(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Zg,[],{optional:!0,self:!0}).flat()),{routes:s.map(Yg),injector:o}}))}function b1(n){return n&&typeof n=="object"&&"default"in n}function XC(n){return b1(n)?n.default:n}var Jg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>U(S1),providedIn:"root"})}}return n})(),S1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),A1=new W("");var x1=new W(""),R1=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=U(C1),this.environmentInjector=U(qt),this.urlSerializer=U(zg),this.rootContexts=U(kl),this.location=U(_a),this.inputBindingEnabled=U(Kg,{optional:!0})!==null,this.titleStrategy=U(JC),this.options=U(Qg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(Jg),this.createViewTransition=U(A1,{optional:!0}),this.navigationErrorHandler=U(x1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Ag(i)),r=i=>this.events.next(new xg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(q(q({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ot({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Sa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(o=>o.id!==0),Y(o=>xe(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{let s=!1,a=!1;return J(o).pipe($e(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ot.SupersededByNewNavigation),wt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?xe(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new pi(c.id,this.urlSerializer.serialize(c.rawUrl),p,Dg.IgnoredSameUrlNavigation)),c.resolve(!1),wt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe($e(p=>{let m=this.transitions?.getValue();return this.events.next(new Na(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?wt:Promise.resolve(p)}),y1(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(q({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Sl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:M}=c,N=new Na(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let L=UC(this.rootComponentType).snapshot;return this.currentTransition=o=xe(q({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:xe(q({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let p="";return this.events.next(new pi(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Dg.IgnoredByUrlHandlingStrategy)),c.resolve(!1),wt}}),Je(c=>{let l=new Cg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Y(c=>(this.currentTransition=o=xe(q({},c),{guards:Lk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Kk(this.environmentInjector,c=>this.events.next(c)),Je(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Nl(this.urlSerializer,c.guardsResult);let l=new Tg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ot.GuardRejected),!1)),yg(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(Je(l=>{let h=new bg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),$e(l=>{let h=!1;return J(l).pipe(v1(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Ot.NoDataFromResolver)}}))}),Je(l=>{let h=new Sg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),yg(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Je(m=>{h.component=m}),Y(()=>{})));for(let m of h.children)p.push(...l(m));return p};return yc(l(c.targetSnapshot.root)).pipe(lr(null),Vn(1))}),yg(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ie(h).pipe(Y(()=>o)):J(o)}),Y(c=>{let l=Nk(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=xe(q({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Je(()=>{this.events.next(new ka)}),Fk(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Vn(1),Je({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fi(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Cf(this.transitionAbortSubject.pipe(Je(c=>{throw c}))),Zs(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),cr(c=>{if(a=!0,GC(c))this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Ok(c)?this.events.next(new Mo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Pa(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Hn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Fa){let{message:p,cancellationCode:m}=Nl(this.urlSerializer,h);this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Mo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return wt}))}))}cancelNavigationTransition(t,r,i){let o=new Gn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function M1(n){return n!==Sa}var N1=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>U(P1),providedIn:"root"})}}return n})(),qg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},P1=(()=>{class n extends qg{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pp(n)))(i||n)}})()}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),eT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:()=>U(k1),providedIn:"root"})}}return n})(),k1=(()=>{class n extends eT{constructor(){super(...arguments),this.location=U(_a),this.urlSerializer=U(zg),this.options=U(Qg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(Jg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Wn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=UC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Na)this.stateMemento=this.createStateMemento();else if(t instanceof pi)this.rawUrlTree=r.initialUrl;else if(t instanceof Sl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ka?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Gn&&(t.code===Ot.GuardRejected||t.code===Ot.NoDataFromResolver)?this.restoreHistory(r):t instanceof Pa?this.restoreHistory(r,!0):t instanceof fi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Wn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=q(q({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=q(q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Pp(n)))(i||n)}})()}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ta=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ta||{});function O1(n,e){n.events.pipe(pt(t=>t instanceof fi||t instanceof Gn||t instanceof Pa||t instanceof pi),Y(t=>t instanceof fi||t instanceof pi?Ta.COMPLETE:(t instanceof Gn?t.code===Ot.Redirect||t.code===Ot.SupersededByNewNavigation:!1)?Ta.REDIRECTING:Ta.FAILED),pt(t=>t!==Ta.REDIRECTING),Vn(1)).subscribe(()=>{e()})}function F1(n){throw n}var L1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},V1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tT=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(pl),this.stateManager=U(eT),this.options=U(Qg,{optional:!0})||{},this.pendingTasks=U(Eo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(R1),this.urlSerializer=U(zg),this.location=U(_a),this.urlHandlingStrategy=U(Jg),this._events=new Ue,this.errorHandler=this.options.errorHandler||F1,this.navigated=!1,this.routeReuseStrategy=U(N1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Zg,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(Kg,{optional:!0}),this.eventsSubscription=new je,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Gn&&r.code!==Ot.Redirect&&r.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof fi)this.navigated=!0;else if(r instanceof Mo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||M1(i.source)},s);this.scheduleNavigation(a,Sa,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}B1(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Sa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=q({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Yg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=LC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return VC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ra(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Sa,null,r)}navigate(t,r={skipLocationChange:!1}){return j1(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=q({},L1):r===!1?i=q({},V1):i=r,Ra(t))return wC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return wC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return O1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function j1(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function B1(n){return!(n instanceof ka)&&!(n instanceof Mo)}var U1=new W("");function nT(n,...e){return Ep([{provide:Zg,multi:!0,useValue:n},[],{provide:No,useFactory:$1,deps:[tT]},{provide:eg,multi:!0,useFactory:H1},e.map(t=>t.\u0275providers)])}function $1(n){return n.routerState.root}function H1(){let n=U(ri);return e=>{let t=n.get(ui);if(e!==t.components[0])return;let r=n.get(tT),i=n.get(q1);n.get(z1)===1&&r.initialNavigation(),n.get(G1,null,ae.Optional)?.setUpPreloading(),n.get(U1,null,ae.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var q1=new W("",{factory:()=>new Ue}),z1=new W("",{providedIn:"root",factory:()=>1});var G1=new W("");var rT=[];var W1="firebase",K1="10.14.1";ur(W1,K1,"app");var Oo=new vr("ANGULARFIRE2_VERSION");var Q1=(n,e)=>{let t=e?[e]:Rw(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},gi=class{constructor(){return Q1(Y1)}},Y1="app-check";function Xg(){}var Fl=class{zone;delegate;constructor(e,t=mf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},em=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xg,{},Xg,Xg)),t.pipe(Je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ll=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Fl(Zone.current)),this.insideAngular=t.run(()=>new Fl(Zone.current,Qs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B(Ce))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z1(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function xt(n){return J1(Z1())(n)}function J1(n){return function(t){return t=t.lift(new em(n.ngZone)),t.pipe(Xt(n.outsideAngular),Vt(n.insideAngular))}}var X1="firebase",eO="10.14.1";bt.registerVersion(X1,eO,"app-compat");var tO=["ngOnDestroy"],sT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(tO.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Vl=class{constructor(e){return e}},Fo=new W("angularfire2.app.options"),Lo=new W("angularfire2.app.name");function $a(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=bt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>bt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;nO("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Vl(s)}var nO=(n,...e)=>{rg()&&typeof console<"u"&&console[n](...e)},rO={provide:Vl,useFactory:$a,deps:[Fo,Ce,[new ha,Lo]]},aT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Fo,useValue:t},{provide:Lo,useValue:r}]}}constructor(t){bt.registerVersion("angularfire",Oo.full,"core"),bt.registerVersion("angularfire",Oo.full,"app-compat"),bt.registerVersion("angular",GD.full,t.toString())}static \u0275fac=function(r){return new(r||n)(B(zt))};static \u0275mod=$n({type:n});static \u0275inj=Un({providers:[rO]})}return n})();function jl(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return iO(i,s)||(oT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${oO?" You may need to reload as Firebase is not HMR aware.":""}`),oT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function iO(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var oO=typeof module<"u"&&!!module.hot,oT=(n,...e)=>{rg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var uO=new Map,cO={activated:!1,tokenObservers:[]},lO={initialized:!1,enabled:!1};function sn(n){return uO.get(n)||Object.assign({},cO)}function hT(){return lO}var dO="https://content-firebaseappcheck.googleapis.com/v1";var hO="exchangeDebugToken",uT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},B4=24*60*60*1e3;var nm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new Kh,this.pending.promise.catch(t=>{}),yield fO(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Kh,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function fO(n){return new Promise(e=>{setTimeout(e,n)})}var pO={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},wr=new Aw("appCheck","AppCheck",pO);function fT(n){if(!sn(n).activated)throw wr.create("use-before-activation",{appName:n.name})}function pT(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw wr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw wr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw wr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw wr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function gT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${dO}/projects/${t}/apps/${r}:${hO}?key=${i}`,body:{debug_token:e}}}var gO="firebase-app-check-database",mO=1,rm="firebase-app-check-store";var Bl=null;function yO(){return Bl||(Bl=new Promise((n,e)=>{try{let t=indexedDB.open(gO,mO);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(wr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(rm,{keyPath:"compositeKey"})}}}catch(t){e(wr.create("storage-open",{originalErrorMessage:t?.message}))}}),Bl)}function vO(n,e){return _O(wO(n),e)}function _O(n,e){return R(this,null,function*(){let r=(yield yO()).transaction(rm,"readwrite"),o=r.objectStore(rm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(wr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function wO(n){return`${n.options.appId}-${n.name}`}var im=new Zu("@firebase/app-check");function tm(n,e){return Yu()?vO(n,e).catch(t=>{im.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mT(){return hT().enabled}function yT(){return R(this,null,function*(){let n=hT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var IO={error:"UNKNOWN_ERROR"};function EO(n){return Tw.encodeString(JSON.stringify(n),!1)}function om(n,e=!1){return R(this,null,function*(){let t=n.app;fT(t);let r=sn(t),i=r.token,o;if(i&&!Ha(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Ha(c)?i=c:yield tm(t,void 0))}if(!e&&i&&Ha(i))return{token:i.token};let s=!1;if(mT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pT(gT(t,yield yT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield tm(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield sn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?im.warn(c.message):im.error(c),o=c}let a;return i?o?Ha(i)?a={token:i.token,internalError:o}:a=lT(o):(a={token:i.token},r.token=i,yield tm(t,i)):a=lT(o),s&&bO(t,a),a})}function DO(n){return R(this,null,function*(){let e=n.app;fT(e);let{provider:t}=sn(e);if(mT()){let r=yield yT(),{token:i}=yield pT(gT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function CO(n,e,t,r){let{app:i}=n,o=sn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ha(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),cT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>cT(n))}function vT(n,e){let t=sn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cT(n){let{app:e}=n,t=sn(e),r=t.tokenRefresher;r||(r=TO(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function TO(n){let{app:e}=n;return new nm(()=>R(this,null,function*(){let t=sn(e),r;if(t.token?r=yield om(n,!0):r=yield om(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=sn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},uT.RETRIAL_MIN_WAIT,uT.RETRIAL_MAX_WAIT)}function bO(n,e){let t=sn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ha(n){return n.expireTimeMillis-Date.now()>0}function lT(n){return{token:EO(IO),error:n}}var sm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=sn(this.app);for(let t of e)vT(this.app,t.next);return Promise.resolve()}};function SO(n,e){return new sm(n,e)}function AO(n){return{getToken:e=>om(n,e),getLimitedUseToken:()=>DO(n),addTokenListener:e=>CO(n,"INTERNAL",e),removeTokenListener:e=>vT(n.app,e)}}var xO="@firebase/app-check",RO="0.8.8";var MO="app-check",dT="app-check-internal";function NO(){zs(new zr(MO,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return SO(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(dT).initialize()})),zs(new zr(dT,n=>{let e=n.getProvider("app-check").getImmediate();return AO(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ur(xO,RO)}NO();var PO=["localhost","0.0.0.0","127.0.0.1"],J4=typeof window<"u"&&PO.includes(window.location.hostname);var am=new W("angularfire2.auth.use-emulator"),um=new W("angularfire2.auth.settings"),cm=new W("angularfire2.auth.tenant-id"),lm=new W("angularfire2.auth.langugage-code"),dm=new W("angularfire2.auth.use-device-language"),hm=new W("angularfire.auth.persistence"),fm=(n,e,t,r,i,o,s,a)=>jl(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),wT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let b=new Ue,M=J(void 0).pipe(Vt(s.outsideAngular),$e(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Y(()=>$a(t,o,r)),Y(N=>fm(N,o,a,l,h,p,c,m)),wc({bufferSize:1,refCount:!1}));if(li(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{M.pipe(jt()).subscribe();let N=M.pipe($e(O=>O.getRedirectResult().then(K=>K,()=>null)),xt,wc({bufferSize:1,refCount:!1})),L=M.pipe($e(O=>new le(K=>({unsubscribe:o.runOutsideAngular(()=>O.onAuthStateChanged(ee=>K.next(ee),ee=>K.error(ee),()=>K.complete()))})))),$=M.pipe($e(O=>new le(K=>({unsubscribe:o.runOutsideAngular(()=>O.onIdTokenChanged(ee=>K.next(ee),ee=>K.error(ee),()=>K.complete()))}))));this.authState=N.pipe(Ic(L),Xt(s.outsideAngular),Vt(s.insideAngular)),this.user=N.pipe(Ic($),Xt(s.outsideAngular),Vt(s.insideAngular)),this.idToken=this.user.pipe($e(O=>O?Ie(O.getIdToken()):J(null))),this.idTokenResult=this.user.pipe($e(O=>O?Ie(O.getIdTokenResult()):J(null))),this.credential=_f(N,b,this.authState.pipe(pt(O=>!O))).pipe(Y(O=>O?.user?O:null),Xt(s.outsideAngular),Vt(s.insideAngular))}return sT(this,M,o,{spy:{apply:(N,L,$)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&$.then(O=>b.next(O))}}})}static \u0275fac=function(r){return new(r||n)(B(Fo),B(Lo,8),B(zt),B(Ce),B(Ll),B(am,8),B(um,8),B(cm,8),B(lm,8),B(dm,8),B(hm,8),B(gi,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var IT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ET={};var Ir,pm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Pn=2;Pn<arguments.length;Pn++)_[Pn-2]=arguments[Pn];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=K(w,y).g;w=L(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=L(this,I),M(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function L(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Pn=I.i(D)>>>16,Ts=I.i(D)&65535;w[2*E+2*D]+=_*Ts,$(w,2*E+2*D),w[2*E+2*D+1]+=T*Ts,$(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Pn,$(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Pn,$(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function $(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function O(I,y){this.g=I,this.h=y}function K(I,y){if(b(y))throw Error("division by zero");if(b(I))return new O(p,p);if(M(I))return y=K(N(I),y),new O(N(y.g),N(y.h));if(M(y))return y=K(I,N(y)),new O(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ee(w),E=ee(E);var D=Q(w,1),T=Q(E,1);for(E=Q(E,2),w=Q(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Q(E,1),w=Q(w,1)}return y=L(I,D.j(y)),new O(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);M(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=L(I,_)}return new O(D,I)}n.A=function(I){return K(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Q(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pm=ET.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Ir=ET.Integer=s}).apply(typeof IT<"u"?IT:typeof self<"u"?self:typeof window<"u"?window:{});var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kn={};var gm,OO,Vo,mm,qa,$l,ym,vm,_m;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ul=="object"&&Ul];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function b(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var F=Array(arguments.length-2),De=2;De<arguments.length;De++)F[De-2]=arguments[De];return d.prototype[C].apply(g,F)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let F=0;F<A;F++)u[C+F]=g[F]}else u.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(u){return/^[\s\xa0]*$/.test(u)}function O(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var ee=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function Q(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Eh;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Pn{constructor(){this.h=this.g=null}add(d,f){let g=Ts.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ts=new L(()=>new sA,u=>u.reset());class sA{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let bs,Ss=!1,Eh=new Pn,I_=()=>{let u=a.Promise.resolve(void 0);bs=()=>{u.then(aA)}};var aA=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=Ts;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Ss=!1};function ir(){this.s=this.s,this.C=this.C}ir.prototype.s=!1,ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var uA=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function As(u,d){if(lt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ee){e:{try{K(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:cA[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&As.aa.h.call(this)}}b(As,lt);var cA={2:"touch",3:"pen",4:"mouse"};As.prototype.h=function(){As.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xs="closure_listenable_"+(1e6*Math.random()|0),lA=0;function dA(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++lA,this.da=this.fa=!1}function Nu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Pu(u){this.src=u,this.g={},this.h=0}Pu.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var F=Ch(u,d,g,C);return-1<F?(d=u[F],f||(d.fa=!1)):(d=new dA(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function Dh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Nu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Ch(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Th="closure_lm_"+(1e6*Math.random()|0),bh={};function E_(u,d,f,g,C){if(g&&g.once)return C_(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)E_(u,d[A],f,g,C);return null}return f=Rh(f),u&&u[xs]?u.K(d,f,l(g)?!!g.capture:!!g,C):D_(u,d,f,!1,g,C)}function D_(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var F=l(C)?!!C.capture:!!C,De=Ah(u);if(De||(u[Th]=De=new Pu(u)),f=De.add(d,f,g,F,A),f.proxy)return f;if(g=hA(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)uA||(C=F),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(b_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function hA(){function u(f){return d.call(u.src,u.listener,f)}let d=fA;return u}function C_(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)C_(u,d[A],f,g,C);return null}return f=Rh(f),u&&u[xs]?u.L(d,f,l(g)?!!g.capture:!!g,C):D_(u,d,f,!0,g,C)}function T_(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)T_(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Rh(f),u&&u[xs]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=Ch(A,f,g,C),-1<f&&(Nu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=Ah(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Ch(d,f,g,C)),(f=-1<u?d[u]:null)&&Sh(f))}function Sh(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[xs])Dh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(b_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Ah(d))?(Dh(f,u),f.h==0&&(f.src=null,d[Th]=null)):Nu(u)}}}function b_(u){return u in bh?bh[u]:bh[u]="on"+u}function fA(u,d){if(u.da)u=!0;else{d=new As(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Sh(u),u=f.call(g,d)}return u}function Ah(u){return u=u[Th],u instanceof Pu?u:null}var xh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rh(u){return typeof u=="function"?u:(u[xh]||(u[xh]=function(d){return u.handleEvent(d)}),u[xh])}function dt(){ir.call(this),this.i=new Pu(this),this.M=this,this.F=null}b(dt,ir),dt.prototype[xs]=!0,dt.prototype.removeEventListener=function(u,d,f,g){T_(this,u,d,f,g)};function yt(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new lt(d,u);else if(d instanceof lt)d.target=d.target||u;else{var C=d;d=new lt(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var F=d.g=f[A];C=ku(F,g,!0,d)&&C}if(F=d.g=u,C=ku(F,g,!0,d)&&C,C=ku(F,g,!1,d)&&C,f)for(A=0;A<f.length;A++)F=d.g=f[A],C=ku(F,g,!1,d)&&C}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)Nu(f[g]);delete u.g[d],u.h--}}this.F=null},dt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},dt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function ku(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var F=d[A];if(F&&!F.da&&F.capture==f){var De=F.listener,it=F.ha||F.src;F.fa&&Dh(u.i,F),C=De.call(it,g)!==!1&&C}}return C&&!g.defaultPrevented}function S_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function A_(u){u.g=S_(()=>{u.g=null,u.i&&(u.i=!1,A_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class pA extends ir{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:A_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(u){ir.call(this),this.h=u,this.g={}}b(Rs,ir);var x_=[];function R_(u){Q(u.g,function(d,f){this.g.hasOwnProperty(f)&&Sh(d)},u),u.g={}}Rs.prototype.N=function(){Rs.aa.N.call(this),R_(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mh=a.JSON.stringify,gA=a.JSON.parse,mA=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Nh(){}Nh.prototype.h=null;function M_(u){return u.h||(u.h=u.i())}function N_(){}var Ms={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ph(){lt.call(this,"d")}b(Ph,lt);function kh(){lt.call(this,"c")}b(kh,lt);var Ur={},P_=null;function Ou(){return P_=P_||new dt}Ur.La="serverreachability";function k_(u){lt.call(this,Ur.La,u)}b(k_,lt);function Ns(u){let d=Ou();yt(d,new k_(d))}Ur.STAT_EVENT="statevent";function O_(u,d){lt.call(this,Ur.STAT_EVENT,u),this.stat=d}b(O_,lt);function vt(u){let d=Ou();yt(d,new O_(d,u))}Ur.Ma="timingevent";function F_(u,d){lt.call(this,Ur.Ma,u),this.size=d}b(F_,lt);function Ps(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ks(){this.g=!0}ks.prototype.xa=function(){this.g=!1};function yA(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var F="",De=A.split("&"),it=0;it<De.length;it++){var ge=De[it].split("=");if(1<ge.length){var ht=ge[0];ge=ge[1];var ft=ht.split("_");F=2<=ft.length&&ft[1]=="type"?F+(ht+"="+ge+"&"):F+(ht+"=redacted&")}}else F=null;else F=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+F})}function vA(u,d,f,g,C,A,F){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+F})}function Hi(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+wA(u,f)+(g?" "+g:"")})}function _A(u,d){u.info(function(){return"TIMEOUT: "+d})}ks.prototype.info=function(){};function wA(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var F=1;F<C.length;F++)C[F]=""}}}}return Mh(f)}catch{return d}}var Fu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},L_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oh;function Lu(){}b(Lu,Nh),Lu.prototype.g=function(){return new XMLHttpRequest},Lu.prototype.i=function(){return{}},Oh=new Lu;function or(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new V_}function V_(){this.i=null,this.g="",this.h=!1}var j_={},Fh={};function Lh(u,d,f){u.L=1,u.v=Uu(kn(d)),u.m=f,u.P=!0,B_(u,null)}function B_(u,d){u.F=Date.now(),Vu(u),u.A=kn(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),ew(f.i,"t",g),u.C=0,f=u.j.J,u.h=new V_,u.g=vw(u.j,f?d:null,!u.m),0<u.O&&(u.M=new pA(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(x_[0]=C.toString()),C=x_);for(var A=0;A<C.length;A++){var F=E_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Ns(),yA(u.i,u.u,u.A,u.l,u.R,u.m)}or.prototype.ca=function(u){u=u.target;let d=this.M;d&&On(u)==3?d.j():this.Y(u)},or.prototype.Y=function(u){try{if(u==this.g)e:{let ft=On(this.g);var d=this.g.Ba();let Gi=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||aw(this.g)))){this.J||ft!=4||d==7||(d==8||0>=Gi?Ns(3):Ns(2)),Vh(this);var f=this.g.Z();this.X=f;t:if(U_(this)){var g=aw(this.g);u="";var C=g.length,A=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Os(this);var F="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,F=this.h.g}else F=this.g.oa();if(this.o=f==200,vA(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var De,it=this.g;if((De=it.g?it.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(De)){var ge=De;break t}}ge=null}if(f=ge)Hi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jh(this,f);else{this.o=!1,this.s=3,vt(12),$r(this),Os(this);break e}}if(this.P){f=!0;let Zt;for(;!this.J&&this.C<F.length;)if(Zt=IA(this,F),Zt==Fh){ft==4&&(this.s=4,vt(14),f=!1),Hi(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==j_){this.s=4,vt(15),Hi(this.i,this.l,F,"[Invalid Chunk]"),f=!1;break}else Hi(this.i,this.l,Zt,null),jh(this,Zt);if(U_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||F.length!=0||this.h.h||(this.s=1,vt(16),f=!1),this.o=this.o&&f,!f)Hi(this.i,this.l,F,"[Invalid Chunked Response]"),$r(this),Os(this);else if(0<F.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),zh(ht),ht.M=!0,vt(11))}}else Hi(this.i,this.l,F,null),jh(this,F);ft==4&&$r(this),this.o&&!this.J&&(ft==4?pw(this.j,this):(this.o=!1,Vu(this)))}else VA(this.g),f==400&&0<F.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),$r(this),Os(this)}}}catch{}finally{}};function U_(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function IA(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Fh:(f=Number(d.substring(f,g)),isNaN(f)?j_:(g+=1,g+f>d.length?Fh:(d=d.slice(g,g+f),u.C=g+f,d)))}or.prototype.cancel=function(){this.J=!0,$r(this)};function Vu(u){u.S=Date.now()+u.I,$_(u,u.I)}function $_(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ps(m(u.ba,u),d)}function Vh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}or.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(_A(this.i,this.A),this.L!=2&&(Ns(),vt(17)),$r(this),this.s=2,Os(this)):$_(this,this.S-u)};function Os(u){u.j.G==0||u.J||pw(u.j,u)}function $r(u){Vh(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,R_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function jh(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||Bh(f.h,u))){if(!u.K&&Bh(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)Gu(f),qu(f);else break e;qh(f),vt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ps(m(f.Za,f),6e3));if(1>=z_(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else qr(f,11)}else if((u.K||f.g==u)&&Gu(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let ge=C[d];if(f.T=ge[0],ge=ge[1],f.G==2)if(ge[0]=="c"){f.K=ge[1],f.ia=ge[2];let ht=ge[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));let ft=ge[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));let Gi=ge[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(g=1.5*Gi,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Zt=u.g;if(Zt){let Ku=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ku){var A=g.h;A.g||Ku.indexOf("spdy")==-1&&Ku.indexOf("quic")==-1&&Ku.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Uh(A,A.h),A.h=null))}if(g.D){let Gh=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Gh&&(g.ya=Gh,Ae(g.I,g.D,Gh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var F=u;if(g.qa=yw(g,g.J?g.ia:null,g.W),F.K){G_(g.h,F);var De=F,it=g.L;it&&(De.I=it),De.B&&(Vh(De),Vu(De)),g.g=F}else hw(g);0<f.i.length&&zu(f)}else ge[0]!="stop"&&ge[0]!="close"||qr(f,7);else f.G==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?qr(f,7):Hh(f):ge[0]!="noop"&&f.l&&f.l.ta(ge),f.v=0)}}Ns(4)}catch{}}var EA=class{constructor(u,d){this.g=u,this.map=d}};function H_(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function q_(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function z_(u){return u.h?1:u.g?u.g.size:0}function Bh(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Uh(u,d){u.g?u.g.add(d):u.h=d}function G_(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}H_.prototype.cancel=function(){if(this.i=W_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function W_(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function DA(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function CA(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function K_(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=CA(u),g=DA(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var Q_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TA(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Hr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Hr){this.h=u.h,ju(this,u.j),this.o=u.o,this.g=u.g,Bu(this,u.s),this.l=u.l;var d=u.i,f=new Vs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Y_(this,f),this.m=u.m}else u&&(d=String(u).match(Q_))?(this.h=!1,ju(this,d[1]||"",!0),this.o=Fs(d[2]||""),this.g=Fs(d[3]||"",!0),Bu(this,d[4]),this.l=Fs(d[5]||"",!0),Y_(this,d[6]||"",!0),this.m=Fs(d[7]||"")):(this.h=!1,this.i=new Vs(null,this.h))}Hr.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ls(d,Z_,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ls(d,Z_,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ls(f,f.charAt(0)=="/"?AA:SA,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ls(f,RA)),u.join("")};function kn(u){return new Hr(u)}function ju(u,d,f){u.j=f?Fs(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Bu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Y_(u,d,f){d instanceof Vs?(u.i=d,MA(u.i,u.h)):(f||(d=Ls(d,xA)),u.i=new Vs(d,u.h))}function Ae(u,d,f){u.i.set(d,f)}function Uu(u){return Ae(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Fs(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ls(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,bA),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bA(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Z_=/[#\/\?@]/g,SA=/[#\?:]/g,AA=/[#\?]/g,xA=/[#\?@]/g,RA=/#/g;function Vs(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function sr(u){u.g||(u.g=new Map,u.h=0,u.i&&TA(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Vs.prototype,n.add=function(u,d){sr(this),this.i=null,u=qi(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function J_(u,d){sr(u),d=qi(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function X_(u,d){return sr(u),d=qi(u,d),u.g.has(d)}n.forEach=function(u,d){sr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){sr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){sr(this);let d=[];if(typeof u=="string")X_(this,u)&&(d=d.concat(this.g.get(qi(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return sr(this),this.i=null,u=qi(this,u),X_(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function ew(u,d,f){J_(u,d),0<f.length&&(u.i=null,u.g.set(qi(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),F=this.V(g);for(g=0;g<F.length;g++){var C=A;F[g]!==""&&(C+="="+encodeURIComponent(String(F[g]))),u.push(C)}}return this.i=u.join("&")};function qi(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function MA(u,d){d&&!u.j&&(sr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(J_(this,g),ew(this,C,f))},u)),u.j=d}function NA(u,d){let f=new ks;if(a.Image){let g=new Image;g.onload=v(ar,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(ar,f,"TestLoadImage: error",!1,d,g),g.onabort=v(ar,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(ar,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function PA(u,d){let f=new ks,g=new AbortController,C=setTimeout(()=>{g.abort(),ar(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?ar(f,"TestPingServer: ok",!0,d):ar(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),ar(f,"TestPingServer: error",!1,d)})}function ar(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function kA(){this.g=new mA}function OA(u,d,f){let g=f||"";try{K_(u,function(C,A){let F=C;l(C)&&(F=Mh(C)),d.push(g+A+"="+encodeURIComponent(F))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function js(u){this.l=u.Ub||null,this.j=u.eb||!1}b(js,Nh),js.prototype.g=function(){return new $u(this.l,this.j)},js.prototype.i=function(u){return function(){return u}}({});function $u(u,d){dt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b($u,dt),n=$u.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Us(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function tw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Bs(this):Us(this),this.readyState==3&&tw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Bs(this))},n.Qa=function(u){this.g&&(this.response=u,Bs(this))},n.ga=function(){this.g&&Bs(this)};function Bs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Us(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function Us(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty($u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function nw(u){let d="";return Q(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function $h(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=nw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Ae(u,d,f))}function Ve(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ve,dt);var FA=/^https?$/i,LA=["POST","PUT"];n=Ve.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oh.g(),this.v=this.o?M_(this.o):M_(Oh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){rw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LA,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,F]of f)this.g.setRequestHeader(A,F);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sw(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){rw(this,A)}};function rw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,iw(u),Hu(u)}function iw(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),Hu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hu(this,!0)),Ve.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ow(this):this.bb())},n.bb=function(){ow(this)};function ow(u){if(u.h&&typeof s<"u"&&(!u.v[1]||On(u)!=4||u.Z()!=2)){if(u.u&&On(u)==4)S_(u.Ea,0,u);else if(yt(u,"readystatechange"),On(u)==4){u.h=!1;try{let F=u.Z();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=F===0){var C=String(u.D).match(Q_)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!FA.test(C?C.toLowerCase():"")}f=g}if(f)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var A=2<On(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",iw(u)}}finally{Hu(u)}}}}function Hu(u,d){if(u.g){sw(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||yt(u,"ready");try{f.onreadystatechange=g}catch{}}}function sw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function On(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),gA(d)}};function aw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function VA(u){let d={};u=(u.g&&2<=On(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if($(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $s(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function uw(u){this.Aa=0,this.i=[],this.j=new ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$s("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$s("baseRetryDelayMs",5e3,u),this.cb=$s("retryDelaySeedMs",1e4,u),this.Wa=$s("forwardChannelMaxRetries",2,u),this.wa=$s("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new H_(u&&u.concurrentRequestLimit),this.Da=new kA,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=uw.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){vt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=yw(this,null,this.W),zu(this)};function Hh(u){if(cw(u),u.G==3){var d=u.U++,f=kn(u.I);if(Ae(f,"SID",u.K),Ae(f,"RID",d),Ae(f,"TYPE","terminate"),Hs(u,f),d=new or(u,u.j,d),d.L=2,d.v=Uu(kn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=vw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Vu(d)}mw(u)}function qu(u){u.g&&(zh(u),u.g.cancel(),u.g=null)}function cw(u){qu(u),u.u&&(a.clearTimeout(u.u),u.u=null),Gu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function zu(u){if(!q_(u.h)&&!u.s){u.s=!0;var d=u.Ga;bs||I_(),Ss||(bs(),Ss=!0),Eh.add(d,u),u.B=0}}function jA(u,d){return z_(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ps(m(u.Ga,u,d),gw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new or(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=dw(this,C,d),f=kn(this.I),Ae(f,"RID",u),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),Hs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(nw(A)))+"&"+d:this.m&&$h(f,this.m,A)),Uh(this.h,C),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",d),Ae(f,"SID","null"),C.T=!0,Lh(C,f,null)):Lh(C,f,d),this.G=2}}else this.G==3&&(u?lw(this,u):this.i.length==0||q_(this.h)||lw(this))};function lw(u,d){var f;d?f=d.l:f=u.U++;let g=kn(u.I);Ae(g,"SID",u.K),Ae(g,"RID",f),Ae(g,"AID",u.T),Hs(u,g),u.m&&u.o&&$h(g,u.m,u.o),f=new or(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=dw(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Uh(u.h,f),Lh(f,g,d)}function Hs(u,d){u.H&&Q(u.H,function(f,g){Ae(d,g,f)}),u.l&&K_({},function(f,g){Ae(d,g,f)})}function dw(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let F=["count="+f];A==-1?0<f?(A=C[0].g,F.push("ofs="+A)):A=0:F.push("ofs="+A);let De=!0;for(let it=0;it<f;it++){let ge=C[it].g,ht=C[it].map;if(ge-=A,0>ge)A=Math.max(0,C[it].g-100),De=!1;else try{OA(ht,F,"req"+ge+"_")}catch{g&&g(ht)}}if(De){g=F.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function hw(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;bs||I_(),Ss||(bs(),Ss=!0),Eh.add(d,u),u.v=0}}function qh(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ps(m(u.Fa,u),gw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,fw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ps(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),qu(this),fw(this))};function zh(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function fw(u){u.g=new or(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=kn(u.qa);Ae(d,"RID","rpc"),Ae(d,"SID",u.K),Ae(d,"AID",u.T),Ae(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ae(d,"TO",u.ja),Ae(d,"TYPE","xmlhttp"),Hs(u,d),u.m&&u.o&&$h(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=Uu(kn(d)),f.m=null,f.P=!0,B_(f,u)}n.Za=function(){this.C!=null&&(this.C=null,qu(this),qh(this),vt(19))};function Gu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function pw(u,d){var f=null;if(u.g==d){Gu(u),zh(u),u.g=null;var g=2}else if(Bh(u.h,d))f=d.D,G_(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=Ou(),yt(g,new F_(g,f)),zu(u)}else hw(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&jA(u,d)||g==2&&qh(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:qr(u,5);break;case 4:qr(u,10);break;case 3:qr(u,6);break;default:qr(u,2)}}}function gw(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function qr(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new Hr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ju(g,"https"),Uu(g),C?NA(g.toString(),f):PA(g.toString(),f)}else vt(2);u.G=0,u.l&&u.l.sa(d),mw(u),cw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function mw(u){if(u.G=0,u.ka=[],u.l){let d=W_(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function yw(u,d,f){var g=f instanceof Hr?kn(f):new Hr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Bu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Hr(null);g&&ju(A,g),d&&(A.g=d),C&&Bu(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Ae(g,f,d),Ae(g,"VER",u.la),Hs(u,g),g}function vw(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ve(new js({eb:f})):new Ve(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _w(){}n=_w.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Wu(){}Wu.prototype.g=function(u,d){return new Mt(u,d)};function Mt(u,d){dt.call(this),this.g=new uw(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!$(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new zi(this)}b(Mt,dt),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){Hh(this.g)},Mt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=Mh(u),u=f);d.i.push(new EA(d.Ya++,u)),d.G==3&&zu(d)},Mt.prototype.N=function(){this.g.l=null,delete this.j,Hh(this.g),delete this.g,Mt.aa.N.call(this)};function ww(u){Ph.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}b(ww,Ph);function Iw(){kh.call(this),this.status=1}b(Iw,kh);function zi(u){this.g=u}b(zi,_w),zi.prototype.ua=function(){yt(this.g,"a")},zi.prototype.ta=function(u){yt(this.g,new ww(u))},zi.prototype.sa=function(u){yt(this.g,new Iw)},zi.prototype.ra=function(){yt(this.g,"b")},Wu.prototype.createWebChannel=Wu.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,_m=Kn.createWebChannelTransport=function(){return new Wu},vm=Kn.getStatEventTarget=function(){return Ou()},ym=Kn.Event=Ur,$l=Kn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fu.NO_ERROR=0,Fu.TIMEOUT=8,Fu.HTTP_ERROR=6,qa=Kn.ErrorCode=Fu,L_.COMPLETE="complete",mm=Kn.EventType=L_,N_.EventType=Ms,Ms.OPEN="a",Ms.CLOSE="b",Ms.ERROR="c",Ms.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Vo=Kn.WebChannel=N_,OO=Kn.FetchXmlHttpFactory=js,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,gm=Kn.XhrIo=Ve}).apply(typeof Ul<"u"?Ul:typeof self<"u"?self:typeof window<"u"?window:{});var DT="@firebase/firestore";var Qe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");var gs="10.14.0";var Ar=new Zu("@firebase/firestore");function Ho(){return Ar.logLevel}function b0(n){Ar.setLogLevel(n)}function k(n,...e){if(Ar.logLevel<=hn.DEBUG){let t=e.map(Cv);Ar.debug(`Firestore (${gs}): ${n}`,...t)}}function He(n,...e){if(Ar.logLevel<=hn.ERROR){let t=e.map(Cv);Ar.error(`Firestore (${gs}): ${n}`,...t)}}function an(n,...e){if(Ar.logLevel<=hn.WARN){let t=e.map(Cv);Ar.warn(`Firestore (${gs}): ${n}`,...t)}}function Cv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${gs}) INTERNAL ASSERTION FAILED: `+n;throw He(e),new Error(e)}function z(n,e){n||H()}function S0(n,e){n||H()}function V(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends Sw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xe=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Jl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Tm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Qe.UNAUTHENTICATED))}shutdown(){}},bm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Sm=class{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){z(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xe,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xe)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(z(typeof r.accessToken=="string"),new Jl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return z(e===null||typeof e=="string"),new Qe(e)}},Am=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},xm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Am(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Rm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){z(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(z(typeof t.token=="string"),this.R=t.token,new Rm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function FO(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Xl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=FO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function Jo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function A0(n){return n+"\0"}var Fe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var G=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Fe(0,0))}static max(){return new n(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ed=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(),r===void 0?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},fe=class n extends ed{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},LO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qe=class n extends ed{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return LO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var j=class n{constructor(e){this.path=e}static fromPath(e){return new n(fe.fromString(e))}static fromName(e){return new n(fe.fromString(e).popFirst(5))}static empty(){return new n(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new fe(e.slice()))}};var Xo=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Nm(n){return n.fields.find(e=>e.kind===2)}function yi(n){return n.fields.filter(e=>e.kind!==2)}Xo.UNKNOWN_ID=-1;var Qo=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var nu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Qt.min())}};function x0(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=G.fromTimestamp(r===1e9?new Fe(t+1,0):new Fe(t,r));return new Qt(i,j.empty(),e)}function R0(n){return new Qt(n.readTime,n.key,-1)}var Qt=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(G.min(),j.empty(),-1)}static max(){return new n(G.max(),j.empty(),-1)}};function Tv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=j.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var M0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",td=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Vr(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==M0)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var nd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xe,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Di(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=bv(r.target.error);this.V.reject(new Di(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Di(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new km(t)}},xr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(qs())===12.2&&He("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),vi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Yu())return!1;if(n.v())return!0;let e=qs(),t=n.S(e),r=0<t&&t<10,i=N0(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Di(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Di(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=nd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function N0(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Pm=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return vi(this.B.delete())}},Di=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function jr(n){return n.name==="IndexedDbTransactionError"}var km=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),vi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),vi(this.store.add(e))}get(e){return vi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),vi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),vi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=bv(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Pm(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function vi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=bv(r.target.error);t(i)}})}var CT=!1;function bv(n){let e=xr.S(qs());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return CT||(CT=!0,setTimeout(()=>{throw r},0)),r}}return n}var Om=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){jr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Vr(t)}yield this.X(6e4)}))}},Fm=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=R0(o);Tv(s,r)>0&&(r=s)}),new Qt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Ft=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Du(n){return n==null}function ru(n){return n===0&&1/n==-1/0}function P0(n){return typeof n=="number"&&Number.isInteger(n)&&!ru(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Dt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TT(e)),e=VO(n.get(t),e);return TT(e)}function VO(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function TT(n){return n+""}function Dn(n){let e=n.length;if(z(e>=2),e===2)return z(n.charAt(0)===""&&n.charAt(1)===""),fe.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&H(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:H()}o=s+2}return new fe(r)}var bT=["userId","batchId"];function Wl(n,e){return[n,Dt(e)]}function k0(n,e,t){return[n,Dt(e),t]}var jO={},BO=["prefixPath","collectionGroup","readTime","documentId"],UO=["prefixPath","collectionGroup","documentId"],$O=["collectionGroup","readTime","prefixPath","documentId"],HO=["canonicalId","targetId"],qO=["targetId","path"],zO=["path","targetId"],GO=["collectionId","parent"],WO=["indexId","uid"],KO=["uid","sequenceNumber"],QO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YO=["indexId","uid","orderedDocumentKey"],ZO=["userId","collectionPath","documentId"],JO=["userId","collectionPath","largestBatchId"],XO=["userId","collectionGroup","largestBatchId"],O0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eF=[...O0,"documentOverlays"],F0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],L0=F0,Sv=[...L0,"indexConfiguration","indexState","indexEntries"],tF=Sv,nF=[...Sv,"globals"];var iu=class extends td{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function et(n,e){let t=V(n);return xr.F(t._e,e)}function ST(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Oi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function V0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Me=class n{constructor(e,t){this.comparator=e,this.root=t||Tn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}},Ko=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Tn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var be=class n{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(e){return new rd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},rd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function jo(n){return n.hasNext()?n.getNext():void 0}var Lt=class n{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new n([])}unionWith(e){let t=new be(qe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var id=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function j0(){return typeof atob<"u"}var Ge=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new id("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var rF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(n){if(z(!!n),typeof n=="string"){let e=0,t=rF.exec(n);if(z(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rr(n){return typeof n=="string"?Ge.fromBase64String(n):Ge.fromUint8Array(n)}function Qd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Av(n){let e=n.mapValue.fields.__previous_value__;return Qd(e)?Av(e):e}function ou(n){let e=Zn(n.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}var Lm=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Mr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kl={nullValue:"NULL_VALUE"};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qd(n)?4:B0(n)?9007199254740991:Yd(n)?10:11:H()}function An(n,e){if(n===e)return!0;let t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Zn(i.timestampValue),a=Zn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Rr(i.bytesValue).isEqual(Rr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ne(i.geoPointValue.latitude)===Ne(o.geoPointValue.latitude)&&Ne(i.geoPointValue.longitude)===Ne(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ne(i.integerValue)===Ne(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ne(i.doubleValue),a=Ne(o.doubleValue);return s===a?ru(s)===ru(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Jo(n.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ST(s)!==ST(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!An(s[c],a[c])))return!1;return!0}(n,e);default:return H()}}function su(n,e){return(n.values||[]).find(t=>An(t,e))!==void 0}function Nr(n,e){if(n===e)return 0;let t=Ci(n),r=Ci(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ne(o.integerValue||o.doubleValue),c=Ne(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return AT(n.timestampValue,e.timestampValue);case 4:return AT(ou(n),ou(e));case 5:return re(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Rr(o),c=Rr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=re(a[l],c[l]);if(h!==0)return h}return re(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ne(o.latitude),Ne(s.latitude));return a!==0?a:re(Ne(o.longitude),Ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=re(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:xT(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===br.mapValue&&s===br.mapValue)return 0;if(o===br.mapValue)return 1;if(s===br.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=re(c[p],h[p]);if(m!==0)return m;let v=Nr(a[c[p]],l[h[p]]);if(v!==0)return v}return re(c.length,h.length)}(n.mapValue,e.mapValue);default:throw H()}}function AT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=Zn(n),r=Zn(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function xT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Nr(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function es(n){return Vm(n)}function Vm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Zn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Rr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return j.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Vm(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Vm(t.fields[s])}`;return i+"}"}(n.mapValue):H()}function Ti(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jm(n){return!!n&&"integerValue"in n}function au(n){return!!n&&"arrayValue"in n}function RT(n){return!!n&&"nullValue"in n}function MT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ql(n){return!!n&&"mapValue"in n}function Yd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Za(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Oi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Za(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Za(n.arrayValue.values[t]);return e}return Object.assign({},n)}function B0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var U0={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function iF(n){return"nullValue"in n?Kl:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ti(Mr.empty(),j.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Yd(n)?U0:{mapValue:{}}:H()}function oF(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ti(Mr.empty(),j.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?U0:"mapValue"in n?Yd(n)?{mapValue:{}}:br:H()}function NT(n,e){let t=Nr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function PT(n,e){let t=Nr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var mt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ql(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(t)}setAll(e){let t=qe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Za(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ql(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ql(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Oi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Za(this.value))}};function $0(n){let e=[];return Oi(n.fields,(t,r)=>{let i=new qe([t]);if(Ql(r)){let o=$0(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Lt(e)}var Ye=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,G.min(),G.min(),G.min(),mt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,G.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,G.min(),G.min(),mt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,G.min(),G.min(),mt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(G.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xn=class{constructor(e,t){this.position=e,this.inclusive=t}};function kT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),t.key):r=Nr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function OT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!An(n.position[t],e.position[t]))return!1;return!0}var bi=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function sF(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var od=class{},ce=class n extends od{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new $m(e,t,r):t==="array-contains"?new zm(e,r):t==="in"?new sd(e,r):t==="not-in"?new Gm(e,r):t==="array-contains-any"?new Wm(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Hm(e,r):new qm(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Nr(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Nr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ee=class n extends od{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ts(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ts(n){return n.op==="and"}function Bm(n){return n.op==="or"}function xv(n){return H0(n)&&ts(n)}function H0(n){for(let e of n.filters)if(e instanceof Ee)return!1;return!0}function Um(n){if(n instanceof ce)return n.field.canonicalString()+n.op.toString()+es(n.value);if(xv(n))return n.filters.map(e=>Um(e)).join(",");{let e=n.filters.map(t=>Um(t)).join(",");return`${n.op}(${e})`}}function q0(n,e){return n instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)}(n,e):n instanceof Ee?function(r,i){return i instanceof Ee&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&q0(s,i.filters[a]),!0):!1}(n,e):void H()}function z0(n,e){let t=n.filters.concat(e);return Ee.create(t,n.op)}function G0(n){return n instanceof ce?function(t){return`${t.field.canonicalString()} ${t.op} ${es(t.value)}`}(n):n instanceof Ee?function(t){return t.op.toString()+" {"+t.getFilters().map(G0).join(" ,")+"}"}(n):"Filter"}var $m=class extends ce{constructor(e,t,r){super(e,t,r),this.key=j.fromName(r.referenceValue)}matches(e){let t=j.comparator(e.key,this.key);return this.matchesComparison(t)}},Hm=class extends ce{constructor(e,t){super(e,"in",t),this.keys=W0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},qm=class extends ce{constructor(e,t){super(e,"not-in",t),this.keys=W0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function W0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>j.fromName(r.referenceValue))}var zm=class extends ce{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return au(t)&&su(t.arrayValue,this.value)}},sd=class extends ce{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&su(this.value.arrayValue,t)}},Gm=class extends ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!su(this.value.arrayValue,t)}},Wm=class extends ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!au(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>su(this.value.arrayValue,r))}};var Km=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Qm(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Km(n,e,t,r,i,o,s)}function Si(n){let e=V(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Um(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Du(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>es(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>es(r)).join(",")),e.ue=t}return e.ue}function Cu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sF(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!q0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!OT(n.startAt,e.startAt)&&OT(n.endAt,e.endAt)}function ad(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ud(n,e){return n.filters.filter(t=>t instanceof ce&&t.field.isEqual(e))}function FT(n,e,t){let r=Kl,i=!0;for(let o of ud(n,e)){let s=Kl,a=!0;switch(o.op){case"<":case"<=":s=iF(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Kl}NT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];NT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function LT(n,e,t){let r=br,i=!0;for(let o of ud(n,e)){let s=br,a=!0;switch(o.op){case">=":case">":s=oF(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=br}PT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];PT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var un=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function K0(n,e,t,r,i,o,s,a){return new un(n,e,t,r,i,o,s,a)}function ms(n){return new un(n)}function VT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Rv(n){return n.collectionGroup!==null}function Yo(n){let e=V(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new be(qe.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new bi(o,r))}),t.has(qe.keyField().canonicalString())||e.ce.push(new bi(qe.keyField(),r))}return e.ce}function Ct(n){let e=V(n);return e.le||(e.le=aF(e,Yo(n))),e.le}function aF(n,e){if(n.limitType==="F")return Qm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new bi(i.field,o)});let t=n.endAt?new xn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xn(n.startAt.position,n.startAt.inclusive):null;return Qm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ym(n,e){let t=n.filters.concat([e]);return new un(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function cd(n,e,t){return new un(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tu(n,e){return Cu(Ct(n),Ct(e))&&n.limitType===e.limitType}function Q0(n){return`${Si(Ct(n))}|lt:${n.limitType}`}function qo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>G0(i)).join(", ")}]`),Du(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>es(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>es(i)).join(",")),`Target(${r})`}(Ct(n))}; limitType=${n.limitType})`}function bu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Yo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=kT(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Yo(r),i)||r.endAt&&!function(s,a,c){let l=kT(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Yo(r),i))}(n,e)}function Y0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Z0(n){return(e,t)=>{let r=!1;for(let i of Yo(n)){let o=uF(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function uF(n,e,t){let r=n.field.isKeyField()?j.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Nr(c,l):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}var Rn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return V0(this.inner)}size(){return this.innerSize}};var cF=new Me(j.comparator);function Rt(){return cF}var J0=new Me(j.comparator);function Qa(...n){let e=J0;for(let t of n)e=e.insert(t.key,t);return e}function X0(n){let e=J0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Cn(){return Ja()}function eb(){return Ja()}function Ja(){return new Rn(n=>n.toString(),(n,e)=>n.isEqual(e))}var lF=new Me(j.comparator),dF=new be(j.comparator);function ie(...n){let e=dF;for(let t of n)e=e.add(t);return e}var hF=new be(re);function Mv(){return hF}function Nv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function tb(n){return{integerValue:""+n}}function nb(n,e){return P0(e)?tb(e):Nv(n,e)}var ns=class{constructor(){this._=void 0}};function fF(n,e,t){return n instanceof Pr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Qd(o)&&(o=Av(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Jn?ib(n,e):n instanceof Xn?ob(n,e):function(i,o){let s=rb(i,o),a=jT(s)+jT(i.Pe);return jm(s)&&jm(i.Pe)?tb(a):Nv(i.serializer,a)}(n,e)}function pF(n,e,t){return n instanceof Jn?ib(n,e):n instanceof Xn?ob(n,e):t}function rb(n,e){return n instanceof kr?function(r){return jm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Pr=class extends ns{},Jn=class extends ns{constructor(e){super(),this.elements=e}};function ib(n,e){let t=sb(e);for(let r of n.elements)t.some(i=>An(i,r))||t.push(r);return{arrayValue:{values:t}}}var Xn=class extends ns{constructor(e){super(),this.elements=e}};function ob(n,e){let t=sb(e);for(let r of n.elements)t=t.filter(i=>!An(i,r));return{arrayValue:{values:t}}}var kr=class extends ns{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function jT(n){return Ne(n.integerValue||n.doubleValue)}function sb(n){return au(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ai=class{constructor(e,t){this.field=e,this.transform=t}};function gF(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Jn&&i instanceof Jn||r instanceof Xn&&i instanceof Xn?Jo(r.elements,i.elements,An):r instanceof kr&&i instanceof kr?An(r.Pe,i.Pe):r instanceof Pr&&i instanceof Pr}(n.transform,e.transform)}var Zm=class{constructor(e,t){this.version=e,this.transformResults=t}},Be=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Yl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var rs=class{};function ab(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Fr(n.key,Be.none()):new Or(n.key,n.data,Be.none());{let t=n.data,r=mt.empty(),i=new be(qe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new cn(n.key,r,new Lt(i.toArray()),Be.none())}}function mF(n,e,t){n instanceof Or?function(i,o,s){let a=i.value.clone(),c=UT(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof cn?function(i,o,s){if(!Yl(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=UT(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(ub(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Xa(n,e,t,r){return n instanceof Or?function(o,s,a,c){if(!Yl(o.precondition,s))return a;let l=o.value.clone(),h=$T(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof cn?function(o,s,a,c){if(!Yl(o.precondition,s))return a;let l=$T(o.fieldTransforms,c,s),h=s.data;return h.setAll(ub(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Yl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function yF(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=rb(r.transform,i||null);o!=null&&(t===null&&(t=mt.empty()),t.set(r.field,o))}return t||null}function BT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jo(r,i,(o,s)=>gF(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Or=class extends rs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},cn=class extends rs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ub(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function UT(n,e,t){let r=new Map;z(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,pF(s,a,t[i]))}return r}function $T(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,fF(o,s,e))}return r}var Fr=class extends rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},uu=class extends rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var cu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&mF(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xa(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Xa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=eb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=ab(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(G.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&Jo(this.mutations,e.mutations,(t,r)=>BT(t,r))&&Jo(this.baseMutations,e.baseMutations,(t,r)=>BT(t,r))}},Jm=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){z(e.mutations.length===r.length);let i=function(){return lF}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var lu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Xm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var We,he;function cb(n){switch(n){default:return H();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function lb(n){if(n===void 0)return He("GRPC error has no .code"),x.UNKNOWN;switch(n){case We.OK:return x.OK;case We.CANCELLED:return x.CANCELLED;case We.UNKNOWN:return x.UNKNOWN;case We.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case We.INTERNAL:return x.INTERNAL;case We.UNAVAILABLE:return x.UNAVAILABLE;case We.UNAUTHENTICATED:return x.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case We.NOT_FOUND:return x.NOT_FOUND;case We.ALREADY_EXISTS:return x.ALREADY_EXISTS;case We.PERMISSION_DENIED:return x.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case We.ABORTED:return x.ABORTED;case We.OUT_OF_RANGE:return x.OUT_OF_RANGE;case We.UNIMPLEMENTED:return x.UNIMPLEMENTED;case We.DATA_LOSS:return x.DATA_LOSS;default:return H()}}(he=We||(We={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var HT=null;function db(){return new TextEncoder}var vF=new Ir([4294967295,4294967295],0);function qT(n){let e=db().encode(n),t=new pm;return t.update(e),new Uint8Array(t.digest())}function zT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ir([t,r],0),new Ir([i,o],0)]}var ey=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ei(`Invalid padding: ${t}`);if(r<0)throw new Ei(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ei(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ei(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ir.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Ir.fromNumber(r)));return i.compare(vF)===1&&(i=new Ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=qT(e),[r,i]=zT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=qT(e),[r,i]=zT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ei=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var du=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(G.min(),i,new Me(re),Rt(),ie())}},hu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ie(),ie(),ie())}};var Zo=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},ld=class{constructor(e,t){this.targetId=e,this.me=t}},dd=class{constructor(e,t,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},hd=class{constructor(){this.fe=0,this.ge=WT(),this.pe=Ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),t=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new hu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=WT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,z(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ty=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rt(),this.qe=GT(),this.Qe=new Me(re)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(ad(o))if(r===0){let s=new j(o.path);this.Ue(t,s,Ye.newNoDocument(s,G.min()))}else z(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}HT?.et(function(h,p,m,v,b){var M,N,L,$,O,K;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Q=p.unchangedNames;return Q&&(ee.bloomFilter={applied:b===0,hashCount:(M=Q?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:($=(L=(N=Q?.bits)===null||N===void 0?void 0:N.bitmap)===null||L===void 0?void 0:L.length)!==null&&$!==void 0?$:0,padding:(K=(O=Q?.bits)===null||O===void 0?void 0:O.padding)!==null&&K!==void 0?K:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Rr(r).toUint8Array()}catch(c){if(c instanceof id)return an("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ey(s,i,o)}catch(c){return an(c instanceof Ei?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ad(a.target)){let c=new j(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Ye.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new du(e,t,this.Qe,this.ke,r);return this.ke=Rt(),this.qe=GT(),this.Qe=new Me(re),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new hd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new be(re),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new hd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function GT(){return new Me(j.comparator)}function WT(){return new Me(j.comparator)}var _F={asc:"ASCENDING",desc:"DESCENDING"},wF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IF={and:"AND",or:"OR"},ny=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ry(n,e){return n.useProto3Json||Du(e)?e:{value:e}}function is(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EF(n,e){return is(n,e.toTimestamp())}function ze(n){return z(!!n),G.fromTimestamp(function(t){let r=Zn(t);return new Fe(r.seconds,r.nanos)}(n))}function Pv(n,e){return iy(n,e).canonicalString()}function iy(n,e){let t=function(i){return new fe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function fb(n){let e=fe.fromString(n);return z(Db(e)),e}function fu(n,e){return Pv(n.databaseId,e.path)}function bn(n,e){let t=fb(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new j(mb(t))}function pb(n,e){return Pv(n.databaseId,e)}function gb(n){let e=fb(n);return e.length===4?fe.emptyPath():mb(e)}function oy(n){return new fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mb(n){return z(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function KT(n,e,t){return{name:fu(n,e),fields:t.value.mapValue.fields}}function yb(n,e,t){let r=bn(n,e.name),i=ze(e.updateTime),o=e.createTime?ze(e.createTime):G.min(),s=new mt({mapValue:{fields:e.fields}}),a=Ye.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function DF(n,e){return"found"in e?function(r,i){z(!!i.found),i.found.name,i.found.updateTime;let o=bn(r,i.found.name),s=ze(i.found.updateTime),a=i.found.createTime?ze(i.found.createTime):G.min(),c=new mt({mapValue:{fields:i.found.fields}});return Ye.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){z(!!i.missing),z(!!i.readTime);let o=bn(r,i.missing),s=ze(i.readTime);return Ye.newNoDocument(o,s)}(n,e):H()}function CF(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(z(h===void 0||typeof h=="string"),Ge.fromBase64String(h||"")):(z(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ge.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:lb(l.code);return new P(h,l.message||"")}(s);t=new dd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=bn(n,r.document.name),o=ze(r.document.updateTime),s=r.document.createTime?ze(r.document.createTime):G.min(),a=new mt({mapValue:{fields:r.document.fields}}),c=Ye.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Zo(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=bn(n,r.document),o=r.readTime?ze(r.readTime):G.min(),s=Ye.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Zo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=bn(n,r.document),o=r.removedTargetIds||[];t=new Zo([],o,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Xm(i,o),a=r.targetId;t=new ld(a,s)}}return t}function pu(n,e){let t;if(e instanceof Or)t={update:KT(n,e.key,e.value)};else if(e instanceof Fr)t={delete:fu(n,e.key)};else if(e instanceof cn)t={update:KT(n,e.key,e.data),updateMask:RF(e.fieldMask)};else{if(!(e instanceof uu))return H();t={verify:fu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Pr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:EF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H()}(n,e.precondition)),t}function sy(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Be.updateTime(ze(o.updateTime)):o.exists!==void 0?Be.exists(o.exists):Be.none()}(e.currentDocument):Be.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)z(a.setToServerValue==="REQUEST_TIME"),c=new Pr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new Jn(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new Xn(h)}else"increment"in a?c=new kr(s,a.increment):H();let l=qe.fromServerFormat(a.fieldPath);return new Ai(l,c)}(n,i)):[];if(e.update){e.update.name;let i=bn(n,e.update.name),o=new mt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Lt(l.map(h=>qe.fromServerFormat(h)))}(e.updateMask);return new cn(i,o,s,t,r)}return new Or(i,o,t,r)}if(e.delete){let i=bn(n,e.delete);return new Fr(i,t)}if(e.verify){let i=bn(n,e.verify);return new uu(i,t)}return H()}function TF(n,e){return n&&n.length>0?(z(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ze(i.updateTime):ze(o);return s.isEqual(G.min())&&(s=ze(o)),new Zm(s,i.transformResults||[])}(t,e))):[]}function vb(n,e){return{documents:[pb(n,e.path)]}}function _b(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=pb(n,i);let o=function(l){if(l.length!==0)return Eb(Ee.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:zo(m.field),direction:SF(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=ry(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function wb(n){let e=gb(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){z(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=Ib(p);return m instanceof Ee&&xv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new bi(Go(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Du(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new xn(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new xn(v,m)}(t.endAt)),K0(e,i,s,o,a,"F",c,l)}function bF(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ib(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Go(t.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Go(t.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Go(t.unaryFilter.field);return ce.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Go(t.unaryFilter.field);return ce.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return ce.create(Go(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ee.create(t.compositeFilter.filters.map(r=>Ib(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function SF(n){return _F[n]}function AF(n){return wF[n]}function xF(n){return IF[n]}function zo(n){return{fieldPath:n.canonicalString()}}function Go(n){return qe.fromServerFormat(n.fieldPath)}function Eb(n){return n instanceof ce?function(t){if(t.op==="=="){if(MT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NAN"}};if(RT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NAN"}};if(RT(t.value))return{unaryFilter:{field:zo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(t.field),op:AF(t.op),value:t.value}}}(n):n instanceof Ee?function(t){let r=t.getFilters().map(i=>Eb(i));return r.length===1?r[0]:{compositeFilter:{op:xF(t.op),filters:r}}}(n):H()}function RF(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Db(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var os=class n{constructor(e,t,r,i,o=G.min(),s=G.min(),a=Ge.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var fd=class{constructor(e){this.ct=e}};function MF(n,e){let t;if(e.document)t=yb(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=j.fromSegments(e.noDocument.path),i=Ri(e.noDocument.readTime);t=Ye.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{let r=j.fromSegments(e.unknownDocument.path),i=Ri(e.unknownDocument.version);t=Ye.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Fe(i[0],i[1]);return G.fromTimestamp(o)}(e.readTime)),t}function QT(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:fu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:is(o,s.version.toTimestamp()),createTime:is(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:xi(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:t.path.toArray(),version:xi(e.version)}}return r}function pd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function xi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ri(n){let e=new Fe(n.seconds,n.nanoseconds);return G.fromTimestamp(e)}function _i(n,e){let t=(e.baseMutations||[]).map(o=>sy(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>sy(n.ct,o)),i=Fe.fromMillis(e.localWriteTimeMs);return new cu(e.batchId,i,t,r)}function Ya(n){let e=Ri(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ri(n.lastLimboFreeSnapshotVersion):G.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return z(o.documents.length===1),Ct(ms(gb(o.documents[0])))}(n.query):function(o){return Ct(wb(o))}(n.query),new os(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ge.fromBase64String(n.resumeToken))}function Cb(n,e){let t=xi(e.snapshotVersion),r=xi(e.lastLimboFreeSnapshotVersion),i;i=ad(e.target)?vb(n.ct,e.target):_b(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Si(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kv(n){let e=wb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?cd(e,e.limit,"L"):e}function wm(n,e){return new lu(e.largestBatchId,sy(n.ct,e.overlayMutation))}function YT(n,e){let t=e.path.lastSegment();return[n,Dt(e.path.popLast()),t]}function ZT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:xi(r.readTime),documentKey:Dt(r.documentKey.path),largestBatchId:r.largestBatchId}}var ay=class{getBundleMetadata(e,t){return JT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ri(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return JT(e).put(function(i){return{bundleId:i.id,createTime:xi(ze(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return XT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:kv(o.bundledQuery),readTime:Ri(o.readTime)}}(r)})}saveNamedQuery(e,t){return XT(e).put(function(i){return{name:i.name,readTime:xi(ze(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function JT(n){return et(n,"bundles")}function XT(n){return et(n,"namedQueries")}var gd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return za(e).get(YT(this.userId,t)).next(r=>r?wm(this.serializer,r):null)}getOverlays(e,t){let r=Cn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new lu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Dt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(za(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Cn(),o=Dt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return za(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=wm(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Cn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return za(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=wm(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return za(e).put(function(i,o,s){let[a,c,l]=YT(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pu(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function za(n){return et(n,"documentOverlays")}var uy=class{Pt(e){return et(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ge.fromUint8Array(r):Ge.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Qn=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ne(e.integerValue));else if("doubleValue"in e){let r=Ne(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ru(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Zn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Rr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?B0(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Yd(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Ne(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),j.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Qn.vt=new Qn;function NF(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function e0(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=NF(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var cy=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=e0(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=e0(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},ly=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},dy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},wi=class{constructor(){this.jt=new cy,this.Ht=new ly(this.jt),this.Jt=new dy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ii=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Er(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=t0(n.arrayValue,e.arrayValue),t!==0?t:(t=t0(n.directionalValue,e.directionalValue),t!==0?t:j.comparator(n.documentKey,e.documentKey)))}function t0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var md=class{constructor(e){this.Xt=new be((t,r)=>qe.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(z(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Nm(e);if(t!==void 0&&!this.sn(t))return!1;let r=yi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new be(qe.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Qo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Qo(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Qo(r.field,r.dir==="asc"?0:1)));return new Xo(Xo.UNKNOWN_ID,this.collectionId,t,nu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Tb(n){var e,t;if(z(n instanceof ce||n instanceof Ee),n instanceof ce){if(n instanceof sd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>ce.create(n.field,"==",o)))||[];return Ee.create(i,"or")}return n}let r=n.filters.map(i=>Tb(i));return Ee.create(r,n.op)}function PF(n){if(n.getFilters().length===0)return[];let e=py(Tb(n));return z(bb(e)),hy(e)||fy(e)?[e]:e.getFilters()}function hy(n){return n instanceof ce}function fy(n){return n instanceof Ee&&xv(n)}function bb(n){return hy(n)||fy(n)||function(t){if(t instanceof Ee&&Bm(t)){for(let r of t.getFilters())if(!hy(r)&&!fy(r))return!1;return!0}return!1}(n)}function py(n){if(z(n instanceof ce||n instanceof Ee),n instanceof ce)return n;if(n.filters.length===1)return py(n.filters[0]);let e=n.filters.map(r=>py(r)),t=Ee.create(e,n.op);return t=yd(t),bb(t)?t:(z(t instanceof Ee),z(ts(t)),z(t.filters.length>1),t.filters.reduce((r,i)=>Ov(r,i)))}function Ov(n,e){let t;return z(n instanceof ce||n instanceof Ee),z(e instanceof ce||e instanceof Ee),t=n instanceof ce?e instanceof ce?function(i,o){return Ee.create([i,o],"and")}(n,e):n0(n,e):e instanceof ce?n0(e,n):function(i,o){if(z(i.filters.length>0&&o.filters.length>0),ts(i)&&ts(o))return z0(i,o.getFilters());let s=Bm(i)?i:o,a=Bm(i)?o:i,c=s.filters.map(l=>Ov(l,a));return Ee.create(c,"or")}(n,e),yd(t)}function n0(n,e){if(ts(e))return z0(e,n.getFilters());{let t=e.filters.map(r=>Ov(n,r));return Ee.create(t,"or")}}function yd(n){if(z(n instanceof ce||n instanceof Ee),n instanceof ce)return n;let e=n.getFilters();if(e.length===1)return yd(e[0]);if(H0(n))return n;let t=e.map(i=>yd(i)),r=[];return t.forEach(i=>{i instanceof ce?r.push(i):i instanceof Ee&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ee.create(r,n.op)}var gy=class{constructor(){this.un=new gu}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Qt.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Qt.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},gu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new be(fe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new be(fe.comparator)).toArray()}};var Hl=new Uint8Array(0),my=class{constructor(e,t){this.databaseId=t,this.cn=new gu,this.ln=new Rn(r=>Si(r),(r,i)=>Cu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Dt(i)};return r0(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[A0(t),""],!1,!0);return r0(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Dn(s.parent))}return r})}addFieldIndex(e,t){let r=Ga(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=Uo(e);return o.next(a=>{s.put(ZT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=Ga(e),i=Uo(e),o=Bo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Ga(e),r=Bo(e),i=Uo(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new md(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Bo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${Si(t)}`);let h=function(O,K){let ee=Nm(K);if(ee===void 0)return null;for(let Q of ud(O,ee.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,c),p=function(O,K){let ee=new Map;for(let Q of yi(K))for(let I of ud(O,Q.fieldPath))switch(I.op){case"==":case"in":ee.set(Q.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Q.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,c),m=function(O,K){let ee=[],Q=!0;for(let I of yi(K)){let y=I.kind===0?FT(O,I.fieldPath,O.startAt):LT(O,I.fieldPath,O.startAt);ee.push(y.value),Q&&(Q=y.inclusive)}return new xn(ee,Q)}(l,c),v=function(O,K){let ee=[],Q=!0;for(let I of yi(K)){let y=I.kind===0?LT(O,I.fieldPath,O.endAt):FT(O,I.fieldPath,O.endAt);ee.push(y.value),Q&&(Q=y.inclusive)}return new xn(ee,Q)}(l,c),b=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),L=this.En(c.indexId,h,b,m.inclusive,M,v.inclusive,N);return S.forEach(L,$=>r.G($,t.limit).next(O=>{O.forEach(K=>{let ee=j.fromSegments(K.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=PF(Ee.create(e.filters,"and")).map(r=>Qm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):Hl,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,M))}return h}An(e,t,r,i){let o=new Ii(e,j.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Ii(e,j.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new md(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new be(qe.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new wi;for(let i of yi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Qn.vt.It(o,s)}return r.zt()}dn(e){let t=new wi;return Qn.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new wi;return Qn.vt.It(Ti(this.databaseId,t),r.Yt(function(o){let s=yi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new wi);let o=0;for(let s of yi(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&au(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);Qn.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new wi;c.seed(a.zt()),Qn.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof ce&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Ga(e),i=Uo(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new nu(p.sequenceNumber,new Qt(Ri(p.readTime),new j(Dn(p.documentKey)),p.largestBatchId)):nu.empty(),v=h.fields.map(([b,M])=>new Qo(qe.fromServerFormat(b),M));return new Xo(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Ga(e),o=Uo(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(ZT(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Bo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Bo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Bo(e),o=new be(Er);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Ii(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new be(Er),i=this.Vn(t,e);if(i==null)return r;let o=Nm(t);if(o!=null){let s=e.data.field(o.fieldPath);if(au(s))for(let a of s.arrayValue.values||[])r=r.add(new Ii(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ii(t.indexId,e.key,Hl,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),b=l.getIterator(),M=jo(v),N=jo(b);for(;M||N;){let L=!1,$=!1;if(M&&N){let O=h(M,N);O<0?$=!0:O>0&&(L=!0)}else M!=null?$=!0:L=!0;L?(p(N),N=jo(b)):$?(m(M),M=jo(v)):(M=jo(v),N=jo(b))}}(i,o,Er,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return Uo(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Er(s,a)).filter((s,a,c)=>!a||Er(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Er(s,e),c=Er(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Hl,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Hl,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Er(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(i0)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||H())).next(i0)}};function r0(n){return et(n,"collectionParents")}function Bo(n){return et(n,"indexEntries")}function Ga(n){return et(n,"indexConfiguration")}function Uo(n){return et(n,"indexState")}function i0(n){z(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Tv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Qt(e.readTime,e.documentKey,t)}var o0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Sb(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{z(a===1)}));let l=[];for(let h of t.mutations){let p=k0(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function vd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw H();e=n.noDocument}return JSON.stringify(e).length}Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(41943040,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);var _d=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){z(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Wo(e),s=Dr(e);return s.add({}).next(a=>{z(typeof a=="number");let c=new cu(a,t,r,i),l=function(v,b,M){let N=M.baseMutations.map($=>pu(v.ct,$)),L=M.mutations.map($=>pu(v.ct,$));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:L}}(this.serializer,this.userId,c),h=[],p=new be((m,v)=>re(m.canonicalString(),v.canonicalString()));for(let m of i){let v=k0(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,jO))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Dr(e).get(t).next(r=>r?(z(r.userId===this.userId),_i(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Dr(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(z(a.batchId>=r),o=_i(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Dr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dr(e).U("userMutationsIndex",t).next(r=>r.map(i=>_i(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Wl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Wo(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Dn(h);if(l===this.userId&&t.path.isEqual(m))return Dr(e).get(p).next(v=>{if(!v)throw H();z(v.userId===this.userId),o.push(_i(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new be(re),i=[];return t.forEach(o=>{let s=Wl(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Wo(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,M=Dn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Wl(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new be(re);return Wo(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,b=Dn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Dr(e).get(o).next(s=>{if(s===null)throw H();z(s.userId===this.userId),r.push(_i(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sb(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Wo(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Dn(o[1]);i.push(c)}else a.done()}).next(()=>{z(i.length===0)})})}containsKey(e,t){return Ab(e,this.userId,t)}Nn(e){return xb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Ab(n,e,t){let r=Wl(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Wo(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Dr(n){return et(n,"mutations")}function Wo(n){return et(n,"documentMutations")}function xb(n){return et(n,"mutationQueues")}var ss=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var yy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ss(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>G.fromTimestamp(new Fe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$o(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(z(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return $o(e).J((s,a)=>{let c=Ya(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return $o(e).J((r,i)=>{let o=Ya(i);t(o)})}qn(e){return s0(e).get("targetGlobalKey").next(t=>(z(t!==null),t))}Qn(e,t){return s0(e).put("targetGlobalKey",t)}Kn(e,t){return $o(e).put(Cb(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Si(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return $o(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=Ya(a);Cu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Cr(e);return t.forEach(s=>{let a=Dt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Cr(e);return S.forEach(t,o=>{let s=Dt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Cr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Cr(e),o=ie();return i.J({range:r,H:!0},(s,a,c)=>{let l=Dn(s[1]),h=new j(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Dt(t.path),i=IDBKeyRange.bound([r],[A0(r)],!1,!0),o=0;return Cr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return $o(e).get(t).next(r=>r?Ya(r):null)}};function $o(n){return et(n,"targets")}function s0(n){return et(n,"targetGlobal")}function Cr(n){return et(n,"targetDocuments")}function a0([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var vy=class{constructor(e){this.Un=e,this.buffer=new be(a0),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();a0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},_y=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){jr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Vr(t)}yield this.Hn(3e5)}))}},wy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Ft.oe);let r=new vy(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(o0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),o0):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Ho()<=hn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function kF(n,e){return new wy(n,e)}var Iy=class{constructor(e,t){this.db=e,this.garbageCollector=kF(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return ql(e,r)}removeReference(e,t,r){return ql(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ql(e,t)}nr(e,t){return function(i,o){let s=!1;return xb(i).Y(a=>Ab(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,G.min()),Cr(e).delete(function(p){return[0,Dt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ql(e,t)}tr(e,t){let r=Cr(e),i,o=Ft.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Ft.oe&&t(new j(Dn(i)),o),o=l,i=c):o=Ft.oe}).next(()=>{o!==Ft.oe&&t(new j(Dn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function ql(n,e){return Cr(n).put(function(r,i){return{targetId:0,path:Dt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var wd=class{constructor(){this.changes=new Rn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ye.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ey=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mi(e).put(r)}removeEntry(e,t,r){return mi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],pd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Ye.newInvalidDocument(t);return mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wa(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:Ye.newInvalidDocument(t)};return mi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wa(t))},(i,o)=>{r={document:this.ir(t,o),size:vd(o)}}).next(()=>r)}getEntries(e,t){let r=Rt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Rt(),i=new Me(j.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,vd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new be(l0);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(Wa(i.first()),Wa(i.last())),s=i.getIterator(),a=s.getNext();return mi(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=j.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&l0(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(Wa(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),pd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Rt();for(let p of l){let m=this.ir(j.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(bu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Rt(),s=c0(t,r),a=c0(t,Qt.max());return mi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir(j.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Dy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return u0(e).get("remoteDocumentGlobalKey").next(t=>(z(!!t),t))}rr(e,t){return u0(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=MF(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(G.min())))return r}return Ye.newInvalidDocument(e)}};function Rb(n){return new Ey(n)}var Dy=class extends wd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Rn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new be((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=QT(this.cr.serializer,s);i=i.add(o.path.popLast());let l=vd(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=QT(this.cr.serializer,s.convertToNoDocument(G.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function u0(n){return et(n,"remoteDocumentGlobal")}function mi(n){return et(n,"remoteDocumentsV14")}function Wa(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function c0(n,e){let t=e.documentKey.path.toArray();return[n,pd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function l0(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=re(t[o],r[o]),i)return i;return i=re(t.length,r.length),i||(i=re(t[t.length-2],r[r.length-2]),i||re(t[t.length-1],r[r.length-1]))}var Cy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Id=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xa(r.mutation,i,Lt.empty(),Fe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ie()){let i=Cn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Qa();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Cn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Rt(),s=Ja(),a=function(){return Ja()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof cn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Xa(h.mutation,l,h.mutation.getFieldMask(),Fe.now())):s.set(l.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Cy(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ja(),i=new Me((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Lt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ie()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=eb();h.forEach(m=>{if(!o.has(m)){let v=ab(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Cn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ie())).next(h=>({batchId:a,changes:X0(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new j(t)).next(r=>{let i=Qa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Qa();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new un(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Ye.newInvalidDocument(h)))});let a=Qa();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&Xa(h.mutation,l,Lt.empty(),Fe.now()),bu(t,l)&&(a=a.insert(c,l))}),a})}};var Ty=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ze(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:kv(i.bundledQuery),readTime:ze(i.readTime)}}(t)),S.resolve()}};var by=class{constructor(){this.overlays=new Me(j.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Cn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Cn(),o=t.length+1,s=new j(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Cn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Cn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new lu(t,r));let o=this.Ir.get(t);o===void 0&&(o=ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Sy=class{constructor(){this.sessionToken=Ge.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var mu=class{constructor(){this.Tr=new be(Ke.Er),this.dr=new be(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ke(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ke(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new j(new fe([])),r=new Ke(t,e),i=new Ke(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new j(new fe([])),r=new Ke(t,e),i=new Ke(t,e+1),o=ie();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ke(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ke=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return j.comparator(e.key,t.key)||re(e.wr,t.wr)}static Ar(e,t){return re(e.wr,t.wr)||j.comparator(e.key,t.key)}};var Ay=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new be(Ke.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new cu(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ke(t,0),i=new Ke(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new be(re);return t.forEach(i=>{let o=new Ke(i,0),s=new Ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let s=new Ke(new j(o),0),a=new be(re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){z(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Ke(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ke(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xy=class{constructor(e){this.Mr=e,this.docs=function(){return new Me(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():Ye.newInvalidDocument(t))}getEntries(e,t){let r=Rt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ye.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Rt(),s=t.path,a=new j(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Tv(R0(h),r)<=0||(i.has(h.key)||bu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){H()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ry(this)}getSize(e){return S.resolve(this.size)}},Ry=class extends wd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var My=class{constructor(e){this.persistence=e,this.Nr=new Rn(t=>Si(t),Cu),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mu,this.targetCount=0,this.kr=ss.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ss(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Ed=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Ft(0),this.Kr=!1,this.Kr=!0,this.$r=new Sy,this.referenceDelegate=e(this),this.Ur=new My(this),this.indexManager=new gy,this.remoteDocumentCache=function(i){return new xy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new fd(t),this.Gr=new Ty(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new by,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Ay(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Ny(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Ny=class extends td{constructor(e){super(),this.currentSequenceNumber=e}},Dd=class n{constructor(e){this.persistence=e,this.Jr=new mu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=j.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,G.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Py=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new nd("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bT,{unique:!0}),c.createObjectStore("documentMutations")}(e),d0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),d0(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:G.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:ZO});l.createIndex("collectionPathOverlayIndex",JO,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",XO,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:BO});l.createIndex("documentKeyIndex",UO),l.createIndex("collectionGroupIndex",$O)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:WO}).createIndex("sequenceNumberIndex",KO,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:QO}).createIndex("documentKeyIndex",YO,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=vd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{z(c.userId===o.userId);let l=_i(this.serializer,c);return Sb(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new fe(s),l=function(p){return[0,Dt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Dt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:GO});let r=t.store("collectionParents"),i=new gu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Dt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new fe(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Dn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=Ya(i),s=Cb(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new j(fe.fromString(p.document.name).popFirst(5)):p.noDocument?j.fromSegments(p.noDocument.path):p.unknownDocument?j.fromSegments(p.unknownDocument.path):H()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=Rb(this.serializer),o=new Ed(Dd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ie();_i(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new Qe(l),p=gd.lt(this.serializer,h),m=o.getIndexManager(h),v=_d.lt(h,this.serializer,m,o.referenceDelegate);return new Id(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new iu(t,Ft.oe),c).next()})})}};function d0(n){n.createObjectStore("targetDocuments",{keyPath:qO}).createIndex("documentTargetsIndex",zO,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",HO,{unique:!0}),n.createObjectStore("targetGlobal")}var Im="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ky=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Iy(this,i),this.Ai=t+"main",this.serializer=new fd(c),this.Ri=new xr(this.Ai,this.hi,new Py(this.serializer)),this.$r=new uy,this.Ur=new yy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rb(this.serializer),this.Gr=new ay,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&He("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Im);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Ft(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(jr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Ka(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return zl(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=et(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):Ka(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Im);return!1}}return!(!this.networkEnabled||!this.inForeground)||zl(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new iu(e,Ft.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zl(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return _d.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new my(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return gd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?nF:c===16?tF:c===15?Sv:c===14?L0:c===13?F0:c===12?eF:c===11?O0:void H()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new iu(a,this.Qr?this.Qr.next():Ft.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw He(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,M0);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return Ka(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Im)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ka(e).put("owner",t)}static D(){return xr.D()}bi(e){let t=Ka(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(He(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Qh()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return He("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){He("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ka(n){return et(n,"owner")}function zl(n){return et(n,"clientMetadata")}function Fv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Oy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ie(),i=ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Fy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Cd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Qh()?8:N0(qs())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Fy;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ho()<=hn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",qo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Ho()<=hn.DEBUG&&k("QueryEngine","Query:",qo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ho()<=hn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",qo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ct(t))):S.resolve())}Yi(e,t){if(VT(t))return S.resolve(null);let r=Ct(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=cd(t,null,"F"),r=Ct(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,cd(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return VT(t)||i.isEqual(G.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Ho()<=hn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qo(t)),this.rs(e,s,t,x0(i,-1)).next(a=>a))})}ts(e,t){let r=new be(Z0(e));return t.forEach((i,o)=>{bu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Ho()<=hn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",qo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Qt.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Ly=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Me(re),this._s=new Rn(o=>Si(o),Cu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Id(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Mb(n,e,t,r){return new Ly(n,e,t,r)}function Nb(n,e){return R(this,null,function*(){let t=V(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function OF(n,e){let t=V(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(M=>{let N=l.docVersions.get(b);z(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Pb(n){let e=V(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function FF(n,e){let t=V(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ge.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,L){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Rt(),l=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(kb(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(G.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function kb(n,e,t){let r=ie(),i=ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Rt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(G.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function LF(n,e){let t=V(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function as(n,e){let t=V(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new os(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function us(n,e,t){return R(this,null,function*(){let r=V(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!jr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Td(n,e,t){let r=V(n),i=G.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=V(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Ct(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:G.min(),t?o:ie())).next(a=>(Lb(r,Y0(e),a),{documents:a,Ts:o})))}function Ob(n,e){let t=V(n),r=V(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function Fb(n,e){let t=V(n),r=t.us.get(e)||G.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,x0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Lb(t,e,i),i))}function Lb(n,e,t){let r=n.us.get(e)||G.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function VF(n,e,t,r){return R(this,null,function*(){let i=V(n),o=ie(),s=Rt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield as(i,function(h){return Ct(ms(fe.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>kb(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function jF(r,i){return R(this,arguments,function*(n,e,t=ie()){let o=yield as(n,Ct(kv(e.bundledQuery))),s=V(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=ze(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ge.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function h0(n,e){return`firestore_clients_${n}_${e}`}function f0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Em(n,e){return`firestore_targets_${n}_${e}`}var bd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(He("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},eu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(He("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Sd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Mv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=P0(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(He("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},Vy=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(He("SharedClientState",`Failed to parse online state: ${e}`),null)}},yu=class{constructor(){this.activeTargetIds=Mv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},tu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Me(re),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=h0(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new yu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(h0(this.persistenceKey,r));if(i){let o=Sd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Em(this.persistenceKey,e));if(i){let o=eu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Em(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void He("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Ft.oe;if(o!=null)try{let a=JSON.parse(o);z(typeof a=="number"),s=a}catch(a){He("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Ft.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new bd(this.currentUser,e,t,r),o=f0(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=f0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Em(this.persistenceKey,e),o=new eu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Sd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return bd.Rs(new Qe(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return eu.Rs(i,t)}Ls(e){return Vy.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Mv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Ad=class{constructor(){this.so=new yu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var jy=class{_o(e){}shutdown(){}};var xd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Gl=null;function Dm(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}var BF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var By=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var gt="WebChannelConnection",Uy=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Dm(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw an("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=BF[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Dm();return new Promise((s,a)=>{let c=new gm;c.setWithCredentials(!0),c.listenOnce(mm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qa.NO_ERROR:let h=c.getResponseJson();k(gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case qa.TIMEOUT:k(gt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case qa.HTTP_ERROR:let p=c.getStatus();if(k(gt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let L=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(L)>=0?L:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{k(gt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(gt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Dm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_m(),a=vm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(gt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,b=new By({Io:N=>{v?k(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(gt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,L,$)=>{N.listen(L,O=>{try{$(O)}catch(K){setTimeout(()=>{throw K},0)}})};return M(p,Vo.EventType.OPEN,()=>{v||(k(gt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),M(p,Vo.EventType.CLOSE,()=>{v||(v=!0,k(gt,`RPC '${e}' stream ${i} transport closed`),b.So())}),M(p,Vo.EventType.ERROR,N=>{v||(v=!0,an(gt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,Vo.EventType.MESSAGE,N=>{var L;if(!v){let $=N.data[0];z(!!$);let O=$,K=O.error||((L=O[0])===null||L===void 0?void 0:L.error);if(K){k(gt,`RPC '${e}' stream ${i} received error:`,K);let ee=K.status,Q=function(w){let E=We[w];if(E!==void 0)return lb(E)}(ee),I=K.message;Q===void 0&&(Q=x.INTERNAL,I="Unknown error status: "+ee+" with message "+K.message),v=!0,b.So(new P(Q,I)),p.close()}else k(gt,`RPC '${e}' stream ${i} received:`,$),b.bo($)}}),M(a,ym.STAT_EVENT,N=>{N.stat===$l.PROXY?k(gt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===$l.NOPROXY&&k(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function Vb(){return typeof window<"u"?window:null}function Zl(){return typeof document<"u"?document:null}function Su(n){return new ny(n,!0)}var vu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Rd=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(He(t.toString()),He("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},$y=class extends Rd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=CF(this.serializer,e),r=function(o){if(!("targetChange"in o))return G.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?G.min():s.readTime?ze(s.readTime):G.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=oy(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=ad(c)?{documents:vb(o,c)}:{query:_b(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=hb(o,s.resumeToken);let l=ry(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(G.min())>0){a.readTime=is(o,s.snapshotVersion.toTimestamp());let l=ry(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=bF(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=oy(this.serializer),t.removeTarget=e,this.a_(t)}},Hy=class extends Rd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return z(!!e.streamToken),this.lastStreamToken=e.streamToken,z(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){z(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=TF(e.writeResults,e.commitTime),r=ze(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=oy(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>pu(this.serializer,r))};this.a_(t)}};var qy=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,iy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,iy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},zy=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(He(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Gy=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Br(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=V(c);l.L_.add(4),yield ys(l),l.q_.set("Unknown"),l.L_.delete(4),yield Au(l)})}(this))}))}),this.q_=new zy(r,i)}};function Au(n){return R(this,null,function*(){if(Br(n))for(let e of n.B_)yield e(!0)})}function ys(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Zd(n,e){let t=V(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),jv(t)?Vv(t):_s(t).r_()&&Lv(t,e))}function cs(n,e){let t=V(n),r=_s(t);t.N_.delete(e),r.r_()&&jb(t,e),t.N_.size===0&&(r.r_()?r.o_():Br(t)&&t.q_.set("Unknown"))}function Lv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(G.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_s(n).A_(e)}function jb(n,e){n.Q_.xe(e),_s(n).R_(e)}function Vv(n){n.Q_=new ty({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),_s(n).start(),n.q_.v_()}function jv(n){return Br(n)&&!_s(n).n_()&&n.N_.size>0}function Br(n){return V(n).L_.size===0}function Bb(n){n.Q_=void 0}function UF(n){return R(this,null,function*(){n.q_.set("Online")})}function $F(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{Lv(n,e)})})}function HF(n,e){return R(this,null,function*(){Bb(n),jv(n)?(n.q_.M_(e),Vv(n)):n.q_.set("Unknown")})}function qF(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof dd&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Md(n,r)}else if(e instanceof Zo?n.Q_.Ke(e):e instanceof ld?n.Q_.He(e):n.Q_.We(e),!t.isEqual(G.min()))try{let r=yield Pb(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Ge.EMPTY_BYTE_STRING,h.snapshotVersion)),jb(o,c);let p=new os(h.target,c,l,h.sequenceNumber);Lv(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield Md(n,r)}})}function Md(n,e,t){return R(this,null,function*(){if(!jr(e))throw e;n.L_.add(1),yield ys(n),n.q_.set("Offline"),t||(t=()=>Pb(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Au(n)}))})}function Ub(n,e){return e().catch(t=>Md(n,t,e))}function vs(n){return R(this,null,function*(){let e=V(n),t=Lr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;zF(e);)try{let i=yield LF(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,GF(e,i)}catch(i){yield Md(e,i)}$b(e)&&Hb(e)})}function zF(n){return Br(n)&&n.O_.length<10}function GF(n,e){n.O_.push(e);let t=Lr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function $b(n){return Br(n)&&!Lr(n).n_()&&n.O_.length>0}function Hb(n){Lr(n).start()}function WF(n){return R(this,null,function*(){Lr(n).p_()})}function KF(n){return R(this,null,function*(){let e=Lr(n);for(let t of n.O_)e.m_(t.mutations)})}function QF(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=Jm.from(r,e,t);yield Ub(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield vs(n)})}function YF(n,e){return R(this,null,function*(){e&&Lr(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return cb(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Lr(r).s_(),yield Ub(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield vs(r)}})}(n,e)),$b(n)&&Hb(n)})}function p0(n,e){return R(this,null,function*(){let t=V(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Br(t);t.L_.add(3),yield ys(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Au(t)})}function Wy(n,e){return R(this,null,function*(){let t=V(n);e?(t.L_.delete(2),yield Au(t)):e||(t.L_.add(2),yield ys(t),t.q_.set("Unknown"))})}function _s(n){return n.K_||(n.K_=function(t,r,i){let o=V(t);return o.w_(),new $y(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:UF.bind(null,n),Ro:$F.bind(null,n),mo:HF.bind(null,n),d_:qF.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),jv(n)?Vv(n):n.q_.set("Unknown")):(yield n.K_.stop(),Bb(n))}))),n.K_}function Lr(n){return n.U_||(n.U_=function(t,r,i){let o=V(t);return o.w_(),new Hy(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WF.bind(null,n),mo:YF.bind(null,n),f_:KF.bind(null,n),g_:QF.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield vs(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Ky=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ws(n,e){if(He("AsyncQueue",`${e}: ${n}`),jr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var Nd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||j.comparator(t.key,r.key):(t,r)=>j.comparator(t.key,r.key),this.keyedMap=Qa(),this.sortedSet=new Me(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Pd=class{constructor(){this.W_=new Me(j.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ls=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Nd.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Qy=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Yy=class{constructor(){this.queries=g0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=V(t),o=i.queries;i.queries=g0(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function g0(){return new Rn(n=>Q0(n),Tu)}function Bv(n,e){return R(this,null,function*(){let t=V(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Qy,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=ws(s,`Initialization of query '${qo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&$v(t)})}function Uv(n,e){return R(this,null,function*(){let t=V(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function ZF(n,e){let t=V(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&$v(t)}function JF(n,e,t){let r=V(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function $v(n){n.Y_.forEach(e=>{e.next()})}var Zy,m0;(m0=Zy||(Zy={})).ea="default",m0.Cache="cache";var _u=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ls(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ls.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zy.Cache}};var Jy=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var kd=class{constructor(e){this.serializer=e}Es(e){return bn(this.serializer,e)}ds(e){return e.metadata.exists?yb(this.serializer,e.document,!1):Ye.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ze(e)}},Xy=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qb(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=fe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new kd(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ie()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield VF(this.localStore,new kd(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield jF(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function qb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Od=class{constructor(e){this.key=e}},Fd=class{constructor(e){this.key=e}},Ld=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=Z0(e),this.Ra=new Nd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Pd,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=bu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return M(v)-M(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new ls(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Pd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Fd(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Od(r))}),t}ba(e){this.Ta=e.Ts,this.da=ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ls.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ev=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},tv=class{constructor(e){this.key=e,this.va=!1}},nv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Rn(a=>Q0(a),Tu),this.Ma=new Map,this.xa=new Set,this.Oa=new Me(j.comparator),this.Na=new Map,this.La=new mu,this.Ba={},this.ka=new Map,this.qa=ss.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function XF(n,e,t=!0){return R(this,null,function*(){let r=Jd(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield zb(r,e,t,!0),i})}function eL(n,e){return R(this,null,function*(){let t=Jd(n);yield zb(t,e,!0,!1)})}function zb(n,e,t,r){return R(this,null,function*(){let i=yield as(n.localStore,Ct(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Hv(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Zd(n.remoteStore,i),a})}function Hv(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,L,$){return R(this,null,function*(){let O=N.view.ma(L);O.ns&&(O=yield Td(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,O)));let K=$&&$.targetChanges.get(N.targetId),ee=$&&$.targetMismatches.get(N.targetId)!=null,Q=N.view.applyChanges(O,M.isPrimaryClient,K,ee);return rv(M,N.targetId,Q.wa),Q.snapshot})}(n,p,m,v);let o=yield Td(n.localStore,e,!0),s=new Ld(e,o.Ts),a=s.ma(o.documents),c=hu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);rv(n,t,l.wa);let h=new ev(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function tL(n,e,t){return R(this,null,function*(){let r=V(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Tu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield us(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&cs(r.remoteStore,i.targetId),ds(r,i.targetId)}).catch(Vr))):(ds(r,i.targetId),yield us(r.localStore,i.targetId,!0))})}function nL(n,e){return R(this,null,function*(){let t=V(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),cs(t.remoteStore,r.targetId))})}function rL(n,e,t){return R(this,null,function*(){let r=Wv(n);try{let i=yield function(s,a){let c=V(s),l=Fe.now(),h=a.reduce((v,b)=>v.add(b.key),ie()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Rt(),M=ie();return c.cs.getEntries(v,h).next(N=>{b=N,b.forEach((L,$)=>{$.isValidDocument()||(M=M.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let L=[];for(let $ of a){let O=yF($,p.get($.key).overlayedDocument);O!=null&&L.push(new cn($.key,O,$0(O.value.mapValue),Be.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,L,a)}).next(N=>{m=N;let L=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,L)})}).then(()=>({batchId:m.batchId,changes:X0(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Me(re)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield nr(r,i.changes),yield vs(r.remoteStore)}catch(i){let o=ws(i,"Failed to persist write");t.reject(o)}})}function Gb(n,e){return R(this,null,function*(){let t=V(n);try{let r=yield FF(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(z(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?z(s.va):i.removedDocuments.size>0&&(z(s.va),s.va=!1))}),yield nr(t,r,e)}catch(r){yield Vr(r)}})}function y0(n,e,t){let r=V(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=V(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&$v(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iL(n,e,t){return R(this,null,function*(){let r=V(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Me(j.comparator);s=s.insert(o,Ye.newNoDocument(o,G.min()));let a=ie().add(o),c=new du(G.min(),new Map,new Me(re),s,a);yield Gb(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),Gv(r)}else yield us(r.localStore,e,!1).then(()=>ds(r,e,t)).catch(Vr)})}function oL(n,e){return R(this,null,function*(){let t=V(n),r=e.batch.batchId;try{let i=yield OF(t.localStore,e);zv(t,r,null),qv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield nr(t,i)}catch(i){yield Vr(i)}})}function sL(n,e,t){return R(this,null,function*(){let r=V(n);try{let i=yield function(s,a){let c=V(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(z(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);zv(r,e,t),qv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield nr(r,i)}catch(i){yield Vr(i)}})}function aL(n,e){return R(this,null,function*(){let t=V(n);Br(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=V(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=ws(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function qv(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function zv(n,e,t){let r=V(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ds(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Wb(n,r)})}function Wb(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(cs(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Gv(n))}function rv(n,e,t){for(let r of t)r instanceof Od?(n.La.addReference(r.key,e),uL(n,r)):r instanceof Fd?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Wb(n,r.key)):H()}function uL(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),Gv(n))}function Gv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new j(fe.fromString(e)),r=n.qa.next();n.Na.set(r,new tv(t)),n.Oa=n.Oa.insert(t,r),Zd(n.remoteStore,new os(Ct(ms(t.path)),r,"TargetPurposeLimboResolution",Ft.oe))}}function nr(n,e,t){return R(this,null,function*(){let r=V(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Oy.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=V(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!jr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function cL(n,e){return R(this,null,function*(){let t=V(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield Nb(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield nr(t,r.hs)}})}function lL(n,e){let t=V(n),r=t.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function dL(n,e){return R(this,null,function*(){let t=V(n),r=yield Td(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&rv(t,e.targetId,i.wa),i})}function hL(n,e){return R(this,null,function*(){let t=V(n);return Fb(t.localStore,e).then(r=>nr(t,r))})}function fL(n,e,t,r){return R(this,null,function*(){let i=V(n),o=yield function(a,c){let l=V(a),h=V(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield vs(i.remoteStore):t==="acknowledged"||t==="rejected"?(zv(i,e,r||null),qv(i,e),function(a,c){V(V(a).mutationQueue).On(c)}(i.localStore,e)):H(),yield nr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function pL(n,e){return R(this,null,function*(){let t=V(n);if(Jd(t),Wv(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield v0(t,r.toArray());t.Qa=!0,yield Wy(t.remoteStore,!0);for(let o of i)Zd(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ds(t,s),us(t.localStore,s,!0))),cs(t.remoteStore,s)}),yield i,yield v0(t,r),function(s){let a=V(s);a.Na.forEach((c,l)=>{cs(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Me(j.comparator)}(t),t.Qa=!1,yield Wy(t.remoteStore,!1)}})}function v0(n,e,t){return R(this,null,function*(){let r=V(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield as(r.localStore,Ct(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield dL(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield Ob(r.localStore,s);a=yield as(r.localStore,l),yield Hv(r,Kb(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function Kb(n){return K0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gL(n){return function(t){return V(V(t).persistence).Qi()}(V(n).localStore)}function mL(n,e,t,r){return R(this,null,function*(){let i=V(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield Fb(i.localStore,Y0(o[0])),a=du.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ge.EMPTY_BYTE_STRING);yield nr(i,s,a);break}case"rejected":yield us(i.localStore,e,!0),ds(i,e,r);break;default:H()}})}function yL(n,e,t){return R(this,null,function*(){let r=Jd(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield Ob(r.localStore,i),s=yield as(r.localStore,o);yield Hv(r,Kb(o),s.targetId,!1,s.resumeToken),Zd(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield us(r.localStore,i,!1).then(()=>{cs(r.remoteStore,i),ds(r,i)}).catch(Vr))}})}function Jd(n){let e=V(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iL.bind(null,e),e.Ca.d_=ZF.bind(null,e.eventManager),e.Ca.$a=JF.bind(null,e.eventManager),e}function Wv(n){let e=V(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sL.bind(null,e),e}function vL(n,e,t){let r=V(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,b){let M=V(v),N=ze(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",L=>M.Gr.getBundleMetadata(L,b.id)).then(L=>!!L&&L.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(qb(c));let l=new Xy(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield nr(o,p.Ia,void 0),yield function(v,b){let M=V(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,b))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return an("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var iv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=Su(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Mb(this.persistence,new Cd,t.initialUser,this.serializer)}Ga(t){return new Ed(Dd.Zr,this.serializer)}Wa(t){return new Ad}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Vd=class n extends iv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield Wh(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Wv(this.Ja.syncEngine),yield vs(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return Mb(this.persistence,new Cd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new _y(r,e.asyncQueue,t)}Ha(e,t){let r=new Fm(t,this.persistence);return new Om(e.asyncQueue,r)}Ga(e){let t=Fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new ky(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Vb(),Zl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Ad}},ov=class n extends Vd{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield Wh(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof tu&&(this.sharedClientState.syncEngine={no:fL.bind(null,t),ro:mL.bind(null,t),io:yL.bind(null,t),Qi:gL.bind(null,t),eo:hL.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield pL(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=Vb();if(!tu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new tu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Kv=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>y0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cL.bind(null,this.syncEngine),yield Wy(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Yy}()}createDatastore(t){let r=Su(t.databaseInfo.databaseId),i=function(s){return new Uy(s)}(t.databaseInfo);return function(s,a,c,l){return new qy(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Gy(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>y0(this.syncEngine,r,0),function(){return xd.D()?new xd:new jy}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new nv(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=V(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield ys(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function _0(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var hs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):He("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var sv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Xe,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Jy(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var av=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=V(i),a={documents:o.map(p=>fu(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,fe.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=DF(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());z(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=j.fromPath(r);this.mutations.push(new uu(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=V(r),s={writes:i.map(a=>pu(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,fe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw H();t=G.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(G.min())?Be.exists(!1):Be.updateTime(t):Be.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(G.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Be.updateTime(t)}return Be.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var uv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new vu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new av(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Du(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!cb(t)}return!1}};var cv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Qe.UNAUTHENTICATED,this.clientId=Xl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=ws(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Cm(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield Nb(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function w0(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Qv(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>p0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>p0(e.remoteStore,i)),n._onlineComponents=e})}function Qv(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;an("Error using user provided cache. Falling back to memory cache: "+t),yield Cm(n,new iv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Cm(n,new iv);return n._offlineComponents})}function Xd(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield w0(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield w0(n,new Kv))),n._onlineComponents})}function Qb(n){return Qv(n).then(e=>e.persistence)}function Yv(n){return Qv(n).then(e=>e.localStore)}function Yb(n){return Xd(n).then(e=>e.remoteStore)}function Zv(n){return Xd(n).then(e=>e.syncEngine)}function _L(n){return Xd(n).then(e=>e.datastore)}function fs(n){return R(this,null,function*(){let e=yield Xd(n),t=e.eventManager;return t.onListen=XF.bind(null,e.syncEngine),t.onUnlisten=tL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nL.bind(null,e.syncEngine),t})}function wL(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield Qb(n),t=yield Yb(n);return e.setNetworkEnabled(!0),function(i){let o=V(i);return o.L_.delete(0),Au(o)}(t)}))}function IL(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield Qb(n),t=yield Yb(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=V(i);o.L_.add(0),yield ys(o),o.q_.set("Offline")})}(t)}))}function EL(n,e){let t=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=V(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=ws(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Yv(n),e,t)})),t.promise}function Zb(n,e,t={}){let r=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new hs({next:m=>{h.Za(),s.enqueueAndForget(()=>Uv(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new _u(ms(a.path),h,{includeMetadataChanges:!0,_a:!0});return Bv(o,p)}(yield fs(n),n.asyncQueue,e,t,r)})),r.promise}function DL(n,e){let t=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield Td(i,o,!0),c=new Ld(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=ws(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Yv(n),e,t)})),t.promise}function Jb(n,e,t={}){let r=new Xe;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new hs({next:m=>{h.Za(),s.enqueueAndForget(()=>Uv(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new _u(a,h,{includeMetadataChanges:!0,_a:!0});return Bv(o,p)}(yield fs(n),n.asyncQueue,e,t,r)})),r.promise}function CL(n,e){let t=new hs(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){V(i).Y_.add(o),o.next()}(yield fs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){V(i).Y_.delete(o)}(yield fs(n),t)}))}}function TL(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?db().encode(s):s,function(h,p){return new sv(h,p)}(function(h,p){if(h instanceof Uint8Array)return _0(h,p);if(h instanceof ArrayBuffer)return _0(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Su(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){vL(yield Zv(n),i,r)}))}function bL(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=V(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield Yv(n),e)}))}function Xb(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var I0=new Map;function Jv(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Xv(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function E0(n){if(!j.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function D0(n){if(j.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function pe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=eh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var jd=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Mi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Tm;switch(r.type){case"firstParty":return new xm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=I0.get(t);r&&(k("ComponentProvider","Removing Datastore"),I0.delete(t),r.terminate())}(this),Promise.resolve()}};function tS(n,e,t,r={}){var i;let o=(n=pe(n,Mi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&an("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Qe.MOCK_USER;else{a=bw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Qe(l)}n._authCredentials=new bm(new Jl(a,c))}}var ut=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Se=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Sn=class n extends ut{constructor(e,t,r){super(e,t,ms(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Se(this.firestore,null,new j(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function e_(n,e,...t){if(n=Pe(n),Jv("collection","path",e),n instanceof Mi){let r=fe.fromString(e,...t);return D0(r),new Sn(n,null,r)}{if(!(n instanceof Se||n instanceof Sn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(fe.fromString(e,...t));return D0(r),new Sn(n.firestore,null,r)}}function nS(n,e){if(n=pe(n,Mi),Jv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ut(n,null,function(r){return new un(fe.emptyPath(),r)}(e))}function xu(n,e,...t){if(n=Pe(n),arguments.length===1&&(e=Xl.newId()),Jv("doc","path",e),n instanceof Mi){let r=fe.fromString(e,...t);return E0(r),new Se(n,null,new j(r))}{if(!(n instanceof Se||n instanceof Sn))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(fe.fromString(e,...t));return E0(r),new Se(n.firestore,n instanceof Sn?n.converter:null,new j(r))}}function t_(n,e){return n=Pe(n),e=Pe(e),(n instanceof Se||n instanceof Sn)&&(e instanceof Se||e instanceof Sn)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function n_(n,e){return n=Pe(n),e=Pe(e),n instanceof ut&&e instanceof ut&&n.firestore===e.firestore&&Tu(n._query,e._query)&&n.converter===e.converter}var Bd=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vu(this,"async_queue_retry"),this.Vu=()=>{let r=Zl();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Zl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Zl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Xe;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!jr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw He("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Ky.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&H()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function lv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var dv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xe,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var rS=-1,Le=class extends Mi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Bd,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Bd(e),this._firestoreClient=void 0,yield e}})}};function ct(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iS(n),n._firestoreClient}function iS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new Lm(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Xb(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function oS(n,e){an("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return aS(n,Kv.provider,{build:r=>new Vd(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function sS(n){return R(this,null,function*(){an("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();aS(n,Kv.provider,{build:t=>new ov(t,e.cacheSizeBytes)})})}function aS(n,e,t){if((n=pe(n,Le))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},iS(n)}function uS(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Xe;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!xr.D())return Promise.resolve();let i=r+"main";yield xr.delete(i)})}(Fv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function cS(n){return function(t){let r=new Xe;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return aL(yield Zv(t),r)})),r.promise}(ct(n=pe(n,Le)))}function lS(n){return wL(ct(n=pe(n,Le)))}function dS(n){return IL(ct(n=pe(n,Le)))}function hS(n,e){let t=ct(n=pe(n,Le)),r=new dv;return TL(t,n._databaseId,e,r),r}function fS(n,e){return bL(ct(n=pe(n,Le)),e).then(t=>t?new ut(n,null,t.query):null)}var Mn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ge.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ln=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var er=class{constructor(e){this._methodName=e}};var Ni=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var wu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var SL=/^__.*__$/,hv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new cn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Or(e,this.data,t,this.fieldTransforms)}},Ud=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function pS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var $d=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pS(this.Cu)&&SL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},fv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Su(e)}Qu(e,t,r,i=!1){return new $d({Cu:e,methodName:t,qu:r,path:qe.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Fi(n){let e=n._freezeSettings(),t=Su(n._databaseId);return new fv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function th(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);o_("Data must be an object, but it was:",s,r);let a=yS(r,s),c,l;if(o.merge)c=new Lt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=vv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_S(h,m)||h.push(m)}c=new Lt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new hv(new mt(a),c,l)}var Iu=class n extends er{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function gS(n,e,t){return new $d({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var pv=class n extends er{_toFieldTransform(e){return new Ai(e.path,new Pr)}isEqual(e){return e instanceof n}},gv=class n extends er{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=gS(this,e,!0),r=this.Ku.map(o=>Li(o,t)),i=new Jn(r);return new Ai(e.path,i)}isEqual(e){return e instanceof n&&Yh(this.Ku,e.Ku)}},mv=class n extends er{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=gS(this,e,!0),r=this.Ku.map(o=>Li(o,t)),i=new Xn(r);return new Ai(e.path,i)}isEqual(e){return e instanceof n&&Yh(this.Ku,e.Ku)}},yv=class n extends er{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new kr(e.serializer,nb(e.serializer,this.$u));return new Ai(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function r_(n,e,t,r){let i=n.Qu(1,e,t);o_("Data must be an object, but it was:",i,r);let o=[],s=mt.empty();Oi(r,(c,l)=>{let h=s_(e,c,t);l=Pe(l);let p=i.Nu(h);if(l instanceof Iu)o.push(h);else{let m=Li(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Lt(o);return new Ud(s,a,i.fieldTransforms)}function i_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[vv(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(vv(e,o[m])),c.push(o[m+1]);let l=[],h=mt.empty();for(let m=a.length-1;m>=0;--m)if(!_S(l,a[m])){let v=a[m],b=c[m];b=Pe(b);let M=s.Nu(v);if(b instanceof Iu)l.push(v);else{let N=Li(b,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Lt(l);return new Ud(h,p,s.fieldTransforms)}function mS(n,e,t,r=!1){return Li(t,n.Qu(r?4:3,e))}function Li(n,e){if(vS(n=Pe(n)))return o_("Unsupported field value:",e,n),yS(n,e);if(n instanceof er)return function(r,i){if(!pS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Li(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Fe.fromDate(r);return{timestampValue:is(i.serializer,o)}}if(r instanceof Fe){let o=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:is(i.serializer,o)}}if(r instanceof Ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mn)return{bytesValue:hb(i.serializer,r._byteString)};if(r instanceof Se){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Pv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Nv(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${eh(r)}`)}(n,e)}function yS(n,e){let t={};return V0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(n,(r,i)=>{let o=Li(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function vS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fe||n instanceof Ni||n instanceof Mn||n instanceof Se||n instanceof er||n instanceof wu)}function o_(n,e,t){if(!vS(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=eh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function vv(n,e,t){if((e=Pe(e))instanceof ln)return e._internalPath;if(typeof e=="string")return s_(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}var AL=new RegExp("[~\\*/\\[\\]]");function s_(n,e,t){if(e.search(AL)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ln(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function _S(n,e){return n.some(t=>t.isEqual(e))}var Pi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _v(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(nh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},_v=class extends Pi{data(){return super.data()}};function nh(n,e){return typeof e=="string"?s_(n,e):e instanceof ln?e._internalPath:e._delegate._internalPath}function wS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Eu=class{},ki=class extends Eu{};function rr(n,e,...t){let r=[];e instanceof Eu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof wv).length,a=o.filter(c=>c instanceof qd).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var qd=class n extends ki{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return RS(e._query,t),new ut(e.firestore,e.converter,Ym(e._query,t))}_parse(e){let t=Fi(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){T0(p,h);let v=[];for(let b of p)v.push(C0(c,o,b));m={arrayValue:{values:v}}}else m=C0(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||T0(p,h),m=mS(a,s,p,h==="in"||h==="not-in");return ce.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function IS(n,e,t){let r=e,i=nh("where",n);return qd._create(i,r,t)}var wv=class n extends Eu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ee.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)RS(s,c),s=Ym(s,c)}(e._query,t),new ut(e.firestore,e.converter,Ym(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Iv=class n extends ki{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bi(o,s)}(e._query,this._field,this._direction);return new ut(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new un(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function ES(n,e="asc"){let t=e,r=nh("orderBy",n);return Iv._create(r,t)}var zd=class n extends ki{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ut(e.firestore,e.converter,cd(e._query,this._limit,this._limitType))}};function DS(n){return eS("limit",n),zd._create("limit",n,"F")}function CS(n){return eS("limitToLast",n),zd._create("limitToLast",n,"L")}var Gd=class n extends ki{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=xS(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function TS(...n){return Gd._create("startAt",n,!0)}function bS(...n){return Gd._create("startAfter",n,!1)}var Wd=class n extends ki{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=xS(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,function(i,o){return new un(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function SS(...n){return Wd._create("endBefore",n,!1)}function AS(...n){return Wd._create("endAt",n,!0)}function xS(n,e,t,r){if(t[0]=Pe(t[0]),t[0]instanceof Pi)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Yo(o))if(p.field.isKeyField())h.push(Ti(s,c.key));else{let m=c.data.field(p.field);if(Qd(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new xn(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Fi(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let M=h[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!Rv(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(fe.fromString(M));if(!j.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let L=new j(N);v.push(Ti(a,L))}else{let N=mS(c,l,M);v.push(N)}}return new xn(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function C0(n,e,t){if(typeof(t=Pe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rv(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(fe.fromString(t));if(!j.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ti(n,new j(r))}if(t instanceof Se)return Ti(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(t)}.`)}function T0(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RS(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ps=class{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Oi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ne(s.doubleValue));return new wu(o)}convertGeoPoint(e){return new Ni(Ne(e.latitude),Ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Av(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){let t=Zn(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=fe.fromString(e);z(Db(r));let i=new Mr(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(t)||He(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function rh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ev=class extends ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}};var Yn=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Yt=class extends Pi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Sr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(nh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Sr=class extends Yt{data(e={}){return super.data(e)}},dn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Sr(this._firestore,this._userDataWriter,r.key,r,new Yn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Sr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Sr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Yn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:xL(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function xL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function a_(n,e){return n instanceof Yt&&e instanceof Yt?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof dn&&e instanceof dn&&n._firestore===e._firestore&&n_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function MS(n){n=pe(n,Se);let e=pe(n.firestore,Le);return Zb(ct(e),n._key).then(t=>d_(e,n,t))}var tr=class extends ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Se(this.firestore,null,t)}};function NS(n){n=pe(n,Se);let e=pe(n.firestore,Le),t=ct(e),r=new tr(e);return EL(t,n._key).then(i=>new Yt(e,r,n._key,i,new Yn(i!==null&&i.hasLocalMutations,!0),n.converter))}function PS(n){n=pe(n,Se);let e=pe(n.firestore,Le);return Zb(ct(e),n._key,{source:"server"}).then(t=>d_(e,n,t))}function kS(n){n=pe(n,ut);let e=pe(n.firestore,Le),t=ct(e),r=new tr(e);return wS(n._query),Jb(t,n._query).then(i=>new dn(e,r,n,i))}function OS(n){n=pe(n,ut);let e=pe(n.firestore,Le),t=ct(e),r=new tr(e);return DL(t,n._query).then(i=>new dn(e,r,n,i))}function FS(n){n=pe(n,ut);let e=pe(n.firestore,Le),t=ct(e),r=new tr(e);return Jb(t,n._query,{source:"server"}).then(i=>new dn(e,r,n,i))}function u_(n,e,t){n=pe(n,Se);let r=pe(n.firestore,Le),i=rh(n.converter,e,t);return Is(r,[th(Fi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Be.none())])}function c_(n,e,t,...r){n=pe(n,Se);let i=pe(n.firestore,Le),o=Fi(i),s;return s=typeof(e=Pe(e))=="string"||e instanceof ln?i_(o,"updateDoc",n._key,e,t,r):r_(o,"updateDoc",n._key,e),Is(i,[s.toMutation(n._key,Be.exists(!0))])}function LS(n){return Is(pe(n.firestore,Le),[new Fr(n._key,Be.none())])}function VS(n,e){let t=pe(n.firestore,Le),r=xu(n),i=rh(n.converter,e);return Is(t,[th(Fi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Be.exists(!1))]).then(()=>r)}function l_(n,...e){var t,r,i;n=Pe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||lv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(lv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Se)l=pe(n.firestore,Le),h=ms(n._key.path),c={next:p=>{e[s]&&e[s](d_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=pe(n,ut);l=pe(p.firestore,Le),h=p._query;let m=new tr(l);c={next:v=>{e[s]&&e[s](new dn(l,m,p,v))},error:e[s+1],complete:e[s+2]},wS(n._query)}return function(m,v,b,M){let N=new hs(M),L=new _u(v,N,b);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Bv(yield fs(m),L)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Uv(yield fs(m),L)}))}}(ct(l),h,a,c)}function jS(n,e){return CL(ct(n=pe(n,Le)),lv(e)?e:{next:e})}function Is(n,e){return function(r,i){let o=new Xe;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return rL(yield Zv(r),i,o)})),o.promise}(ct(n),e)}function d_(n,e,t){let r=t.docs.get(e._key),i=new tr(n);return new Yt(n,i,e._key,r,new Yn(t.hasPendingWrites,t.fromCache),e.converter)}var RL={maxAttempts:5};var Kd=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fi(e)}set(e,t,r){this._verifyNotCommitted();let i=Tr(e,this._firestore),o=rh(i.converter,t,r),s=th(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Be.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Tr(e,this._firestore),s;return s=typeof(t=Pe(t))=="string"||t instanceof ln?i_(this._dataReader,"WriteBatch.update",o._key,t,r,i):r_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Be.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Tr(e,this._firestore);return this._mutations=this._mutations.concat(new Fr(t._key,Be.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Tr(n,e){if((n=Pe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Dv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Fi(t)}get(t){let r=Tr(t,this._firestore),i=new Ev(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return H();let s=o[0];if(s.isFoundDocument())return new Pi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Pi(this._firestore,i,r._key,null,r.converter);throw H()})}set(t,r,i){let o=Tr(t,this._firestore),s=rh(o.converter,r,i),a=th(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Tr(t,this._firestore),a;return a=typeof(r=Pe(r))=="string"||r instanceof ln?i_(this._dataReader,"Transaction.update",s._key,r,i,o):r_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Tr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Tr(e,this._firestore),r=new tr(this._firestore);return super.get(e).then(i=>new Yt(this._firestore,r,t._key,i._document,new Yn(!1,!1),t.converter))}};function BS(n,e,t){n=pe(n,Le);let r=Object.assign(Object.assign({},RL),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new Xe;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield _L(o);new uv(o.asyncQueue,l,a,s,c).au()})),c.promise}(ct(n),i=>e(new Dv(n,i)),r)}function US(){return new Iu("deleteField")}function $S(){return new pv("serverTimestamp")}function HS(...n){return new gv("arrayUnion",n)}function qS(...n){return new mv("arrayRemove",n)}function zS(n){return new yv("increment",n)}(function(e,t=!0){(function(i){gs=i})(xw),zs(new zr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Le(new Sm(r.getProvider("auth-internal")),new Mm(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ur(DT,"4.7.3",e),ur(DT,"4.7.3","esm2017")})();var ML="@firebase/firestore-compat",NL="0.3.38";function y_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function GS(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function WS(){if(!j0())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ih=class n{constructor(e){this._delegate=e}static fromBase64String(e){return WS(),new n(Mn.fromBase64String(e))}static fromUint8Array(e){return GS(),new n(Mn.fromUint8Array(e))}toBase64(){return WS(),this._delegate.toBase64()}toUint8Array(){return GS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function h_(n){return PL(n,["next","error","complete"])}function PL(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var f_=class{enableIndexedDbPersistence(e,t){return oS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return sS(e._delegate)}clearIndexedDbPersistence(e){return uS(e._delegate)}},oh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&an("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){tS(this._delegate,e,t,r)}enableNetwork(){return lS(this._delegate)}disableNetwork(){return dS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Xv("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return cS(this._delegate)}onSnapshotsInSync(e){return jS(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cs(this,e_(this._delegate,e))}catch(t){throw Tt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Nn(this,xu(this._delegate,e))}catch(t){throw Tt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ui(this,nS(this._delegate,e))}catch(t){throw Tt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return BS(this._delegate,t=>e(new sh(this,t)))}batch(){return ct(this._delegate),new ah(new Kd(this._delegate,e=>Is(this._delegate,e)))}loadBundle(e){return hS(this._delegate,e)}namedQuery(e){return fS(this._delegate,e).then(t=>t?new Ui(this,t):null)}},Es=class extends ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new ih(new Mn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Nn.forKey(t,this.firestore,null)}};function kL(n){b0(n)}var sh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Es(e)}get(e){let t=Vi(e);return this._delegate.get(t).then(r=>new ji(this._firestore,new Yt(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Vi(e);return r?(y_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vi(e);return this._delegate.delete(t),this}},ah=class{constructor(e){this._delegate=e}set(e,t,r){let i=Vi(e);return r?(y_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Vi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Vi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ds=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Sr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Bi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Es(e),t),i.set(t,o)),o}};Ds.INSTANCES=new WeakMap;var Nn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Es(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Se(t._delegate,r,new j(e)))}static forKey(e,t,r){return new n(t,new Se(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cs(this.firestore,e_(this._delegate,e))}catch(t){throw Tt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pe(e),e instanceof Se?t_(this._delegate,e):!1}set(e,t){t=y_("DocumentReference.set",t);try{return t?u_(this._delegate,e,t):u_(this._delegate,e)}catch(r){throw Tt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?c_(this._delegate,e):c_(this._delegate,e,t,...r)}catch(i){throw Tt(i,"updateDoc()","DocumentReference.update()")}}delete(){return LS(this._delegate)}onSnapshot(...e){let t=KS(e),r=QS(e,i=>new ji(this.firestore,new Yt(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return l_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=NS(this._delegate):e?.source==="server"?t=PS(this._delegate):t=MS(this._delegate),t.then(r=>new ji(this.firestore,new Yt(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ds.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Tt(n,e,t){return n.message=n.message.replace(e,t),n}function KS(n){for(let e of n)if(typeof e=="object"&&!h_(e))return e;return{}}function QS(n,e){var t,r;let i;return h_(n[0])?i=n[0]:h_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ji=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return a_(this._delegate,e._delegate)}},Bi=class extends ji{data(e){let t=this._delegate.data(e);return this._delegate._converter||S0(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ui=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Es(e)}where(e,t,r){try{return new n(this.firestore,rr(this._delegate,IS(e,t,r)))}catch(i){throw Tt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,rr(this._delegate,ES(e,t)))}catch(r){throw Tt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,rr(this._delegate,DS(e)))}catch(t){throw Tt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,rr(this._delegate,CS(e)))}catch(t){throw Tt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,rr(this._delegate,TS(...e)))}catch(t){throw Tt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,rr(this._delegate,bS(...e)))}catch(t){throw Tt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,rr(this._delegate,SS(...e)))}catch(t){throw Tt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,rr(this._delegate,AS(...e)))}catch(t){throw Tt(t,"endAt()","Query.endAt()")}}isEqual(e){return n_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=OS(this._delegate):e?.source==="server"?t=FS(this._delegate):t=kS(this._delegate),t.then(r=>new Ru(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=KS(e),r=QS(e,i=>new Ru(this.firestore,new dn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return l_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ds.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},p_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Bi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ru=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ui(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Bi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new p_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Bi(this._firestore,r))})}isEqual(e){return a_(this._delegate,e._delegate)}},Cs=class n extends Ui{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Nn(this.firestore,e):null}doc(e){try{return e===void 0?new Nn(this.firestore,xu(this._delegate)):new Nn(this.firestore,xu(this._delegate,e))}catch(t){throw Tt(t,"doc()","CollectionReference.doc()")}}add(e){return VS(this._delegate,e).then(t=>new Nn(this.firestore,t))}isEqual(e){return t_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ds.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Vi(n){return pe(n,Se)}var g_=class n{constructor(...e){this._delegate=new ln(...e)}static documentId(){return new n(qe.keyField().canonicalString())}isEqual(e){return e=Pe(e),e instanceof ln?this._delegate._internalPath.isEqual(e._internalPath):!1}};var m_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=$S();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=US();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=HS(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=qS(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=zS(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var OL={Firestore:oh,GeoPoint:Ni,Timestamp:Fe,Blob:ih,Transaction:sh,WriteBatch:ah,DocumentReference:Nn,DocumentSnapshot:ji,Query:Ui,QueryDocumentSnapshot:Bi,QuerySnapshot:Ru,CollectionReference:Cs,FieldPath:g_,FieldValue:m_,setLogLevel:kL,CACHE_SIZE_UNLIMITED:rS};function FL(n,e){n.INTERNAL.registerComponent(new zr("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OL)))}function LL(n){FL(n,(e,t)=>new oh(e,t,new f_)),n.registerVersion(ML,NL)}LL(bt);function VL(n,e=Qs){return new le(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function YS(n,e){return VL(n,e)}function jL(n,e){return YS(n,e).pipe(Yr(void 0),Js(),Y(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function w_(n,e){return YS(n,e).pipe(Y(t=>({payload:t,type:"query"})))}var uh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=tA(r,t);return new lh(i,o,this.afs)}snapshotChanges(){return jL(this.ref,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return this.snapshotChanges().pipe(Y(({payload:t})=>e.idField?xe(q({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ie(this.ref.get(e)).pipe(xt)}};function ch(n,e){return w_(n,e).pipe(Yr(void 0),Js(),Y(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function ZS(n,e,t){return ch(n,t).pipe(Qr((r,i)=>BL(r,i.map(o=>o.payload),e),[]),If(),Y(r=>r.map(i=>({type:i.type,payload:i}))))}function BL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=UL(n,r))}),n}function v_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function UL(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return v_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return v_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return v_(n,e.oldIndex,1);break}return n}function JS(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var lh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ch(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Y(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Yr(void 0),Js(),pt(([r,i])=>i.length>0||!r),Y(([,r])=>r),xt)}auditTrail(e){return this.stateChanges(e).pipe(Qr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=JS(e);return ZS(this.query,t,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return w_(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.payload.docs.map(r=>e.idField?xe(q({},r.data()),{[e.idField]:r.id}):r.data())),xt)}get(e){return Ie(this.query.get(e)).pipe(xt)}add(e){return this.ref.add(e)}doc(e){return new uh(this.ref.doc(e),this.afs)}},__=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?ch(this.query,this.afs.schedulers.outsideAngular).pipe(xt):ch(this.query,this.afs.schedulers.outsideAngular).pipe(Y(t=>t.filter(r=>e.indexOf(r.type)>-1)),pt(t=>t.length>0),xt)}auditTrail(e){return this.stateChanges(e).pipe(Qr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=JS(e);return ZS(this.query,t,this.afs.schedulers.outsideAngular).pipe(xt)}valueChanges(e={}){return w_(this.query,this.afs.schedulers.outsideAngular).pipe(Y(r=>r.payload.docs.map(i=>e.idField?q({[e.idField]:i.id},i.data()):i.data())),xt)}get(e){return Ie(this.query.get(e)).pipe(xt)}},XS=new W("angularfire2.enableFirestorePersistence"),eA=new W("angularfire2.firestore.persistenceSettings"),$L=new W("angularfire2.firestore.settings"),HL=new W("angularfire2.firestore.use-emulator");function tA(n,e=t=>t){return{query:e(n),ref:n}}var Mu=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,b,M,N,L,$){this.schedulers=c;let O=$a(t,a,r),K=h;p&&fm(O,a,m,b,M,N,v,L),[this.firestore,this.persistenceEnabled$]=jl(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{let ee=a.runOutsideAngular(()=>O.firestore());if(o&&ee.settings(o),K&&ee.useEmulator(...K),i&&!li(s)){let Q=()=>{try{return Ie(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[ee,a.runOutsideAngular(Q)]}else return[ee,J(!1)]},[o,K,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=tA(i,r),a=this.schedulers.ngZone.run(()=>o);return new lh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new __(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new uh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(B(Fo),B(Lo,8),B(XS,8),B($L,8),B(zt),B(Ce),B(Ll),B(eA,8),B(HL,8),B(wT,8),B(am,8),B(um,8),B(cm,8),B(lm,8),B(dm,8),B(hm,8),B(gi,8))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),nA=(()=>{class n{constructor(){bt.registerVersion("angularfire",Oo.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:XS,useValue:!0},{provide:eA,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=$n({type:n});static \u0275inj=Un({providers:[Mu]})}return n})();var iA={production:!1,firebase:{apiKey:"AIzaSyAhFvcQd4E5oul3fR56in85HDuEIr0UoQw",authDomain:"my-cv-6e9c0.firebaseapp.com",projectId:"my-cv-6e9c0",storageBucket:"my-cv-6e9c0.firebasestorage.app",messagingSenderId:"425171695930",appId:"1:425171695930:web:e9899d1bf34eef296d3803"}};var oA={providers:[nT(rT),Dp(aT.initializeApp(iA.firebase),nA)]};var dh=class{id;name;description;email;phoneNumber;location;"photo url";GitHub;Linkedin};var hh=class n{constructor(e){this.db=e;this.headerRef=e.collection(this.dbPath)}accesoHeader="header service running...";dbPath="/header";headerRef;getHeader(){return this.headerRef}static \u0275fac=function(t){return new(t||n)(B(Mu))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};var fh=class n{constructor(e){this.headerService=e;console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(Y(t=>t.map(r=>q({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.header=t[0],console.log(this.header)})}header=new dh;static \u0275fac=function(t){return new(t||n)(In(hh))};static \u0275cmp=nt({type:n,selectors:[["app-header"]],standalone:!0,features:[rt],decls:19,vars:8,consts:[["width","200","height","200","alt","Foto de perfil",3,"src"],["target","_blank",3,"href"]],template:function(t,r){t&1&&(ye(0,"tr")(1,"td"),Oe(2),Re(3,"br"),Oe(4),ve(),ye(5,"td"),Re(6,"img",0),ve(),ye(7,"td"),Oe(8),Re(9,"br"),Oe(10),Re(11,"br"),Oe(12),Re(13,"br"),ye(14,"a",1),Oe(15,"GitHub"),ve(),Re(16,"br"),ye(17,"a",1),Oe(18,"LinkedIn"),ve()()()),t&2&&(At(2),rn(" ",r.header.name," "),At(2),rn(" ",r.header.description," "),At(2),ai("src",r.header["photo url"],cl),At(2),rn(" ",r.header.email,""),At(2),rn(" ",r.header.phoneNumber,""),At(2),rn(" ",r.header.location,""),At(2),ai("href",r.header.GitHub,cl),At(3),ai("href",r.header.Linkedin,cl))}})};var ph=class n{constructor(e){this.db=e;this.workExperienceRef=e.collection(this.dbPath)}accesoWorkExperience="work experience running...";dbPath="/work-experience";workExperienceRef;getWorkExperience(){return this.workExperienceRef}static \u0275fac=function(t){return new(t||n)(B(Mu))};static \u0275prov=Z({token:n,factory:n.\u0275fac,providedIn:"root"})};function GL(n,e){if(n&1&&(ye(0,"ul")(1,"li"),Oe(2),ye(3,"i"),Oe(4),ve(),Re(5,"br"),ye(6,"b"),Oe(7),ve(),Re(8,"br"),Oe(9),Re(10,"br"),ve()()),n&2){let t=e.$implicit;At(2),Xp(" ",t.startDate," - ",t.endDate," "),At(2),rn("",t.Location," "),At(3),rn(" ",t.Position," "),At(2),rn(" ",t.Company," ")}}var gh=class n{constructor(e){this.workExperienceService=e;console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Y(t=>t.map(r=>q({id:r.payload.doc.id},r.payload.doc.data())))).subscribe(t=>{this.workExperience=t,console.log(this.workExperience)})}workExperience=[];static \u0275fac=function(t){return new(t||n)(In(ph))};static \u0275cmp=nt({type:n,selectors:[["app-work-experience"]],standalone:!0,features:[rt],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&Jp(0,GL,11,5,"ul",0),t&2&&ai("ngForOf",r.workExperience)},dependencies:[sg,cC]})};var mh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nt({type:n,selectors:[["app-skills"]],standalone:!0,features:[rt],decls:2,vars:0,template:function(t,r){t&1&&(ye(0,"p"),Oe(1,"skills works!"),ve())}})};var yh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nt({type:n,selectors:[["app-education"]],standalone:!0,features:[rt],decls:2,vars:0,template:function(t,r){t&1&&(ye(0,"p"),Oe(1,"education works!"),ve())}})};var vh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nt({type:n,selectors:[["app-certificates"]],standalone:!0,features:[rt],decls:2,vars:0,template:function(t,r){t&1&&(ye(0,"p"),Oe(1,"certificates works!"),ve())}})};var _h=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nt({type:n,selectors:[["app-languages"]],standalone:!0,features:[rt],decls:2,vars:0,template:function(t,r){t&1&&(ye(0,"p"),Oe(1,"languages works!"),ve())}})};var wh=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nt({type:n,selectors:[["app-interests"]],standalone:!0,features:[rt],decls:2,vars:0,template:function(t,r){t&1&&(ye(0,"p"),Oe(1,"interests works!"),ve())}})};var Ih=class n{title="mycv";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=nt({type:n,selectors:[["app-root"]],standalone:!0,features:[rt],decls:25,vars:0,consts:[["border","1"],["colspan","2"]],template:function(t,r){t&1&&(ye(0,"table",0)(1,"tr")(2,"td",1),Re(3,"app-header"),ve()(),ye(4,"tr")(5,"td"),Re(6,"app-work-experience"),ve(),ye(7,"td"),Re(8,"app-skills"),ve()(),ye(9,"tr")(10,"td"),Re(11,"app-education"),ve(),ye(12,"td"),Re(13,"app-certificates"),ve()(),ye(14,"tr")(15,"td"),Re(16,"app-education"),ve(),ye(17,"td"),Re(18,"app-certificates"),ve()(),ye(19,"tr")(20,"td"),Re(21,"app-languages"),ve(),ye(22,"td"),Re(23,"app-interests"),ve()()(),Re(24,"router-outlet"))},dependencies:[Wg,fh,gh,mh,yh,vh,_h,wh]})};vC(Ih,oA).catch(n=>console.error(n));
